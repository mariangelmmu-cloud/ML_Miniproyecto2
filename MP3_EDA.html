
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Análsis exploratorio de datos (EDA) &#8212; Miniproyecto 2 - Machine Learning</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=949a1ff5" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=ff8fa330"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'MP3_EDA';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Modelos de Clasificación y Predicción" href="MP3_MODELACION.html" />
    <link rel="prev" title="Exploración Inicial y Manejo de Datos Faltantes" href="MP3_INICIO.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="MP3_INTRO.html">
  
  
  
  
  
  
    <p class="title logo__title">Miniproyecto 2 - Machine Learning</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="MP3_INTRO.html">
                    Introducción al miniproyecto
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="MP3_DESCR_VAR.html"><em><strong>Descripción de variables</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="MP3_INICIO.html"><em><strong>Exploración Inicial y Manejo de Datos Faltantes</strong></em></a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#"><em><strong>Análsis exploratorio de datos (EDA)</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="MP3_MODELACION.html"><em><strong>Modelos de Clasificación y Predicción</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="MP3_CONCLUSIONES.html"><em><strong>Conclusiones</strong></em></a></li>

</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/mariangelmmu-cloud/ML_Miniproyecto2.git" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/mariangelmmu-cloud/ML_Miniproyecto2.git/issues/new?title=Issue%20on%20page%20%2FMP3_EDA.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/MP3_EDA.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Análsis exploratorio de datos (EDA)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importar-librerias-y-cargar-datos"><strong>1. Importar Librerias y Cargar Datos:</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#funciones"><strong>Funciones:</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eda-numericas"><strong>2. EDA Numéricas:</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulacion-de-variables-numericas"><strong>2.1 Manipulación de variables numéricas</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulacion-de-price"><strong>2.1.1 Manipulación de <code class="docutils literal notranslate"><span class="pre">Price</span></code></strong></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis"><strong>2.1.1.1. Análisis:</strong></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#correccion"><strong>2.1.1.2. Corrección:</strong></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulacion-de-odometer"><strong>2.1.2 Manipulación de <code class="docutils literal notranslate"><span class="pre">odometer</span></code></strong></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id1"><strong>2.1.2.1. Análisis:</strong></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id2"><strong>2.1.2.2. Corrección:</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-outliers-numericas"><strong>2.2 Análisis outliers numéricas:</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#odometer"><strong>2.2.1. <code class="docutils literal notranslate"><span class="pre">Odometer</span></code>:</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ano"><strong>2.2.2. <code class="docutils literal notranslate"><span class="pre">Año</span></code>:</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lat-long"><strong>2.2.3. <code class="docutils literal notranslate"><span class="pre">lat</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">long</span></code>:</strong></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-variables-numericas"><strong>2.3. Análisis variables numéricas:</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eda-categoricas"><strong>3.EDA categóricas:</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analsiis-multivariado"><em><strong>4. Análsiis multivariado</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#actualizacion-de-la-base-de-datos"><em><strong>5. Actualización de la base de datos</strong></em></a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="analsis-exploratorio-de-datos-eda">
<h1><em><strong>Análsis exploratorio de datos (EDA)</strong></em><a class="headerlink" href="#analsis-exploratorio-de-datos-eda" title="Link to this heading">#</a></h1>
<section id="importar-librerias-y-cargar-datos">
<h2><strong>1. Importar Librerias y Cargar Datos:</strong><a class="headerlink" href="#importar-librerias-y-cargar-datos" title="Link to this heading">#</a></h2>
<p>En este apartado, se importan algunas de las librerías que utilizaremos para nuestro EDA y, así mismo, se carga el archivo .csv llamado <em><strong>limpio_miniproyecto_3.csv</strong></em>, que obtuvimos luego de hacer la limpieza de nuestros datos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">kstest</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span>  <span class="n">ks_2samp</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats.mstats</span><span class="w"> </span><span class="kn">import</span> <span class="n">winsorize</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span> 
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;limpio_miniproyecto_3.csv&quot;</span><span class="p">,</span><span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="o">~</span>\<span class="n">AppData</span>\<span class="n">Local</span>\<span class="n">Temp</span><span class="o">/</span><span class="n">ipykernel_12936</span><span class="o">/</span><span class="mf">3764972602.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;limpio_miniproyecto_3.csv&quot;</span><span class="p">,</span><span class="n">sep</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span>

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\util\_decorators.py</span> in <span class="ni">wrapper</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">309</span>                     <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">310</span>                 <span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">311</span>             <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">312</span> 
<span class="g g-Whitespace">    </span><span class="mi">313</span>         <span class="k">return</span> <span class="n">wrapper</span>

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\parsers\readers.py</span> in <span class="ni">read_csv</span><span class="nt">(filepath_or_buffer, sep, delimiter, header, names, index_col, usecols, squeeze, prefix, mangle_dupe_cols, dtype, engine, converters, true_values, false_values, skipinitialspace, skiprows, skipfooter, nrows, na_values, keep_default_na, na_filter, verbose, skip_blank_lines, parse_dates, infer_datetime_format, keep_date_col, date_parser, dayfirst, cache_dates, iterator, chunksize, compression, thousands, decimal, lineterminator, quotechar, quoting, doublequote, escapechar, comment, encoding, encoding_errors, dialect, error_bad_lines, warn_bad_lines, on_bad_lines, delim_whitespace, low_memory, memory_map, float_precision, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">584</span>     <span class="n">kwds</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwds_defaults</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">585</span> 
<span class="ne">--&gt; </span><span class="mi">586</span>     <span class="k">return</span> <span class="n">_read</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">587</span> 
<span class="g g-Whitespace">    </span><span class="mi">588</span> 

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\parsers\readers.py</span> in <span class="ni">_read</span><span class="nt">(filepath_or_buffer, kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">480</span> 
<span class="g g-Whitespace">    </span><span class="mi">481</span>     <span class="c1"># Create the parser.</span>
<span class="ne">--&gt; </span><span class="mi">482</span>     <span class="n">parser</span> <span class="o">=</span> <span class="n">TextFileReader</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">483</span> 
<span class="g g-Whitespace">    </span><span class="mi">484</span>     <span class="k">if</span> <span class="n">chunksize</span> <span class="ow">or</span> <span class="n">iterator</span><span class="p">:</span>

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\parsers\readers.py</span> in <span class="ni">__init__</span><span class="nt">(self, f, engine, **kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">809</span>             <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;has_index_names&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwds</span><span class="p">[</span><span class="s2">&quot;has_index_names&quot;</span><span class="p">]</span>
<span class="g g-Whitespace">    </span><span class="mi">810</span> 
<span class="ne">--&gt; </span><span class="mi">811</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_engine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">812</span> 
<span class="g g-Whitespace">    </span><span class="mi">813</span>     <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\parsers\readers.py</span> in <span class="ni">_make_engine</span><span class="nt">(self, engine)</span>
<span class="g g-Whitespace">   </span><span class="mi">1038</span>             <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1039</span>         <span class="c1"># error: Too many arguments for &quot;ParserBase&quot;</span>
<span class="ne">-&gt; </span><span class="mi">1040</span>         <span class="k">return</span> <span class="n">mapping</span><span class="p">[</span><span class="n">engine</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">)</span>  <span class="c1"># type: ignore[call-arg]</span>
<span class="g g-Whitespace">   </span><span class="mi">1041</span> 
<span class="g g-Whitespace">   </span><span class="mi">1042</span>     <span class="k">def</span><span class="w"> </span><span class="nf">_failover_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\parsers\c_parser_wrapper.py</span> in <span class="ni">__init__</span><span class="nt">(self, src, **kwds)</span>
<span class="g g-Whitespace">     </span><span class="mi">49</span> 
<span class="g g-Whitespace">     </span><span class="mi">50</span>         <span class="c1"># open handles</span>
<span class="ne">---&gt; </span><span class="mi">51</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_open_handles</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">52</span>         <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="g g-Whitespace">     </span><span class="mi">53</span> 

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\parsers\base_parser.py</span> in <span class="ni">_open_handles</span><span class="nt">(self, src, kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">220</span>         <span class="n">Let</span> <span class="n">the</span> <span class="n">readers</span> <span class="nb">open</span> <span class="n">IOHandles</span> <span class="n">after</span> <span class="n">they</span> <span class="n">are</span> <span class="n">done</span> <span class="k">with</span> <span class="n">their</span> <span class="n">potential</span> <span class="n">raises</span><span class="o">.</span>
<span class="g g-Whitespace">    </span><span class="mi">221</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">222</span><span class="s2">         self.handles = get_handle(</span>
<span class="g g-Whitespace">    </span><span class="mi">223</span><span class="s2">             src,</span>
<span class="g g-Whitespace">    </span><span class="mi">224</span><span class="s2">             &quot;r&quot;,</span>

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\common.py</span> in <span class="ni">get_handle</span><span class="nt">(path_or_buf, mode, encoding, compression, memory_map, is_text, errors, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">700</span><span class="s2">         if ioargs.encoding and &quot;b&quot; not in ioargs.mode:</span>
<span class="g g-Whitespace">    </span><span class="mi">701</span><span class="s2">             # Encoding</span>
<span class="ne">--&gt; </span><span class="mi">702</span><span class="s2">             handle = open(</span>
<span class="g g-Whitespace">    </span><span class="mi">703</span><span class="s2">                 handle,</span>
<span class="g g-Whitespace">    </span><span class="mi">704</span><span class="s2">                 ioargs.mode,</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;limpio_miniproyecto_3.csv&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>region</th>
      <th>price</th>
      <th>year</th>
      <th>manufacturer</th>
      <th>model</th>
      <th>condition</th>
      <th>cylinders</th>
      <th>fuel</th>
      <th>odometer</th>
      <th>title_status</th>
      <th>transmission</th>
      <th>drive</th>
      <th>type</th>
      <th>paint_color</th>
      <th>state</th>
      <th>lat</th>
      <th>long</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>prescott</td>
      <td>6000</td>
      <td>2013.0</td>
      <td>ford</td>
      <td>f-150</td>
      <td>condition_missing</td>
      <td>4</td>
      <td>gas</td>
      <td>85548.0</td>
      <td>clean</td>
      <td>automatic</td>
      <td>drive_missing</td>
      <td>type_missing</td>
      <td>paint_missing</td>
      <td>az</td>
      <td>34.6019</td>
      <td>-112.420000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>fayetteville</td>
      <td>11900</td>
      <td>2013.0</td>
      <td>ford</td>
      <td>f-150</td>
      <td>condition_missing</td>
      <td>4</td>
      <td>gas</td>
      <td>85548.0</td>
      <td>clean</td>
      <td>automatic</td>
      <td>drive_missing</td>
      <td>type_missing</td>
      <td>paint_missing</td>
      <td>Other</td>
      <td>36.1716</td>
      <td>-93.380217</td>
    </tr>
    <tr>
      <th>2</th>
      <td>florida keys</td>
      <td>21000</td>
      <td>2013.0</td>
      <td>ford</td>
      <td>f-150</td>
      <td>condition_missing</td>
      <td>8</td>
      <td>gas</td>
      <td>85548.0</td>
      <td>clean</td>
      <td>automatic</td>
      <td>drive_missing</td>
      <td>type_missing</td>
      <td>paint_missing</td>
      <td>fl</td>
      <td>25.0800</td>
      <td>-80.440000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>worcester / central MA</td>
      <td>1500</td>
      <td>2013.0</td>
      <td>ford</td>
      <td>f-150</td>
      <td>condition_missing</td>
      <td>6</td>
      <td>gas</td>
      <td>85548.0</td>
      <td>clean</td>
      <td>automatic</td>
      <td>drive_missing</td>
      <td>type_missing</td>
      <td>paint_missing</td>
      <td>ma</td>
      <td>42.2600</td>
      <td>-71.800000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>greensboro</td>
      <td>4900</td>
      <td>2013.0</td>
      <td>ford</td>
      <td>f-150</td>
      <td>condition_missing</td>
      <td>4</td>
      <td>gas</td>
      <td>85548.0</td>
      <td>clean</td>
      <td>automatic</td>
      <td>drive_missing</td>
      <td>type_missing</td>
      <td>paint_missing</td>
      <td>nc</td>
      <td>36.0700</td>
      <td>-79.820200</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<section id="funciones">
<h3><strong>Funciones:</strong><a class="headerlink" href="#funciones" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">graficar_cat</span><span class="p">(</span><span class="n">n_cols</span><span class="p">,</span> <span class="n">cat</span><span class="p">,</span> <span class="n">figura_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">titulo_general</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;Set2&#39;</span><span class="p">):</span>
    <span class="c1"># Número de columnas fijas</span>
    <span class="n">cols</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">rows</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">n_cols</span> <span class="o">/</span> <span class="n">cols</span><span class="p">)</span>

    <span class="c1"># Crear figura</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="n">cols</span><span class="o">*</span><span class="mi">6</span><span class="p">,</span> <span class="n">rows</span><span class="o">*</span><span class="mi">4</span><span class="p">))</span>
    <span class="n">axs</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cat</span><span class="p">):</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">n_cat</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">n_cat</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">orden</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">index</span>
            <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">col</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">orden</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">top_10</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
            <span class="n">categorias_ordenadas</span> <span class="o">=</span> <span class="n">top_10</span><span class="o">.</span><span class="n">index</span>
            <span class="n">frecuencias</span> <span class="o">=</span> <span class="n">top_10</span><span class="o">.</span><span class="n">values</span>
            <span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">categorias_ordenadas</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">frecuencias</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">)</span>

        <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1"> (</span><span class="si">{</span><span class="n">n_cat</span><span class="si">}</span><span class="s1"> cat.)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>

    <span class="c1"># Eliminar ejes vacíos</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">axs</span><span class="p">)):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">delaxes</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>

    <span class="c1"># Ajustar el espacio automáticamente</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">(</span><span class="n">rect</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.93</span><span class="p">])</span>  <span class="c1"># deja espacio para el título y el pie</span>

    <span class="c1"># Título general centrado</span>
    <span class="k">if</span> <span class="n">titulo_general</span><span class="p">:</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.96</span><span class="p">,</span> <span class="n">titulo_general</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>

    <span class="c1"># Pie de figura centrado</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Figura </span><span class="si">{</span><span class="n">figura_num</span><span class="si">}</span><span class="s1">. </span><span class="si">{</span><span class="n">titulo_general</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
    

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">agrupar_categorias_rare</span><span class="p">(</span><span class="n">df_imputado</span><span class="p">,</span> <span class="n">columnas</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">nombre_otros</span><span class="o">=</span><span class="s1">&#39;Other&#39;</span><span class="p">):</span>
    <span class="n">df_modificado</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df_modificado</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">freqs</span> <span class="o">=</span> <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">categorias_a_agrupadas</span> <span class="o">=</span> <span class="n">freqs</span><span class="p">[</span><span class="n">freqs</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>

            <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">nombre_otros</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">categorias_a_agrupadas</span> <span class="k">else</span> <span class="n">x</span>
            <span class="p">)</span>

            <span class="c1"># Si la columna es categórica, actualiza las categorías</span>
            <span class="k">if</span> <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;category&#39;</span><span class="p">:</span>
                <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">add_categories</span><span class="p">([</span><span class="n">nombre_otros</span><span class="p">])</span>
                <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">remove_unused_categories</span><span class="p">()</span>
                
    <span class="k">return</span> <span class="n">df_modificado</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">identificar_outliers</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">columns_to_show</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">columna</span> <span class="o">=</span> <span class="n">var</span>

    <span class="c1"># Calcular Q1, Q3 y el IQR</span>
    <span class="n">Q1</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
    <span class="n">Q3</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>
    <span class="n">IQR</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">-</span> <span class="n">Q1</span>

    <span class="c1"># Definir los límites</span>
    <span class="n">limite_inferior</span> <span class="o">=</span> <span class="n">Q1</span> <span class="o">-</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span>
    <span class="n">limite_superior</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span>

    <span class="c1"># Filtrar las filas que son outliers</span>
    <span class="n">outliers</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">limite_inferior</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">limite_superior</span><span class="p">)]</span>

    <span class="c1"># Ordenar de mayor a menor por la variable seleccionada</span>
    <span class="n">outliers_sorted</span> <span class="o">=</span> <span class="n">outliers</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">columna</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># Configuración para mostrar todas las columnas si no se especifica una lista</span>
    <span class="k">if</span> <span class="n">columns_to_show</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s2">&quot;display.max_columns&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s2">&quot;display.width&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">outliers_sorted</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Mostrar solo las columnas especificadas</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">outliers_sorted</span><span class="p">[</span><span class="n">columns_to_show</span><span class="p">])</span>

    <span class="c1"># Cantidad de outliers</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Cantidad de outliers en </span><span class="si">{</span><span class="n">columna</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">outliers_sorted</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Límites IQR: [</span><span class="si">{</span><span class="n">limite_inferior</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">limite_superior</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rango de outliers: [</span><span class="si">{</span><span class="n">outliers_sorted</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">outliers_sorted</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">outliers_sorted</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columna</span><span class="p">):</span>
    <span class="n">conteo</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">porcentaje</span> <span class="o">=</span> <span class="p">(</span><span class="n">conteo</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="n">tabla</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;Conteo&#39;</span><span class="p">:</span> <span class="n">conteo</span><span class="p">,</span>
        <span class="s1">&#39;Porcentaje (%)&#39;</span><span class="p">:</span> <span class="n">porcentaje</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="n">tabla</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">resumen_faltantes</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">faltantes</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">porcentaje</span> <span class="o">=</span> <span class="p">(</span><span class="n">faltantes</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="n">tabla_faltantes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;Valores faltantes&#39;</span><span class="p">:</span> <span class="n">faltantes</span><span class="p">,</span>
        <span class="s1">&#39;Porcentaje (%)&#39;</span><span class="p">:</span> <span class="n">porcentaje</span>
    <span class="p">})</span>

    <span class="c1"># Filtrar solo las columnas que tienen NA</span>
    <span class="n">tabla_faltantes</span> <span class="o">=</span> <span class="n">tabla_faltantes</span><span class="p">[</span><span class="n">tabla_faltantes</span><span class="p">[</span><span class="s1">&#39;Valores faltantes&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
    
    <span class="c1"># Ordenar por porcentaje descendente</span>
    <span class="n">tabla_faltantes</span> <span class="o">=</span> <span class="n">tabla_faltantes</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Porcentaje (%)&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">tabla_faltantes</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">limpiar_outliers_year</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columna</span><span class="o">=</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">minimo</span><span class="o">=</span><span class="mi">1950</span><span class="p">):</span>
    <span class="n">año_actual</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">year</span>
    
    <span class="c1"># Detectar outliers por año fuera de rango</span>
    <span class="n">outliers</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">minimo</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">año_actual</span><span class="p">)]</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; Valores fuera de rango detectados:&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">outliers</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">sort_index</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total de registros fuera de rango: </span><span class="si">{</span><span class="n">outliers</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="c1"># Crear dataset limpio (sin los outliers)</span>
    <span class="n">df_limpio</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">minimo</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">año_actual</span><span class="p">)]</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Dataset limpio: </span><span class="si">{</span><span class="n">df_limpio</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> filas (de </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> originales)&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df_limpio</span><span class="p">,</span> <span class="n">outliers</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="eda-numericas">
<h2><strong>2. EDA Numéricas:</strong><a class="headerlink" href="#eda-numericas" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>price</th>
      <th>year</th>
      <th>cylinders</th>
      <th>odometer</th>
      <th>lat</th>
      <th>long</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>4.268800e+05</td>
      <td>426880.000000</td>
      <td>426880.000000</td>
      <td>4.268800e+05</td>
      <td>426880.000000</td>
      <td>426880.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>7.519903e+04</td>
      <td>2011.240173</td>
      <td>5.924548</td>
      <td>9.791454e+04</td>
      <td>38.471912</td>
      <td>-94.581178</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.218228e+07</td>
      <td>9.439234</td>
      <td>1.591411</td>
      <td>2.127801e+05</td>
      <td>5.816724</td>
      <td>18.317101</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000e+00</td>
      <td>1900.000000</td>
      <td>3.000000</td>
      <td>0.000000e+00</td>
      <td>-84.122245</td>
      <td>-159.827728</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>5.900000e+03</td>
      <td>2008.000000</td>
      <td>4.000000</td>
      <td>3.813000e+04</td>
      <td>34.620000</td>
      <td>-111.919725</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>1.395000e+04</td>
      <td>2013.000000</td>
      <td>6.000000</td>
      <td>8.554800e+04</td>
      <td>39.105472</td>
      <td>-88.138700</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>2.648575e+04</td>
      <td>2017.000000</td>
      <td>8.000000</td>
      <td>1.330000e+05</td>
      <td>42.358190</td>
      <td>-80.740000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>3.736929e+09</td>
      <td>2022.000000</td>
      <td>12.000000</td>
      <td>1.000000e+07</td>
      <td>82.390818</td>
      <td>173.885502</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>El conjunto de datos analizado contiene <strong>426,880</strong> registros con variables relacionadas con vehículos, como el precio, el año de fabricación, el número de cilindros, el kilometraje (odómetro) y las coordenadas geográficas (latitud y longitud).</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">Precio</span></code></strong>
El precio promedio de los vehículos es de aproximadamente <strong><span class="math notranslate nohighlight">\(75.199**, aunque se observa una gran dispersión (desviación estándar ≈ **12.182.280**). Esto indica la presencia de valores extremos, pues mientras que la mayoría de los vehículos oscilan entre **\)</span>5.900 (25%)</strong> y <strong><span class="math notranslate nohighlight">\(26.485 (75%)**, existen precios mínimos en **\)</span>0</strong> y máximos de hasta <strong>$3.736.929.000</strong>, valores atípicos poco realistas que podrían corresponder a errores de registro.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">Año</span> <span class="pre">de</span> <span class="pre">fabricación</span></code></strong>
La media es cercana a <strong>2011</strong>, con valores entre <strong>1900</strong> y <strong>2022</strong>. Aunque el rango inferior sugiere errores de digitación (vehículos con año de 1900), la mayoría de los datos se concentran entre <strong>2008</strong> y <strong>2017</strong>.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">Cilindros</span></code></strong>
El número promedio de cilindros es <strong>6</strong>, lo que corresponde a los motores más comunes en automóviles y camionetas. El rango va de <strong>3 a 12 cilindros</strong>, mostrando la diversidad de tipos de vehículos.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">Odómetro</span> <span class="pre">(kilometraje)</span></code></strong>
El kilometraje medio es de aproximadamente <strong>97.914 km</strong>, aunque también se observa una gran variabilidad (mínimo en <strong>0 km</strong> y máximo de <strong>10.000.000 km</strong>). Esto refuerza la presencia de valores atípicos, posiblemente por registros defectuosos o poco consistentes.</p>
<p><strong><code class="docutils literal notranslate"><span class="pre">Latitud</span></code> y <code class="docutils literal notranslate"><span class="pre">longitud</span></code></strong>
Los valores corresponden a la ubicación de los vehículos dentro de los Estados Unidos (media en <strong>38.47° latitud</strong> y <strong>-94.58° longitud</strong>), aunque algunos registros se salen de este rango, lo que sugiere errores de georreferenciación.</p>
<section id="manipulacion-de-variables-numericas">
<h3><strong>2.1 Manipulación de variables numéricas</strong><a class="headerlink" href="#manipulacion-de-variables-numericas" title="Link to this heading">#</a></h3>
<section id="manipulacion-de-price">
<h4><strong>2.1.1 Manipulación de <code class="docutils literal notranslate"><span class="pre">Price</span></code></strong><a class="headerlink" href="#manipulacion-de-price" title="Link to this heading">#</a></h4>
<p>Tomamos los valores nulos en la variable <strong>price</strong>, los transformamos en NaN y posteriormente eliminamos dichos registros. Esto se realiza de esta manera y no mediante imputación, ya que <strong>price</strong> es la variable objetivo a predecir, por lo cual resulta fundamental mantenerla lo más representativa y real posible.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reemplazar los 0 en la columna &#39;price&#39; por NaN</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="c1">#Eliminar los NaN</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    3.939850e+05
mean     8.147763e+04
std      1.268064e+07
min      1.000000e+00
25%      7.000000e+03
50%      1.500000e+04
75%      2.759000e+04
max      3.736929e+09
Name: price, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>La variable <strong><code class="docutils literal notranslate"><span class="pre">price</span></code></strong>, después de eliminar los registros nulos, cuenta con <strong>393.985 observaciones válidas</strong>. El precio promedio es de aproximadamente <strong><span class="math notranslate nohighlight">\(81.478**, aunque este valor se ve fuertemente influenciado por la presencia de precios extremadamente altos. La mediana es de **\)</span>15.000</strong>, lo que refleja que la mayoría de los vehículos se sitúan en un rango mucho más bajo que el promedio. El 50% de los precios se encuentra entre <strong><span class="math notranslate nohighlight">\(7.000** y **\)</span>27.590</strong>, lo que muestra un rango más realista del mercado. El precio mínimo registrado es de <strong><span class="math notranslate nohighlight">\(1**, mientras que el máximo llega hasta **\)</span>3.736.929.000</strong>, un valor irreal que corresponde claramente a un <strong>outlier</strong>. La desviación estándar es de aproximadamente <strong>12.680.640</strong>, lo cual confirma la gran dispersión de los datos y la influencia de valores atípicos. En conclusión, aunque existen registros con precios extremadamente altos que distorsionan la media, la mediana y los cuartiles sugieren que el mercado real de vehículos en este conjunto de datos se concentra principalmente entre <strong><span class="math notranslate nohighlight">\(7.000 y \)</span>27.590</strong>.</p>
<section id="analisis">
<h5><strong>2.1.1.1. Análisis:</strong><a class="headerlink" href="#analisis" title="Link to this heading">#</a></h5>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>  <span class="c1"># Figura más ancha para dos gráficos horizontales</span>

<span class="c1"># Gráfico 1: Distribución completa con outliers (IZQUIERDA)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># 1 fila, 2 columnas, posición 1</span>
<span class="n">boxplot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">vert</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">patch_artist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución Completa de Precios</span><span class="se">\n</span><span class="s1">(Con Outliers Extremos)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Precio ($)&#39;</span><span class="p">)</span>

<span class="c1"># Identificar y marcar outliers extremos</span>
<span class="n">outliers</span> <span class="o">=</span> <span class="n">boxplot</span><span class="p">[</span><span class="s1">&#39;fliers&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">()</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">outliers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">outlier_500k</span> <span class="o">=</span> <span class="n">outliers</span><span class="p">[</span><span class="n">outliers</span> <span class="o">&gt;</span> <span class="mi">500000</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Outliers por encima de $500,000: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">outlier_500k</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">500000</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> 
                <span class="n">label</span><span class="o">=</span><span class="s1">&#39;$500,000 límite&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="c1"># Gráfico 2: Distribución sin outliers extremos (DERECHA)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># 1 fila, 2 columnas, posición 2</span>
<span class="n">reasonable_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.99</span><span class="p">)]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">reasonable_data</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">vert</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">patch_artist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución de Precios</span><span class="se">\n</span><span class="s1">(Excluyendo Top 1% Outliers)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Precio ($)&#39;</span><span class="p">)</span>

<span class="c1"># Ajustar layout y mostrar</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Outliers por encima de $500,000: 68
</pre></div>
</div>
<img alt="_images/dffa3bbdaa3f1a5bedd9b6445c4c1a50c21cb762b51d96b9083ec9e909250edf.png" src="_images/dffa3bbdaa3f1a5bedd9b6445c4c1a50c21cb762b51d96b9083ec9e909250edf.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear histograma</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de Price (sin outliers)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Precio&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/8a77c7a06aa06cd875a662314e72676b88a39a52bf2817c5a4e0c38db92343d8.png" src="_images/8a77c7a06aa06cd875a662314e72676b88a39a52bf2817c5a4e0c38db92343d8.png" />
</div>
</div>
<p>En el caso de la variable <strong><code class="docutils literal notranslate"><span class="pre">price</span></code></strong>, que constituye la <strong>variable objetivo a predecir</strong>, es fundamental mantener un rango de valores lo más <strong>realista y representativo posible del mercado</strong>. Los registros con precios superiores a <strong>500.000 dólares</strong> no solo corresponden a valores atípicos poco plausibles, sino que además introducen <strong>sesgos importantes en la distribución de la variable dependiente</strong>.</p>
<p>La presencia de estos outliers puede:</p>
<ol class="arabic simple">
<li><p><strong>Distorsionar la media y la desviación estándar</strong>, generando estadísticas descriptivas poco fiables.</p></li>
<li><p><strong>Afectar la visualización de la distribución de precios</strong>, como se observa en el histograma, donde los valores extremos comprimen la escala y ocultan la estructura de los datos reales.</p></li>
<li><p><strong>Perjudicar el desempeño de los modelos predictivos</strong>, ya que podría ajustar sus parámetros  para dar cabida a valores irreales, perdiendo capacidad de generalización frente a precios del mercado real.</p></li>
<li><p><strong>Inducir errores en la interpretación de los resultados</strong>, al hacer parecer que existen vehículos con precios extremadamente elevados, lo cual no corresponde con la realidad del dominio del problema.</p></li>
</ol>
<p>Por estas razones, se opta por <strong>eliminar los registros con <code class="docutils literal notranslate"><span class="pre">price</span> <span class="pre">&gt;</span> <span class="pre">500000</span></code></strong>, garantizando que la variable predictora refleje de manera fidedigna el rango de precios de los vehículos y que los modelos entrenados a partir de ella produzcan predicciones coherentes y útiles.</p>
</section>
<section id="correccion">
<h5><strong>2.1.1.2. Corrección:</strong><a class="headerlink" href="#correccion" title="Link to this heading">#</a></h5>
<p>Iniciamos haciendo una prueba de normalidad con el fin de ver o corroborar que nuestra variable no proviene de una distribución normal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">columna</span> <span class="o">=</span> <span class="s2">&quot;price&quot;</span>

<span class="c1"># Extraemos la columna y quitamos valores NaN</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># Estandarizamos (media=0, std=1) para compararla con la normal estándar</span>
<span class="n">data_std</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span> <span class="o">-</span> <span class="n">data</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span> <span class="o">/</span> <span class="n">data</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">ddof</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Prueba de Kolmogorov-Smirnov contra la normal estándar</span>
<span class="n">stat</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">kstest</span><span class="p">(</span><span class="n">data_std</span><span class="p">,</span> <span class="s1">&#39;norm&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Prueba de Kolmogorov-Smirnov (K-S)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Estadístico:&quot;</span><span class="p">,</span> <span class="n">stat</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;p-valor:&quot;</span><span class="p">,</span> <span class="n">p_value</span><span class="p">)</span>

<span class="k">if</span> <span class="n">p_value</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Se rechaza la hipótesis de normalidad (no es normal).&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No se rechaza la hipótesis de normalidad (compatible con normal).&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Prueba de Kolmogorov-Smirnov (K-S)
Estadístico: 0.49779804749671464
p-valor: 0.0
Se rechaza la hipótesis de normalidad (no es normal).
</pre></div>
</div>
</div>
</div>
<p>Haciendo uso de la función de identificación de outliers —la cual utiliza los cuartiles—, se seleccionaron aquellos registros extremos que afectaban la interpretación de la variable price para, posteriormente, excluirlos del estudio.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">outliers</span> <span class="o">=</span> <span class="n">identificar_outliers</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s1">&#39;price&#39;</span><span class="p">,</span><span class="n">columns_to_show</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;manufacturer&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">,</span><span class="s1">&#39;price&#39;</span><span class="p">,</span><span class="s1">&#39;condition&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>          year   manufacturer  model         price          condition
318592  2007.0         toyota  Other  3.736929e+09          excellent
356716  1999.0         toyota  Other  3.736929e+09               fair
91576   2000.0  mercedes-benz  Other  3.024942e+09  condition_missing
257840  2000.0  mercedes-benz  Other  3.024942e+09  condition_missing
37410   2021.0      chevrolet  f-150  3.009549e+09  condition_missing
...        ...            ...    ...           ...                ...
2267    1933.0           ford  Other  5.850000e+04  condition_missing
347371  2020.0           ford  Other  5.850000e+04           like new
386187  2016.0            bmw  Other  5.850000e+04  condition_missing
229212  2020.0           jeep  Other  5.849900e+04           like new
101650  2019.0           ford  Other  5.849800e+04  condition_missing

[7779 rows x 5 columns]

Cantidad de outliers en price: 7779
Límites IQR: [-23885.00, 58475.00]
Rango de outliers: [58498.00, 3736928711.00]
</pre></div>
</div>
</div>
</div>
<p>Note que, con este método de los cuartiles para la variable precio, logramos encontrar 7779 outliers que, aunque en proporción no son relevantes, al ser muy extremos afectan la forma de nuestra distribución, impidiendo que podamos visualizarla adecuadamente.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">outliers_mayores_200k</span> <span class="o">=</span> <span class="n">outliers</span><span class="p">[</span><span class="n">outliers</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">500000</span><span class="p">]</span>

<span class="c1"># Calcular proporción</span>
<span class="n">proporcion</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">outliers_mayores_200k</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">outliers</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cantidad total de outliers: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">outliers</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cantidad de outliers &gt; 500000: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">outliers_mayores_200k</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Proporción: </span><span class="si">{</span><span class="n">proporcion</span><span class="si">:</span><span class="s2">.2%</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Eliminar las filas con price &gt; 500000</span>
<span class="n">df_sin_out</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">500000</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nuevo tamaño del dataset: </span><span class="si">{</span><span class="n">df_sin_out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> filas&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Cantidad total de outliers: 7779
Cantidad de outliers &gt; 500000: 68
Proporción: 0.87%
Nuevo tamaño del dataset: 393917 filas
</pre></div>
</div>
</div>
</div>
<p>Con el método de cuartiles, se identificaron 7,779 valores atípicos en el precio, de los cuales solo 68 (0.87%) correspondían a valores extremos superiores a $500,000. Tras eliminar estos outliers, el dataset se redujo a 393,917 registros, conservando así más del 98% de los datos originales y obteniendo una distribución de precios más realista y analizable para el estudio.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_sin_out</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    393917.000000
mean      18901.892977
std       15398.143446
min           1.000000
25%        7000.000000
50%       15000.000000
75%       27590.000000
max      470000.000000
Name: price, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Tras la limpieza de outliers, la distribución de precios muestra una media de <span class="math notranslate nohighlight">\(18,902 con una mediana de \)</span>15,000, indicando una asimetría hacia valores más bajos. El 50% de los vehículos se concentra entre <span class="math notranslate nohighlight">\(7,000 y \)</span>27,590, con un rango realista que va desde <span class="math notranslate nohighlight">\(1 hasta \)</span>470,000, lo que refleja una distribución más coherente y analizable para el estudio del mercado de autos usados.</p>
<p>Ahora, es posible analizar de forma explicita la distribución de nuestra variable price. Tambien realizamos pruebas estadisticas con el fin de corroborar que la manipulación realizada no haya cambiado la distribución de nuestros datos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear histograma</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df_sin_out</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de Price (sin outliers)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Precio&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/fd07ded762dcff75ee1c30da1bd8bccffc7da99b89ddbb15a874ea4eafee57d1.png" src="_images/fd07ded762dcff75ee1c30da1bd8bccffc7da99b89ddbb15a874ea4eafee57d1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Quitamos NaN en caso de que aún existan</span>
<span class="n">antes</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="n">despues</span> <span class="o">=</span> <span class="n">df_sin_out</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1"># Kolmogorov–Smirnov (para comparar distribuciones completas)</span>
<span class="n">stat3</span><span class="p">,</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">ks_2samp</span><span class="p">(</span><span class="n">antes</span><span class="p">,</span> <span class="n">despues</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;K-S Test:&quot;</span><span class="p">,</span> <span class="n">stat3</span><span class="p">,</span> <span class="s2">&quot; p-valor:&quot;</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>K-S Test: 0.00017259540337832835  p-valor: 1.0
</pre></div>
</div>
</div>
</div>
<p>Con un nivel de significancia de 0.05 y un p-valor de 1, al ser este mayor que el valor de α, no se rechaza la hipótesis nula. Por lo tanto, se concluye que no existen diferencias estadísticamente significativas en la distribución de price antes y después de la manipulación.</p>
<p>Dado que logramos comprobar que los cambios realizados no afectaron la distribución de los datos, asignamos los cambios a nuestro dataframe original.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">df_sin_out</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="manipulacion-de-odometer">
<h4><strong>2.1.2 Manipulación de <code class="docutils literal notranslate"><span class="pre">odometer</span></code></strong><a class="headerlink" href="#manipulacion-de-odometer" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;odometer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    3.939170e+05
mean     9.861456e+04
std      2.047012e+05
min      0.000000e+00
25%      3.824800e+04
50%      8.640000e+04
75%      1.350000e+05
max      1.000000e+07
Name: odometer, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>La variable <strong><code class="docutils literal notranslate"><span class="pre">odometer</span></code></strong> (kilometraje) cuenta con <strong>393.917 observaciones válidas</strong>. El valor promedio del odómetro es de aproximadamente <strong>98.615 km</strong>, lo que refleja un kilometraje medio esperado en vehículos usados. La mediana es de <strong>86.400 km</strong>, lo que indica que la mayoría de los vehículos se concentran por debajo de los 100.000 km. El 50% de los registros se encuentra entre <strong>38.248 km</strong> y <strong>135.000 km</strong>, un rango que puede considerarse representativo para automóviles en condiciones normales de uso.</p>
<p>El mínimo registrado es de <strong>0 km</strong>, lo que puede corresponder a vehículos nuevos o a registros erróneos, mientras que el máximo alcanza los <strong>10.000.000 km</strong>, un valor inverosímil que constituye un <strong>outlier</strong> y probablemente se deba a un error de registro. La desviación estándar es de aproximadamente <strong>204.701 km</strong>, lo cual evidencia una gran dispersión en los datos, reforzada por la existencia de valores extremos.</p>
<p>En conclusión, aunque los datos centrales muestran un kilometraje coherente con el uso real de vehículos (principalmente entre <strong>38.000 y 135.000 km</strong>), la presencia de registros con valores extremos como <strong>0 km</strong> y <strong>10.000.000 km</strong> sugiere la existencia de <strong>outliers</strong> que podrían distorsionar el análisis si no se tratan adecuadamente.</p>
<section id="id1">
<h5><strong>2.1.2.1. Análisis:</strong><a class="headerlink" href="#id1" title="Link to this heading">#</a></h5>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Estandarizamos (media=0, std=1) para compararla con la normal estándar</span>
<span class="n">data_std</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;odometer&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;odometer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span> <span class="o">/</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;odometer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">ddof</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Prueba de Kolmogorov-Smirnov contra la normal estándar</span>
<span class="n">stat</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">kstest</span><span class="p">(</span><span class="n">data_std</span><span class="p">,</span> <span class="s1">&#39;norm&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Prueba de Kolmogorov-Smirnov (K-S)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Estadístico:&quot;</span><span class="p">,</span> <span class="n">stat</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;p-valor:&quot;</span><span class="p">,</span> <span class="n">p_value</span><span class="p">)</span>

<span class="k">if</span> <span class="n">p_value</span> <span class="o">&lt;</span> <span class="mf">0.05</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Se rechaza la hipótesis de normalidad (no es normal).&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No se rechaza la hipótesis de normalidad (compatible con normal).&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Prueba de Kolmogorov-Smirnov (K-S)
Estadístico: 0.3149922134042815
p-valor: 0.0
Se rechaza la hipótesis de normalidad (no es normal).
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;odometer&quot;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Odometer (km)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de odometer&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Máximo reportado:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;odometer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/676bdc18eeeab19db0a72131ae3bad5a0dbe2eb8feb28557de53181fed016ad7.png" src="_images/676bdc18eeeab19db0a72131ae3bad5a0dbe2eb8feb28557de53181fed016ad7.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Máximo reportado: 10000000.0
</pre></div>
</div>
</div>
</div>
<p>El histograma muestra una distribución altamente sesgada a la derecha, donde la gran mayoría de los vehículos tiene kilometrajes bajos (concentrados entre 0-200,000 km), mientras que existe una cantidad mínima de registros con valores extremadamente altos (hasta 10,000,000 km). Este patrón sugiere la presencia de outliers absurdos que distorsionan la escala, probablemente debido a errores de registro donde se ingresaron valores erróneos. La concentración principal en valores bajos refleja el comportamiento esperado del mercado de autos usados, donde la mayoría de los vehículos tienen kilometrajes realistas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">boxplot</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;odometer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">vert</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">patch_artist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución Completa de Kilometrajes (Con Outliers Extremos)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Kilometraje (Km)&#39;</span><span class="p">)</span>


<span class="n">outliers</span> <span class="o">=</span> <span class="n">boxplot</span><span class="p">[</span><span class="s1">&#39;fliers&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">()</span>
<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">outliers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">outlier_600k</span> <span class="o">=</span> <span class="n">outliers</span><span class="p">[</span><span class="n">outliers</span> <span class="o">&gt;</span> <span class="mi">600000</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Outliers por encima de 600,000 km: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">outlier_600k</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">600000</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> 
                <span class="n">label</span><span class="o">=</span><span class="s1">&#39;600,000 km límite&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">reasonable_data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;odometer&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;odometer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.99</span><span class="p">)]</span>
<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">reasonable_data</span><span class="p">[</span><span class="s1">&#39;odometer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">vert</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">patch_artist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución del kilometraje (Excluyendo Top 1% Outliers)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;kilometraje (km)&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Outliers por encima de 600,000 km: 1101
</pre></div>
</div>
<img alt="_images/2e28e97c5b5d845173bbc53e155d5607efcc90845a61ac450617ce6c34fcca54.png" src="_images/2e28e97c5b5d845173bbc53e155d5607efcc90845a61ac450617ce6c34fcca54.png" />
</div>
</div>
<p>El gráfico muestra dos distribuciones contrastantes. En la parte superior, con outliers incluidos, se observan valores absurdamente altos (hasta ~250,000 km en el boxplot pero con datos hasta 10,000,000 km en el histograma anterior), confirmando la presencia de errores extremos en el registro de kilometraje. La línea roja en 600,000 km marca un límite razonable para valores plausibles.</p>
<p>En la parte inferior, al excluir el top 1% de outliers, emerge la distribución real: la mayoría de los vehículos tiene entre ~50,000 km y ~150,000 km, con una mediana alrededor de ~100,000 km. Este patrón refleja el comportamiento esperado del mercado de autos usados, donde el kilometraje se concentra en rangos creíbles y analizables, permitiendo estudiar adecuadamente la relación entre kilometraje y precio.</p>
</section>
<section id="id2">
<h5><strong>2.1.2.2. Corrección:</strong><a class="headerlink" href="#id2" title="Link to this heading">#</a></h5>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">outliers_odometer</span><span class="o">=</span><span class="n">identificar_outliers</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s1">&#39;odometer&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>                    region    price    year manufacturer  model  \
108797  sarasota-bradenton    450.0  2000.0         ford  f-150   
109840  sarasota-bradenton    450.0  2000.0         ford  f-150   
110253  sarasota-bradenton    450.0  2000.0         ford  f-150   
23100          bakersfield  15000.0  1957.0    chevrolet  Other   
320410     medford-ashland      1.0  1950.0        dodge  Other   
...                    ...      ...     ...          ...    ...   
175314   central louisiana  24995.0  2011.0          gmc  Other   
389570     charlottesville   1700.0  2003.0      hyundai  Other   
5847    anchorage / mat-su   1000.0  2002.0         ford  Other   
156694          des moines   8999.0  2012.0    chevrolet  Other   
230574           asheville   6500.0  2006.0    chevrolet  Other   

                condition  cylinders    fuel    odometer title_status  \
108797  condition_missing          6     gas  10000000.0        clean   
109840  condition_missing          6     gas  10000000.0        clean   
110253  condition_missing          6     gas  10000000.0        clean   
23100   condition_missing          6     gas  10000000.0      rebuilt   
320410               fair          4     gas  10000000.0        clean   
...                   ...        ...     ...         ...          ...   
175314  condition_missing          8  diesel    280319.0        clean   
389570               good          4     gas    280300.0        clean   
5847                 fair          6     gas    280222.0        clean   
156694  condition_missing          8     gas    280200.0        clean   
230574               good          8  diesel    280136.0        clean   

       transmission          drive          type    paint_color  state  \
108797    automatic  drive_missing  type_missing  paint_missing     fl   
109840    automatic  drive_missing  type_missing  paint_missing     fl   
110253    automatic  drive_missing  type_missing  paint_missing     fl   
23100     automatic  drive_missing  type_missing  paint_missing     ca   
320410       manual  drive_missing  type_missing  paint_missing     or   
...             ...            ...           ...            ...    ...   
175314    automatic            4wd        pickup          black  Other   
389570    automatic            fwd         sedan            red     va   
5847      automatic            fwd      mini-van          Other  Other   
156694    automatic            4wd  type_missing          white     ia   
230574    automatic            rwd           van         silver     nc   

              lat        long  
108797  27.368800  -82.526800  
109840  27.368800  -82.526800  
110253  27.368800  -82.526800  
23100   33.887900 -118.351000  
320410  42.452760 -123.370877  
...           ...         ...  
175314  30.123700  -95.268600  
389570  37.804900  -78.474000  
5847    61.165241 -149.894603  
156694  41.713593  -93.057861  
230574  35.637400  -82.564600  

[3916 rows x 17 columns]

Cantidad de outliers en odometer: 3916
Límites IQR: [-106880.00, 280128.00]
Rango de outliers: [280136.00, 10000000.00]
</pre></div>
</div>
</div>
</div>
<p>Se utilizó la función de identificación de outliers para aplicar el mismo proceso de detección y eliminación sobre la variable odometer, tomando como referencia el rango previamente planteado. De esta forma, se filtraron los valores extremos que distorsionaban la distribución del kilometraje y se garantizó que los datos restantes reflejaran de manera más representativa el comportamiento real de los vehículos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">outliers_mayores_200k</span> <span class="o">=</span> <span class="n">outliers_odometer</span><span class="p">[</span><span class="n">outliers_odometer</span><span class="p">[</span><span class="s1">&#39;odometer&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">00000</span><span class="p">]</span>

<span class="c1"># Calcular proporción</span>
<span class="n">proporcion</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">outliers_mayores_200k</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">outliers_odometer</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cantidad total de outliers: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">outliers_odometer</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cantidad de outliers &gt; 600000: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">outliers_mayores_200k</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Proporción: </span><span class="si">{</span><span class="n">proporcion</span><span class="si">:</span><span class="s2">.2%</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">df_sin_out</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;odometer&#39;</span><span class="p">]</span><span class="o">&lt;=</span><span class="mi">600000</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nuevo tamaño del dataset: </span><span class="si">{</span><span class="n">df_sin_out</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> filas&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Cantidad total de outliers: 3916
Cantidad de outliers &gt; 600000: 3916
Proporción: 100.00%
Nuevo tamaño del dataset: 392816 filas
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df_sin_out</span><span class="p">[</span><span class="s2">&quot;odometer&quot;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Odometer (km)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de odometer&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Máximo reportado:&quot;</span><span class="p">,</span> <span class="n">df_sin_out</span><span class="p">[</span><span class="s2">&quot;odometer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/aa88b5c6c86d89c5937107599b6ec9f33ecbc277396d7ac709967fced048f636.png" src="_images/aa88b5c6c86d89c5937107599b6ec9f33ecbc277396d7ac709967fced048f636.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Máximo reportado: 600000.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Kolmogorov–Smirnov (para comparar distribuciones completas)</span>
<span class="n">stat3</span><span class="p">,</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">ks_2samp</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;odometer&quot;</span><span class="p">],</span> <span class="n">df_sin_out</span><span class="p">[</span><span class="s2">&quot;odometer&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;K-S Test:&quot;</span><span class="p">,</span> <span class="n">stat3</span><span class="p">,</span> <span class="s2">&quot; p-valor:&quot;</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>K-S Test: 0.0027950050391326586  p-valor: 0.09238296175040916
</pre></div>
</div>
</div>
</div>
<p>con p-valor &gt; 0.05 se rechaza la hipotesis nula y se concluye que no hay diferencias estadisticamente significativas entre las distribuciones antes y despues de la manipulación.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df_sin_out</span>
</pre></div>
</div>
</div>
</div>
<p>Dado que logramos comprobar que los cambios realizados no afectaron la distribución de los datos, asignamos los cambios a nuestro dataframe original.</p>
</section>
</section>
</section>
<section id="analisis-outliers-numericas">
<h3><strong>2.2 Análisis outliers numéricas:</strong><a class="headerlink" href="#analisis-outliers-numericas" title="Link to this heading">#</a></h3>
<section id="odometer">
<h4><strong>2.2.1. <code class="docutils literal notranslate"><span class="pre">Odometer</span></code>:</strong><a class="headerlink" href="#odometer" title="Link to this heading">#</a></h4>
<p>Al aplicar la función de identificación de outliers sobre la variable <code class="docutils literal notranslate"><span class="pre">odometer</span></code>, se eliminaron los valores extremos que no representaban el comportamiento típico del kilometraje de los vehículos.<br />
Estos registros atípicos podían distorsionar la distribución y generar conclusiones poco fiables.</p>
<p>Tras la depuración, los datos restantes ofrecen una representación más clara y realista del uso habitual de los vehículos, lo que mejora la calidad del análisis estadístico y permite realizar comparaciones más precisas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;odometer&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de odometer&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;odometer (Km)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/e00bdf476c0e6381747ab6c49cfdbf2ef1cc5ced02d290ae71f47c8ec37b17f5.png" src="_images/e00bdf476c0e6381747ab6c49cfdbf2ef1cc5ced02d290ae71f47c8ec37b17f5.png" />
</div>
</div>
<p>La distribución del odómetro muestra una concentración masiva de vehículos en rangos bajos y moderados (0-200,000 km), con una larga cola hacia valores extremos que alcanzan hasta 600,000 km, lo que indica la presencia de outliers probablemente erróneos que distorsionan la visualización y requieren filtrarse para un análisis representativo del mercado real de autos usados.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">outliers_odometer</span><span class="o">=</span><span class="n">identificar_outliers</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s1">&#39;odometer&#39;</span><span class="p">,</span><span class="n">columns_to_show</span><span class="o">=</span> <span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;model&#39;</span><span class="p">,</span><span class="s1">&#39;odometer&#39;</span><span class="p">,</span><span class="s1">&#39;price&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>          year  model  odometer    price
407566  1991.0  Other  600000.0      1.0
11423   2005.0  Other  600000.0  40000.0
100909  2011.0  Other  600000.0  13000.0
378358  2013.0  Other  600000.0  16500.0
372388  2012.0  Other  600000.0  14900.0
...        ...    ...       ...      ...
45975   1999.0  Other  279746.0   3000.0
51907   1999.0  Other  279746.0   3000.0
202331  2011.0  Other  279715.0  23994.0
396324  2012.0  Other  279700.0   5500.0
380660  2010.0  Other  279681.0  20999.0

[2922 rows x 4 columns]

Cantidad de outliers en odometer: 2922
Límites IQR: [-106861.38, 279603.62]
Rango de outliers: [279681.00, 600000.00]
</pre></div>
</div>
</div>
</div>
<p>El análisis identificó 2,922 outliers de odómetro y se revelaron dos tipos distintos de outliers: vehículos con alto kilometraje realista (279,681-400,000 km) que podrían corresponder a unidades de trabajo legítimas, y valores que podrian ser resultado de una mala tabulación como los múltiples registros con exactamente 600,000 km acompañados de precios poco realistas ($1), que deben eliminarse completamente del dataset para no distorsionar los análisis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">odometer</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;odometer&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

<span class="c1">#Tratamiento por IQR </span>
<span class="n">Q1</span> <span class="o">=</span> <span class="n">odometer</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
<span class="n">Q3</span> <span class="o">=</span> <span class="n">odometer</span><span class="o">.</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.75</span><span class="p">)</span>
<span class="n">IQR</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">-</span> <span class="n">Q1</span>
<span class="n">limite_inf</span> <span class="o">=</span> <span class="n">Q1</span> <span class="o">-</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span>
<span class="n">limite_sup</span> <span class="o">=</span> <span class="n">Q3</span> <span class="o">+</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IQR</span>

<span class="c1"># Filtrar todo el DataFrame eliminando outliers</span>
<span class="n">df_filtrado</span> <span class="o">=</span> <span class="n">df</span><span class="p">[(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;odometer&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">limite_inf</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;odometer&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">limite_sup</span><span class="p">)]</span>

<span class="c1"># --- Boxplots comparativos ---</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">odometer</span><span class="p">,</span> <span class="n">vert</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">patch_artist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Odometer - Original&quot;</span><span class="p">)</span>

<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">df_filtrado</span><span class="p">[</span><span class="s1">&#39;odometer&#39;</span><span class="p">],</span> <span class="n">vert</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">patch_artist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Odometer - Después de IQR&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Tratamiento de Outliers en Odometer (Eliminación)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/796af47c5215771fbad1a14f06604b5f089b77f9bb511c42cccd3701399d1b3e.png" src="_images/796af47c5215771fbad1a14f06604b5f089b77f9bb511c42cccd3701399d1b3e.png" />
</div>
</div>
<p>Al aplicar la función de identificación de outliers sobre la variable <em>odometer</em>, se eliminaron los valores extremos que distorsionaban la distribución del kilometraje.</p>
<p>Esto permitió que los datos conservaran únicamente observaciones más representativas del comportamiento real de los vehículos.</p>
<p>En consecuencia, el análisis posterior se basará en un conjunto de datos más limpio y confiable, reduciendo el sesgo que podrían generar registros atípicos poco frecuentes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df_filtrado</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="ano">
<h4><strong>2.2.2. <code class="docutils literal notranslate"><span class="pre">Año</span></code>:</strong><a class="headerlink" href="#ano" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    389894.000000
mean       2011.114739
std           9.504920
min        1900.000000
25%        2008.000000
50%        2013.000000
75%        2017.000000
max        2022.000000
Name: year, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de year&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/357597f186105447a7f630ebb2b6848221550a10e6ae16aba5d9605793e646cf.png" src="_images/357597f186105447a7f630ebb2b6848221550a10e6ae16aba5d9605793e646cf.png" />
</div>
</div>
<p>La distribución del año de fabricación muestra una concentración masiva de vehículos entre 2000 y 2020, con muy pocos registros anteriores a 1980, lo que refleja el comportamiento esperado del mercado de autos usados donde predominan vehículos recientes. Sin embargo, la presencia de registros en 1900 resulta estadísticamente improbable y sugiere errores de digitación o valores por defecto, ya que sería excepcional encontrar vehículos con más de 120 años en el mercado convencional.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;year&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de Year&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/251c735a2f4212d8d59892404ff06dfd417cf2460b6ef3d44a6f2c7c9fb2aad8.png" src="_images/251c735a2f4212d8d59892404ff06dfd417cf2460b6ef3d44a6f2c7c9fb2aad8.png" />
</div>
</div>
<p>La distribución muestra vehículos desde 1900 hasta 2020, pero presenta una concentración masiva en años recientes (2000-2020), con una cola larga hacia años más antiguos. La presencia de vehículos de 1900-1940 es sospechosa y probablemente corresponde a errores de registro o valores por defecto, ya que es extremadamente raro encontrar vehículos tan antiguos en el mercado convencional de autos usados. El pico en años recientes refleja el comportamiento esperado del mercado, donde la mayoría de los vehículos disponibles tienen menos de 20 años.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">outliers_year</span><span class="o">=</span><span class="n">identificar_outliers</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="n">columns_to_show</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">,</span><span class="s1">&#39;manufacturer&#39;</span><span class="p">,</span><span class="s1">&#39;model&#39;</span><span class="p">,</span><span class="s1">&#39;condition&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>          year manufacturer  model          condition
363495  1994.0     cadillac  Other               good
153547  1994.0    chevrolet  Other  condition_missing
80254   1994.0         jeep  Other  condition_missing
401279  1994.0        honda  Other               fair
153072  1994.0    chevrolet  Other          excellent
...        ...          ...    ...                ...
95914   1900.0         ford  Other  condition_missing
154138  1900.0         ford  Other  condition_missing
44754   1900.0         ford  Other               good
269472  1900.0         ford  Other  condition_missing
123023  1900.0         ford  Other          excellent

[14994 rows x 4 columns]

Cantidad de outliers en year: 14994
Límites IQR: [1994.50, 2030.50]
Rango de outliers: [1900.00, 1994.00]
</pre></div>
</div>
</div>
</div>
<p>Los outliers de año revelan dos problemas distintos: errores, como registros de 1900 con modelos inexistentes, que deben eliminarse completamente, y vehículos legítimos pero antiguos (1994 o anteriores) que, aunque válidos, son atípicos en el mercado actual y podrían distorsionar los modelos predictivos. Por lo tanto, en este caso, hemos decidido filtrar el año tomando registros dentro de un rango más realista.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_limpio</span><span class="p">,</span> <span class="n">outliers_year</span> <span class="o">=</span> <span class="n">limpiar_outliers_year</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columna</span><span class="o">=</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">minimo</span><span class="o">=</span><span class="mi">1950</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> Valores fuera de rango detectados:
1900.0    11
1901.0     3
1905.0     1
1910.0     2
1913.0     1
1915.0     1
1916.0     2
1918.0     1
1920.0     2
1921.0     2
1922.0     2
1923.0    36
1924.0     9
1925.0     8
1926.0    16
1927.0    34
1928.0    35
1929.0    52
1930.0    67
1931.0    56
1932.0    53
1933.0    24
1934.0    42
1935.0    23
1936.0    41
1937.0    69
1938.0    36
1939.0    44
1940.0    77
1941.0    63
1942.0    13
1943.0     1
1944.0     3
1945.0     1
1946.0    56
1947.0    62
1948.0    94
1949.0    74
Name: year, dtype: int64
Total de registros fuera de rango: 1117

Dataset limpio: 388777 filas (de 389894 originales)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># --- Boxplots comparativos ---</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">vert</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">patch_artist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;year - Original&quot;</span><span class="p">)</span>

<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">df_limpio</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="n">vert</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">patch_artist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">axes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;year - Después de filtrar&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s2">&quot;Tratamiento de Outliers en year (Eliminación)&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/380e7b88725ad822952460106f899527d7df41a3e61793599900148d0480b209.png" src="_images/380e7b88725ad822952460106f899527d7df41a3e61793599900148d0480b209.png" />
</div>
</div>
<p>En el panel izquierdo (original), se podemos observar muchos valores atípicos hacia años muy antiguos (incluso cercanos a 1900), que distorsionan la representación y hacen menos clara la concentración de datos. En el panel derecho (después de filtrar), estos valores extremos han sido eliminados, lo que genera una distribución más compacta y representativa: la mayoría de los registros se concentran entre 2000 y 2020, con una mediana alrededor de 2010-2012. Esto permite un análisis más preciso al centrarse en los vehículos modernos y reducir el efecto de observaciones poco frecuentes o inconsistentes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">antes</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span>
<span class="n">despues</span> <span class="o">=</span> <span class="n">df_limpio</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">]</span>


<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">antes</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Antes&quot;</span><span class="p">)</span>
<span class="n">despues</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Después&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Año&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de Años antes vs después de limpieza&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>


<span class="n">stat</span><span class="p">,</span> <span class="n">p_value</span> <span class="o">=</span> <span class="n">ks_2samp</span><span class="p">(</span><span class="n">antes</span><span class="p">,</span> <span class="n">despues</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Kolmogorov-Smirnov test&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Estadístico:&quot;</span><span class="p">,</span> <span class="n">stat</span><span class="p">,</span> <span class="s2">&quot;  p-valor:&quot;</span><span class="p">,</span> <span class="n">p_value</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/7a50acb74e2ad8ac2e324410cac5c3ed4823ce058ce1a4f99437aa0e54693e7b.png" src="_images/7a50acb74e2ad8ac2e324410cac5c3ed4823ce058ce1a4f99437aa0e54693e7b.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Kolmogorov-Smirnov test
Estadístico: 0.0028648812241275834   p-valor: 0.08173203191704215
</pre></div>
</div>
</div>
</div>
<p>Se observa que antes de la limpieza (en azul) existían registros dispersos en años muy antiguos, incluso desde 1900, lo que generaba valores poco frecuentes y posiblemente erróneos. Después de la limpieza (en naranja), estos valores atípicos fueron eliminados y la distribución se concentra de forma clara a partir del año 2000, con un fuerte pico entre 2010 y 2020, que es donde se encuentran la mayoría de los vehículos. Esto evidencia que la limpieza permitió depurar datos poco representativos y resaltar la verdadera tendencia: la base de datos está compuesta principalmente por vehículos modernos de las últimas dos décadas.</p>
<p>Con un nivel de significancia de 0.05 y un p-valor de 0.0817, no se rechaza la hipótesis nula, por lo que no hay evidencia estadísticamente significativa para afirmar que existen diferencias entre las distribuciones antes y después del tratamiento.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df_limpio</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="lat-long">
<h4><strong>2.2.3. <code class="docutils literal notranslate"><span class="pre">lat</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">long</span></code>:</strong><a class="headerlink" href="#lat-long" title="Link to this heading">#</a></h4>
<p>Dado que la latitud (<code class="docutils literal notranslate"><span class="pre">lat</span></code>) y la longitud (<code class="docutils literal notranslate"><span class="pre">long</span></code>) son variables georreferenciadas, no pueden imputarse de la misma forma que las demás variables; por lo tanto, en este caso recurrimos a hacerlo en función de la región.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calcular la mediana de lat y long por region</span>
<span class="n">region_coords</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;region&quot;</span><span class="p">)[[</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="s2">&quot;long&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>

<span class="c1"># Función para corregir coordenadas incoherentes</span>
<span class="k">def</span><span class="w"> </span><span class="nf">corregir_coordenadas</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="c1"># Si las coordenadas están fuera del rango de EEUU, reemplazar</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">25</span> <span class="o">&lt;=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">49</span> <span class="ow">and</span> <span class="o">-</span><span class="mi">125</span> <span class="o">&lt;=</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;long&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mi">67</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">region_coords</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;region&quot;</span><span class="p">]])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">({</span><span class="s2">&quot;lat&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">],</span> <span class="s2">&quot;long&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;long&quot;</span><span class="p">]})</span>

<span class="c1"># Aplicar corrección</span>
<span class="n">df</span><span class="p">[[</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="s2">&quot;long&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">corregir_coordenadas</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>c:\Users\Janus\miniconda3\envs\ml_venv\lib\site-packages\pandas\core\frame.py:3641: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  self[k1] = value[k2]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Scatter plot simple de lat y long</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;long&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Longitud&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Latitud&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de coordenadas geográficas&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/9474dc174604e64ecf72242d8bb1ff6c55515b213b525d843b5ff9e46216ad66.png" src="_images/9474dc174604e64ecf72242d8bb1ff6c55515b213b525d843b5ff9e46216ad66.png" />
</div>
</div>
<p>Se observa que la gran mayoría de los puntos se concentran dentro del territorio continental de Estados Unidos, lo que indica que los datos están georreferenciados principalmente en esa región. También aparecen algunos puntos aislados fuera del área principal, hacia el oeste (alrededor de Alaska y posiblemente Hawái), los cuales podrían considerarse valores esperados si incluyen esos territorios. En conjunto, la visualización confirma que la base de datos refleja ubicaciones reales y mayoritariamente coherentes dentro de EE. UU.</p>
</section>
</section>
<section id="analisis-variables-numericas">
<h3><strong>2.3. Análisis variables numéricas:</strong><a class="headerlink" href="#analisis-variables-numericas" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">col_num</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;cylinders&#39;</span><span class="p">,</span> <span class="s1">&#39;odometer&#39;</span><span class="p">]</span>

<span class="n">df</span><span class="p">[</span><span class="n">col_num</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>price</th>
      <th>year</th>
      <th>cylinders</th>
      <th>odometer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>388777.000000</td>
      <td>388777.000000</td>
      <td>388777.000000</td>
      <td>388777.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>18957.696983</td>
      <td>2011.328692</td>
      <td>5.913562</td>
      <td>90793.299326</td>
    </tr>
    <tr>
      <th>std</th>
      <td>15368.687664</td>
      <td>8.625278</td>
      <td>1.587319</td>
      <td>60728.202336</td>
    </tr>
    <tr>
      <th>min</th>
      <td>1.000000</td>
      <td>1950.000000</td>
      <td>3.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>7295.000000</td>
      <td>2008.000000</td>
      <td>4.000000</td>
      <td>38000.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>15495.000000</td>
      <td>2013.000000</td>
      <td>6.000000</td>
      <td>85548.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>27831.000000</td>
      <td>2017.000000</td>
      <td>8.000000</td>
      <td>133413.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>470000.000000</td>
      <td>2022.000000</td>
      <td>12.000000</td>
      <td>279570.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong>Price (precio):</strong> El promedio es de 18,958 USD, la mediana es 15,495 USD, con un 50% de autos entre 7,295 y 27,831 USD. Adicionalmente, existen valores extremos de hasta 470,000 USD.</p>
<p><strong>Year (año):</strong> La media es de 2011.32, el mínimo es 1950 y la mayoría de los autos se concentran entre 2008 y 2017.</p>
<p><strong>Cylinders (cilindros):</strong> El promedio es de casi 6 cilindros, con una distribución centrada en valores comunes de 4, 6 y 8 cilindros, que son los más representativos en automóviles y camionetas. El mínimo es 3 y el máximo 12, coherente con motores pequeños y grandes.</p>
<p><strong>Odometer (kilometraje):</strong> El kilometraje medio es ~90,793 millas, con un rango intercuartílico entre 38,000 y 133,413 millas, lo que refleja la distribución típica de autos usados. Aún se mantienen registros extremos (0 y más de 270,000 millas), pero representan casos poco frecuentes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;price&quot;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;price&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de price&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a7083fb4f158854cb2f80d29e1e77050aa89a90870e760f7d2efaae1e26e4d25.png" src="_images/a7083fb4f158854cb2f80d29e1e77050aa89a90870e760f7d2efaae1e26e4d25.png" />
</div>
</div>
<p>Se observa que la distribución está fuertemente sesgada a la derecha. La gran mayoría de los vehículos se concentran en precios bajos, principalmente por debajo de 50,000 USD, con un pico muy marcado en el rango de 0 a 20,000 USD, lo cual coincide con autos usados más comunes en el mercado. A medida que el precio aumenta, la frecuencia disminuye rápidamente, pero aún existen algunos valores extremos muy altos (superiores a 100,000 USD e incluso cercanos a 400,000–470,000 USD) que actúan como outliers y distorsionan la escala del gráfico. Esto indica que, aunque la mayoría de los datos corresponden a precios razonables, los valores atípicos influyen en la forma de la distribución.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;year&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de year&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/e30ab9e18d6b85caba190a8a23f498e3ef56baa6d1796f153db30a6642048b30.png" src="_images/e30ab9e18d6b85caba190a8a23f498e3ef56baa6d1796f153db30a6642048b30.png" />
</div>
</div>
<p>Se observa que la mayor concentración de vehículos corresponde a modelos fabricados entre el año 2000 y 2022, con un notable incremento en la frecuencia a partir del 2010. Los años anteriores a 1990 aparecen con frecuencias muy bajas, lo que indica que son casos aislados de autos antiguos, mientras que los modelos más recientes dominan claramente el conjunto de datos. Esto refleja que el mercado analizado está compuesto principalmente por vehículos relativamente nuevos, lo que resulta consistente con la dinámica de compraventa actual.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">conteo</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;cylinders&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

<span class="c1"># Gráfico de barras</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">conteo</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;skyblue&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de cylinders&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;cylinders&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/8f522a20f2a8d3fd8a3bac259284e94f75ed8ebdba2f8ceeea3014e0031aa001.png" src="_images/8f522a20f2a8d3fd8a3bac259284e94f75ed8ebdba2f8ceeea3014e0031aa001.png" />
</div>
</div>
<p>Se observa que la mayoría de los autos tienen 6 cilindros, seguidos por los de 4 cilindros y luego los de 8 cilindros, lo cual coincide con los motores más comunes en el mercado (vehículos estándar, compactos y camionetas/SUV). Los vehículos con configuraciones menos comunes, como 3, 5, 10 o 12 cilindros, aparecen con una frecuencia muy baja, representando casos aislados.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;odometer&quot;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;odometer&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de odometer&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/6201c6e89a1ac3a6512a73f2461f8370d2ccd8618209d312179f03a19f644c1f.png" src="_images/6201c6e89a1ac3a6512a73f2461f8370d2ccd8618209d312179f03a19f644c1f.png" />
</div>
</div>
<p>muestra que la mayoría de los vehículos tienen un kilometraje relativamente bajo a moderado (entre 0 y 100,000), con un pico muy alto en valores cercanos a 0 que puede corresponder tanto a autos nuevos como a registros anómalos. A medida que aumenta el kilometraje, la frecuencia de vehículos disminuye de forma gradual, aunque aún se observan algunos con recorridos muy elevados (más de 200,000), lo que refleja que son casos menos comunes. En general, la distribución es asimétrica hacia la derecha, concentrada en valores bajos y con una larga cola hacia los kilometrajes más altos, lo cual es coherente con un mercado de autos donde predominan los vehículos poco usados frente a los de alto desgaste.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">axs</span> <span class="o">=</span> <span class="n">axs</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

<span class="c1"># Boxplots horizontales</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">col_num</span><span class="p">):</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Diagrama de caja: </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/e4b8aadd8d0493c47c37054451462849d972026bd7b22c26d56819a5c7816203.png" src="_images/e4b8aadd8d0493c47c37054451462849d972026bd7b22c26d56819a5c7816203.png" />
</div>
</div>
<p>Los diagramas de caja muestran la presencia de valores atípicos en todas las variables, aunque con diferente intensidad. En price, la mayoría de los autos se concentran en precios bajos, pero existe una gran cantidad de outliers hacia valores muy altos, lo que indica distorsión por autos de lujo o registros anómalos. En year, la mayoría de los vehículos son relativamente modernos (posteriores a 2000), mientras que los autos antiguos aparecen como outliers. En cylinders, la mayor parte se concentra entre 4, 6 y 8 cilindros, aunque hay valores extremos menos frecuentes como 3, 10 o 12. Finalmente, en odometer, se observa que la mayoría de los vehículos tienen un kilometraje medio (cerca de 100,000), pero hay algunos outliers con recorridos muy elevados.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col_num</span><span class="p">]</span><span class="o">.</span><span class="n">corr</span><span class="p">(),</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Matriz de correlación entre variables numéricas&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f7ba66de494db0631d8a34a90bbd25a4f8a00478d5ab85ad51e6955349a2150b.png" src="_images/f7ba66de494db0631d8a34a90bbd25a4f8a00478d5ab85ad51e6955349a2150b.png" />
</div>
</div>
<p>La matriz de correlación revela que el precio tiene una relación moderadamente fuerte con el kilometraje (correlación de -0.49), indicando que los vehículos con mayor kilometraje tienden a tener precios más bajos, y una relación positiva con el año (0.36) y los cilindros (0.34), mostrando que los autos más nuevos y con más cilindros suelen ser más costosos. Además, se observa una correlación negativa coherente entre el año y el kilometraje (-0.36), donde los vehículos más nuevos generalmente tienen menos kilometraje, mientras que las demás relaciones son débiles o irrelevantes, confirmando que no existe multicolinealidad significativa entre las variables predictoras.</p>
</section>
</section>
<section id="eda-categoricas">
<h2><strong>3.EDA categóricas:</strong><a class="headerlink" href="#eda-categoricas" title="Link to this heading">#</a></h2>
<p>Para iniciar este análisis de las variables categoricas iniciamos creando nuestra variable respuesta <code class="docutils literal notranslate"><span class="pre">high_demand</span></code> la cual usaremos para modelar.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;high_demand&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">())</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\Janus\AppData\Local\Temp/ipykernel_12720/2540990982.py:1: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  df[&#39;high_demand&#39;] = (df[&#39;price&#39;] &gt; df[&#39;price&#39;].median()).astype(int)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cat_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;manufacturer&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">,</span> <span class="s1">&#39;condition&#39;</span><span class="p">,</span> <span class="s1">&#39;fuel&#39;</span><span class="p">,</span> <span class="s1">&#39;title_status&#39;</span><span class="p">,</span><span class="s1">&#39;transmission&#39;</span><span class="p">,</span> <span class="s1">&#39;drive&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;paint_color&#39;</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="s1">&#39;high_demand&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear lista con la info resumen de las variables categóricas</span>
<span class="n">summary</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">cat_cols</span><span class="p">:</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="n">n_missing</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">n_unique</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">top</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">idxmax</span><span class="p">()</span>
    <span class="n">freq</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="n">top_pct</span> <span class="o">=</span> <span class="p">(</span><span class="n">freq</span> <span class="o">/</span> <span class="n">total</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="n">summary</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s1">&#39;Variable&#39;</span><span class="p">:</span> <span class="n">col</span><span class="p">,</span>
        <span class="s1">&#39;Categorías únicas&#39;</span><span class="p">:</span> <span class="n">n_unique</span><span class="p">,</span>
        <span class="s1">&#39;Valor más frecuente&#39;</span><span class="p">:</span> <span class="n">top</span><span class="p">,</span>
        <span class="s1">&#39;Frecuencia&#39;</span><span class="p">:</span> <span class="n">freq</span><span class="p">,</span>
        <span class="s1">&#39;</span><span class="si">% d</span><span class="s1">el más frecuente&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">top_pct</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
        <span class="s1">&#39;Nulos&#39;</span><span class="p">:</span> <span class="n">n_missing</span>
    <span class="p">})</span>

<span class="c1"># Convertir a DataFrame para visualizar como tabla</span>
<span class="n">summary_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">summary</span><span class="p">)</span>

<span class="c1"># Ordenar si deseas</span>
<span class="n">summary_df</span> <span class="o">=</span> <span class="n">summary_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Categorías únicas&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Mostrar como tabla</span>
<span class="n">summary_df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">&quot;Resumen de variables categóricas&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
</style>
<table id="T_e4aac_">
  <caption>Resumen de variables categóricas</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th class="col_heading level0 col0" >Variable</th>
      <th class="col_heading level0 col1" >Categorías únicas</th>
      <th class="col_heading level0 col2" >Valor más frecuente</th>
      <th class="col_heading level0 col3" >Frecuencia</th>
      <th class="col_heading level0 col4" >% del más frecuente</th>
      <th class="col_heading level0 col5" >Nulos</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_e4aac_level0_row0" class="row_heading level0 row0" >9</th>
      <td id="T_e4aac_row0_col0" class="data row0 col0" >state</td>
      <td id="T_e4aac_row0_col1" class="data row0 col1" >33</td>
      <td id="T_e4aac_row0_col2" class="data row0 col2" >ca</td>
      <td id="T_e4aac_row0_col3" class="data row0 col3" >44730</td>
      <td id="T_e4aac_row0_col4" class="data row0 col4" >11.510000</td>
      <td id="T_e4aac_row0_col5" class="data row0 col5" >0</td>
    </tr>
    <tr>
      <th id="T_e4aac_level0_row1" class="row_heading level0 row1" >0</th>
      <td id="T_e4aac_row1_col0" class="data row1 col0" >manufacturer</td>
      <td id="T_e4aac_row1_col1" class="data row1 col1" >24</td>
      <td id="T_e4aac_row1_col2" class="data row1 col2" >ford</td>
      <td id="T_e4aac_row1_col3" class="data row1 col3" >78523</td>
      <td id="T_e4aac_row1_col4" class="data row1 col4" >20.200000</td>
      <td id="T_e4aac_row1_col5" class="data row1 col5" >0</td>
    </tr>
    <tr>
      <th id="T_e4aac_level0_row2" class="row_heading level0 row2" >7</th>
      <td id="T_e4aac_row2_col0" class="data row2 col0" >type</td>
      <td id="T_e4aac_row2_col1" class="data row2 col1" >13</td>
      <td id="T_e4aac_row2_col2" class="data row2 col2" >type_missing</td>
      <td id="T_e4aac_row2_col3" class="data row2 col3" >83673</td>
      <td id="T_e4aac_row2_col4" class="data row2 col4" >21.520000</td>
      <td id="T_e4aac_row2_col5" class="data row2 col5" >0</td>
    </tr>
    <tr>
      <th id="T_e4aac_level0_row3" class="row_heading level0 row3" >8</th>
      <td id="T_e4aac_row3_col0" class="data row3 col0" >paint_color</td>
      <td id="T_e4aac_row3_col1" class="data row3 col1" >11</td>
      <td id="T_e4aac_row3_col2" class="data row3 col2" >paint_missing</td>
      <td id="T_e4aac_row3_col3" class="data row3 col3" >115132</td>
      <td id="T_e4aac_row3_col4" class="data row3 col4" >29.610000</td>
      <td id="T_e4aac_row3_col5" class="data row3 col5" >0</td>
    </tr>
    <tr>
      <th id="T_e4aac_level0_row4" class="row_heading level0 row4" >2</th>
      <td id="T_e4aac_row4_col0" class="data row4 col0" >condition</td>
      <td id="T_e4aac_row4_col1" class="data row4 col1" >6</td>
      <td id="T_e4aac_row4_col2" class="data row4 col2" >condition_missing</td>
      <td id="T_e4aac_row4_col3" class="data row4 col3" >149640</td>
      <td id="T_e4aac_row4_col4" class="data row4 col4" >38.490000</td>
      <td id="T_e4aac_row4_col5" class="data row4 col5" >0</td>
    </tr>
    <tr>
      <th id="T_e4aac_level0_row5" class="row_heading level0 row5" >3</th>
      <td id="T_e4aac_row5_col0" class="data row5 col0" >fuel</td>
      <td id="T_e4aac_row5_col1" class="data row5 col1" >5</td>
      <td id="T_e4aac_row5_col2" class="data row5 col2" >gas</td>
      <td id="T_e4aac_row5_col3" class="data row5 col3" >329643</td>
      <td id="T_e4aac_row5_col4" class="data row5 col4" >84.790000</td>
      <td id="T_e4aac_row5_col5" class="data row5 col5" >0</td>
    </tr>
    <tr>
      <th id="T_e4aac_level0_row6" class="row_heading level0 row6" >6</th>
      <td id="T_e4aac_row6_col0" class="data row6 col0" >drive</td>
      <td id="T_e4aac_row6_col1" class="data row6 col1" >4</td>
      <td id="T_e4aac_row6_col2" class="data row6 col2" >4wd</td>
      <td id="T_e4aac_row6_col3" class="data row6 col3" >119518</td>
      <td id="T_e4aac_row6_col4" class="data row6 col4" >30.740000</td>
      <td id="T_e4aac_row6_col5" class="data row6 col5" >0</td>
    </tr>
    <tr>
      <th id="T_e4aac_level0_row7" class="row_heading level0 row7" >1</th>
      <td id="T_e4aac_row7_col0" class="data row7 col0" >model</td>
      <td id="T_e4aac_row7_col1" class="data row7 col1" >3</td>
      <td id="T_e4aac_row7_col2" class="data row7 col2" >Other</td>
      <td id="T_e4aac_row7_col3" class="data row7 col3" >372900</td>
      <td id="T_e4aac_row7_col4" class="data row7 col4" >95.920000</td>
      <td id="T_e4aac_row7_col5" class="data row7 col5" >0</td>
    </tr>
    <tr>
      <th id="T_e4aac_level0_row8" class="row_heading level0 row8" >4</th>
      <td id="T_e4aac_row8_col0" class="data row8 col0" >title_status</td>
      <td id="T_e4aac_row8_col1" class="data row8 col1" >3</td>
      <td id="T_e4aac_row8_col2" class="data row8 col2" >clean</td>
      <td id="T_e4aac_row8_col3" class="data row8 col3" >375726</td>
      <td id="T_e4aac_row8_col4" class="data row8 col4" >96.640000</td>
      <td id="T_e4aac_row8_col5" class="data row8 col5" >0</td>
    </tr>
    <tr>
      <th id="T_e4aac_level0_row9" class="row_heading level0 row9" >5</th>
      <td id="T_e4aac_row9_col0" class="data row9 col0" >transmission</td>
      <td id="T_e4aac_row9_col1" class="data row9 col1" >3</td>
      <td id="T_e4aac_row9_col2" class="data row9 col2" >automatic</td>
      <td id="T_e4aac_row9_col3" class="data row9 col3" >305199</td>
      <td id="T_e4aac_row9_col4" class="data row9 col4" >78.500000</td>
      <td id="T_e4aac_row9_col5" class="data row9 col5" >0</td>
    </tr>
    <tr>
      <th id="T_e4aac_level0_row10" class="row_heading level0 row10" >10</th>
      <td id="T_e4aac_row10_col0" class="data row10 col0" >high_demand</td>
      <td id="T_e4aac_row10_col1" class="data row10 col1" >2</td>
      <td id="T_e4aac_row10_col2" class="data row10 col2" >0</td>
      <td id="T_e4aac_row10_col3" class="data row10 col3" >194439</td>
      <td id="T_e4aac_row10_col4" class="data row10 col4" >50.010000</td>
      <td id="T_e4aac_row10_col5" class="data row10 col5" >0</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">math</span>

<span class="n">cat_cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;manufacturer&#39;</span><span class="p">,</span><span class="s1">&#39;condition&#39;</span><span class="p">,</span> <span class="s1">&#39;fuel&#39;</span><span class="p">,</span> <span class="s1">&#39;title_status&#39;</span><span class="p">,</span><span class="s1">&#39;transmission&#39;</span><span class="p">,</span> <span class="s1">&#39;drive&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;paint_color&#39;</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="s1">&#39;high_demand&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">]</span>
<span class="n">graficar_cat</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cat_cols</span><span class="p">),</span> <span class="n">cat_cols</span><span class="p">,</span> <span class="n">figura_num</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
             <span class="n">titulo_general</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1"> Distribución de variables demográficas y de ingreso&#39;</span><span class="p">,</span>
             <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;Purples&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/3134e9276c7c89bc0d2a4a27c92b987b1bdc3bca7716027d0864240fccf7f510.png" src="_images/3134e9276c7c89bc0d2a4a27c92b987b1bdc3bca7716027d0864240fccf7f510.png" />
</div>
</div>
<p>El conjunto de gráficos muestra cómo distintas variables categóricas —como fabricante, condición, tipo de combustible, estado legal del título, transmisión, tipo de tracción, tipo de vehículo, color de pintura, estado geográfico y demanda— se distribuyen en relación con el ingreso. De forma general, se observa que algunas categorías dentro de cada variable están asociadas a niveles de ingreso más altos, lo cual se refleja en los tonos más oscuros de las barras. Por ejemplo, ciertos fabricantes, tipos de transmisión o estados específicos parecen concentrar vehículos de mayor valor.</p>
</section>
<section id="analsiis-multivariado">
<h2><em><strong>4. Análsiis multivariado</strong></em><a class="headerlink" href="#analsiis-multivariado" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;year&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;royalblue&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Gráfico de dispersión: Precio vs Years&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Years&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Precio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/6e504cec4bf2872874aee52bd6b3184574c8db29aaf00c19d81aadd48af7a29c.png" src="_images/6e504cec4bf2872874aee52bd6b3184574c8db29aaf00c19d81aadd48af7a29c.png" />
</div>
</div>
<p>La gráfica muestra una dispersión de puntos que relaciona el precio de los autos con su año de fabricación. Se puede observar que, en general, los autos más recientes tienden a tener precios más altos. A partir del año 2000 en adelante, la densidad y altura de los puntos aumenta, lo que indica una tendencia creciente en los precios. También se notan varios valores atípicos, especialmente en los años más recientes, donde algunos vehículos alcanzan precios muy elevados.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;cylinders&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="n">estimator</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precio promedio por cylinders&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;cylinders&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Precio promedio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/06762118909e72c5764db38460a3cbb881b530edffcadf332e336857d7dc3c64.png" src="_images/06762118909e72c5764db38460a3cbb881b530edffcadf332e336857d7dc3c64.png" />
</div>
</div>
<p>El gráfico de barras muestra el precio promedio de los autos según la cantidad de cilindros. Se observa una relación directa: a mayor número de cilindros, mayor es el precio promedio del vehículo. Los autos con 12 cilindros presentan el valor promedio más alto, superando los 50,000, mientras que los de 5 cilindros tienen el valor más bajo. Esto indica que los motores más potentes suelen estar asociados a vehículos de gama alta o deportivos, lo cual eleva su precio significativamente.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;odometer&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;royalblue&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Gráfico de dispersión: Precio vs odometer&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;odometer&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Precio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/9b6fd89dc9c8cbce5de3ae7c17d11a9586714e34f9a458b6a0ca15c5fef69809.png" src="_images/9b6fd89dc9c8cbce5de3ae7c17d11a9586714e34f9a458b6a0ca15c5fef69809.png" />
</div>
</div>
<p>En este gráfico de dispersión se analiza la relación entre el precio de los autos y el kilometraje registrado en el odómetro. Se puede ver una clara tendencia decreciente: a medida que el kilometraje aumenta, el precio tiende a disminuir. Esto es esperable, ya que un mayor uso del vehículo suele implicar mayor desgaste y menor valor en el mercado. Sin embargo, hay varios puntos atípicos con precios muy altos incluso con bajo kilometraje, lo cual podría deberse a autos de lujo. En general, la gráfica confirma que el uso del vehículo es un factor importante que impacta negativamente en su precio.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">order</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;manufacturer&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span>  

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">28</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;manufacturer&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precio promedio por manufacturer&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;manufacturer&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Precio promedio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/338c917bc31c5b0daba9ff5b21d5514ed5ca12678ba62835626b5c684e1a4e8a.png" src="_images/338c917bc31c5b0daba9ff5b21d5514ed5ca12678ba62835626b5c684e1a4e8a.png" />
</div>
</div>
<p>El gráfico de barras muestra el precio promedio de vehículos según su fabricante. Se observa que marcas de lujo como BMW, Audi, Cadillac y Mercedes-Benz tienen los precios promedio más altos, lo cual es consistente con su posicionamiento en el mercado. En contraste, fabricantes como Nissan, Kia y Hyundai presentan precios promedio más bajos, lo que sugiere que están orientados a un público más general o con menor poder adquisitivo. Esto evidencia cómo la marca influye directamente en el valor económico de un vehículo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">order</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;condition&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span>  

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;condition&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precio promedio por condition&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;condition&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Precio promedio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/d71b8faf74c0673492cc121a9be94320ddf5a6b322c23fd43567f72ec0dd5e0a.png" src="_images/d71b8faf74c0673492cc121a9be94320ddf5a6b322c23fd43567f72ec0dd5e0a.png" />
</div>
</div>
<p>El gráfico muestra el precio promedio de los autos según su condición. Llama la atención que la categoría “good” tiene uno de los precios más altos, incluso por encima de “excellent” y “like new”. Esto podría deberse a diferencias en cómo se clasifican las condiciones o a tamaños desiguales entre grupos. La categoría “fair” presenta el precio más bajo, lo cual es coherente con su peor estado. También destaca “condition_missing” y “Other” con valores altos, posiblemente por incluir datos atípicos o mal clasificados. En general, se confirma que el estado del vehículo tiene un impacto importante en su valor.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;fuel&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="n">estimator</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precio promedio por fuel&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;fuel&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Precio promedio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/e4ba8e8de5f749e546801f18b8660da388cb07123f1fdb39d51c1c395d99db63.png" src="_images/e4ba8e8de5f749e546801f18b8660da388cb07123f1fdb39d51c1c395d99db63.png" />
</div>
</div>
<p>El gráfico muestra el precio promedio de los autos según el tipo de combustible. Se observa que los vehículos a diésel tienen el precio promedio más alto, lo cual puede estar relacionado con que suelen ser modelos más grandes o comerciales. En contraste, los autos híbridos presentan el precio más bajo, lo que resulta curioso, ya que normalmente se espera que tengan un mayor valor por su tecnología. Los autos a gasolina, aunque comunes, tienen precios más bajos que la mayoría, lo que puede deberse a su amplia oferta en el mercado. La categoría “Other” también muestra precios elevados, probablemente por incluir tecnologías o combustibles alternativos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;title_status&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="n">estimator</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precio promedio por title_status&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;title_status&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Precio promedio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/1db97990ac619846bc487b24f4e4581f048cff4b84a002f33ced540f128d6f47.png" src="_images/1db97990ac619846bc487b24f4e4581f048cff4b84a002f33ced540f128d6f47.png" />
</div>
</div>
<p>El gráfico evidencia que el estado del título del vehículo tiene un impacto directo en su precio promedio. Los autos con título “clean” alcanzan el valor más alto, cercano a los <span class="math notranslate nohighlight">\(19,000, lo que refleja mayor confianza del mercado en su historial legal y mecánico. En cambio, los vehículos con título &quot;rebuilt&quot; o clasificados como &quot;Other&quot; presentan precios significativamente más bajos (alrededor de \)</span>13,000), lo que sugiere que han pasado por reparaciones mayores o procesos de reconstrucción que afectan su valor percibido.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;transmission&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="n">estimator</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precio promedio por transmission&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;transmission&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Precio promedio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/dfd8acdb6819ced4ff22b5ea6d1b5a777d6e14e58462582826b16a3cb2fb999c.png" src="_images/dfd8acdb6819ced4ff22b5ea6d1b5a777d6e14e58462582826b16a3cb2fb999c.png" />
</div>
</div>
<p>El gráfico muestra que el tipo de transmisión influye directamente en el precio promedio de los vehículos. Los autos con transmisión “manual” tienen el valor más bajo, lo que puede asociarse a modelos más antiguos o económicos. En contraste, la categoría “other” presenta el precio más alto, lo que sugiere que agrupa transmisiones especializadas o poco comunes, posiblemente en vehículos de gama alta. La transmisión “automatic” se ubica en un rango intermedio, reflejando su popularidad y amplia presencia en el mercado. Esta distribución sugiere que la transmisión no solo afecta la experiencia de conducción, sino también el valor del vehículo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;drive&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="n">estimator</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precio promedio por drive&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;drive&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Precio promedio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a5b328d97e160ca4d4148b15053e3a5e4f6b04dda07c4fde580eaadb970099be.png" src="_images/a5b328d97e160ca4d4148b15053e3a5e4f6b04dda07c4fde580eaadb970099be.png" />
</div>
</div>
<p>El gráfico muestra el precio promedio de los autos según su tipo de tracción. Se observa que los vehículos con tracción en las cuatro ruedas (4wd) tienen el precio promedio más alto, lo que puede estar relacionado con su mayor capacidad para terrenos difíciles y su uso en vehículos todoterreno o de lujo. Los autos con tracción trasera (rwd) también presentan precios altos, mientras que los de tracción delantera (fwd) tienen el precio promedio más bajo, probablemente porque son más comunes y económicos. Los valores faltantes (“drive_missing”) muestran un precio intermedio, lo que indica que puede haber datos incompletos o vehículos con características variadas en esa categoría.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="n">estimator</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precio promedio por type&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Precio promedio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/340a95c7827969c16c12a040e754e46db97498a4be6bf14602ab7346a1696110.png" src="_images/340a95c7827969c16c12a040e754e46db97498a4be6bf14602ab7346a1696110.png" />
</div>
</div>
<p>El gráfico muestra el precio promedio de los vehículos según su tipo. Se observa que los pickups y camiones (truck) tienen los precios promedio más altos, lo que puede estar relacionado con su tamaño, capacidad y demanda en ciertos mercados. Los convertibles también tienen un precio relativamente alto, posiblemente por su carácter deportivo o de lujo. Por otro lado, los autos con tipo “mini-van” y “hatchback” presentan los precios promedio más bajos, lo que sugiere que son opciones más económicas o familiares. La categoría “type_missing” muestra un precio bajo, lo que podría indicar datos faltantes o vehículos menos valorados.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;paint_color&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="n">estimator</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precio promedio por paint_color&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;paint_color&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Precio promedio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/a0f739383b4a0752d75e1f46c30734a537cb4a07b727eaa3627d3780894143c0.png" src="_images/a0f739383b4a0752d75e1f46c30734a537cb4a07b727eaa3627d3780894143c0.png" />
</div>
</div>
<p>El gráfico evidencia que el precio promedio de los vehículos varía según el color de pintura. Se observa que los autos de color blanco, negro y rojo presentan los valores más altos, lo que podría estar relacionado con su popularidad o asociación con segmentos de mayor valor. Por otro lado, los vehículos de color azul, plateado, gris, marrón y aquellos con pintura personalizada mantienen precios moderados. Finalmente, los autos de color verde registran los precios más bajos en comparación con el resto, lo que sugiere una menor demanda o una percepción de menor valor comercial en el mercado.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s2">&quot;state&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> <span class="n">estimator</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">)</span>

<span class="c1"># Personalización</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Precio promedio por state&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;state&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Precio promedio&quot;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/7e12d63fb8a325d00742e50005efaba7f67ea5950e6ab5e8f3524ccec6b9eb89.png" src="_images/7e12d63fb8a325d00742e50005efaba7f67ea5950e6ab5e8f3524ccec6b9eb89.png" />
</div>
</div>
<p>El gráfico muestra una variación en el valor promedio de los vehículos según el estado de EE. UU. Representado mediante barras codificadas por color, se evidencia que ciertos estados alcanzan precios significativamente más altos, mientras que otros se mantienen en rangos más moderados. Esta disparidad puede estar vinculada a factores como el poder adquisitivo regional, la demanda del mercado automotriz local o las condiciones económicas particulares de cada estado.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>

<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">df</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;long&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span>              <span class="c1"># Color depende del precio</span>
    <span class="n">size</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span>             <span class="c1"># Tamaño depende del precio</span>
    <span class="n">sizes</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">300</span><span class="p">),</span>          <span class="c1"># Rango de tamaños</span>
    <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;viridis&quot;</span><span class="p">,</span>        <span class="c1"># Colores tipo térmico</span>
    <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>                <span class="c1"># Transparencia</span>
    <span class="n">legend</span><span class="o">=</span><span class="s2">&quot;brief&quot;</span>            <span class="c1"># Mostrar leyenda</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Mapa geográfico de precios&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Longitud&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Latitud&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Precio&quot;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/4b47650684af4cf3679f517c03fbfe8f3e287a1743efdea65f9151dd847f4159.png" src="_images/4b47650684af4cf3679f517c03fbfe8f3e287a1743efdea65f9151dd847f4159.png" />
</div>
</div>
<p>El mapa revela una marcada concentración de valores elevados en zonas específicas de Estados Unidos, especialmente en áreas urbanas densamente pobladas. Los círculos más grandes y oscuros, que representan precios más altos, se agrupan en regiones como la costa oeste, el noreste y ciertos puntos del sur, lo que sugiere una correlación entre ubicación geográfica y poder adquisitivo o demanda del mercado. En contraste, las zonas con círculos más pequeños y claros indican precios más bajos, predominando en áreas rurales o menos densamente habitadas.</p>
</section>
<section id="actualizacion-de-la-base-de-datos">
<h2><em><strong>5. Actualización de la base de datos</strong></em><a class="headerlink" href="#actualizacion-de-la-base-de-datos" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;MP3_MODELOS.csv&quot;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="MP3_INICIO.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><em><strong>Exploración Inicial y Manejo de Datos Faltantes</strong></em></p>
      </div>
    </a>
    <a class="right-next"
       href="MP3_MODELACION.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><em><strong>Modelos de Clasificación y Predicción</strong></em></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importar-librerias-y-cargar-datos"><strong>1. Importar Librerias y Cargar Datos:</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#funciones"><strong>Funciones:</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eda-numericas"><strong>2. EDA Numéricas:</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulacion-de-variables-numericas"><strong>2.1 Manipulación de variables numéricas</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulacion-de-price"><strong>2.1.1 Manipulación de <code class="docutils literal notranslate"><span class="pre">Price</span></code></strong></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis"><strong>2.1.1.1. Análisis:</strong></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#correccion"><strong>2.1.1.2. Corrección:</strong></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#manipulacion-de-odometer"><strong>2.1.2 Manipulación de <code class="docutils literal notranslate"><span class="pre">odometer</span></code></strong></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id1"><strong>2.1.2.1. Análisis:</strong></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id2"><strong>2.1.2.2. Corrección:</strong></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-outliers-numericas"><strong>2.2 Análisis outliers numéricas:</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#odometer"><strong>2.2.1. <code class="docutils literal notranslate"><span class="pre">Odometer</span></code>:</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ano"><strong>2.2.2. <code class="docutils literal notranslate"><span class="pre">Año</span></code>:</strong></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lat-long"><strong>2.2.3. <code class="docutils literal notranslate"><span class="pre">lat</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">long</span></code>:</strong></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-variables-numericas"><strong>2.3. Análisis variables numéricas:</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#eda-categoricas"><strong>3.EDA categóricas:</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analsiis-multivariado"><em><strong>4. Análsiis multivariado</strong></em></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#actualizacion-de-la-base-de-datos"><em><strong>5. Actualización de la base de datos</strong></em></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Guirlessa De La Hoz, Mariangel Mercado.
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>