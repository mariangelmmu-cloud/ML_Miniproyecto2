
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Exploración Inicial y Manejo de Datos Faltantes &#8212; Miniproyecto 2 - Machine Learning</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=949a1ff5" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=ff8fa330"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'MP3_INICIO';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Análsis exploratorio de datos (EDA)" href="MP3_EDA.html" />
    <link rel="prev" title="Descripción de variables" href="MP3_DESCR_VAR.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="MP3_INTRO.html">
  
  
  
  
  
  
    <p class="title logo__title">Miniproyecto 2 - Machine Learning</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="MP3_INTRO.html">
                    Introducción al miniproyecto
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="MP3_DESCR_VAR.html"><em><strong>Descripción de variables</strong></em></a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#"><em><strong>Exploración Inicial y Manejo de Datos Faltantes</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="MP3_EDA.html"><em><strong>Análsis exploratorio de datos (EDA)</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="MP3_MODELACION.html"><em><strong>Modelos de Clasificación y Predicción</strong></em></a></li>
<li class="toctree-l1"><a class="reference internal" href="MP3_CONCLUSIONES.html"><em><strong>Conclusiones</strong></em></a></li>

</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/mariangelmmu-cloud/ML_Miniproyecto2.git" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/mariangelmmu-cloud/ML_Miniproyecto2.git/issues/new?title=Issue%20on%20page%20%2FMP3_INICIO.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/MP3_INICIO.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Exploración Inicial y Manejo de Datos Faltantes</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importar-datos-y-librerias"><strong>1. Importar Datos y librerías</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#observacion-de-los-datos"><strong>2. Observación de los datos</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#limpieza-de-datos"><strong>3. Limpieza de datos</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#elimicacion-de-variables-irrelevantes"><em><strong>3.1. Elimicación de variables irrelevantes</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transformacion-de-variables"><em><strong>3.2. Transformación de variables:</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identificacion-analisis-y-tratamiento-de-valores-faltantes"><em><strong>3.3. Identificación, análisis y tratamiento de valores faltantes</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminicacion-de-variables-country-y-size"><em><strong>3.3.1. Eliminicación de variables: <code class="docutils literal notranslate"><span class="pre">country</span></code> y <code class="docutils literal notranslate"><span class="pre">size</span></code>:</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-con-un-rango-de-20-40-de-valores-faltantes"><em><strong>3.3.2. Variables con un rango de 20% - 40% de valores faltantes</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cylinders"><em><strong>3.3.2.1. <code class="docutils literal notranslate"><span class="pre">cylinders:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#condition"><em><strong>3.3.2.2. <code class="docutils literal notranslate"><span class="pre">condition:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drive"><em><strong>3.3.2.3. <code class="docutils literal notranslate"><span class="pre">drive:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#paint-color"><em><strong>3.3.2.4. <code class="docutils literal notranslate"><span class="pre">paint_color:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#type"><em><strong>3.3.2.5. <code class="docutils literal notranslate"><span class="pre">type:</span></code></strong></em></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-con-menos-del-5-de-valores-faltantes"><em><strong>3.3.3. Variables con menos del 5% de valores faltantes</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#verificacion-de-valores-faltantes"><em><strong>3.3.4. Verificación de valores faltantes</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#codificacion-de-variables-categoricas"><strong>3.5. Codificación de variables categóricas</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#actualizacion-de-la-base-de-datos"><em><strong>4. Actualización de la base de datos</strong></em></a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="exploracion-inicial-y-manejo-de-datos-faltantes">
<h1><em><strong>Exploración Inicial y Manejo de Datos Faltantes</strong></em><a class="headerlink" href="#exploracion-inicial-y-manejo-de-datos-faltantes" title="Link to this heading">#</a></h1>
<section id="importar-datos-y-librerias">
<h2><strong>1. Importar Datos y librerías</strong><a class="headerlink" href="#importar-datos-y-librerias" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">OrdinalEncoder</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">math</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.experimental</span><span class="w"> </span><span class="kn">import</span> <span class="n">enable_iterative_imputer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.impute</span><span class="w"> </span><span class="kn">import</span> <span class="n">IterativeImputer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">PolynomialFeatures</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.pipeline</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pipeline</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">missingno</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">msno</span> 
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.ensemble</span><span class="w"> </span><span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">BayesianRidge</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;text.usetex&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">stats</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">kstest</span><span class="p">,</span> <span class="n">chi2_contingency</span>


<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;figure.figsize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>En primer lugar, se importan las librerías a usar y la base de datos que se usará en el proyecto.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;vehicles.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="o">~</span>\<span class="n">AppData</span>\<span class="n">Local</span>\<span class="n">Temp</span><span class="o">/</span><span class="n">ipykernel_7208</span><span class="o">/</span><span class="mf">3059042137.</span><span class="n">py</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;vehicles.csv&quot;</span><span class="p">)</span>

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\util\_decorators.py</span> in <span class="ni">wrapper</span><span class="nt">(*args, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">309</span>                     <span class="n">stacklevel</span><span class="o">=</span><span class="n">stacklevel</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">310</span>                 <span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">311</span>             <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">312</span> 
<span class="g g-Whitespace">    </span><span class="mi">313</span>         <span class="k">return</span> <span class="n">wrapper</span>

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\parsers\readers.py</span> in <span class="ni">read_csv</span><span class="nt">(filepath_or_buffer, sep, delimiter, header, names, index_col, usecols, squeeze, prefix, mangle_dupe_cols, dtype, engine, converters, true_values, false_values, skipinitialspace, skiprows, skipfooter, nrows, na_values, keep_default_na, na_filter, verbose, skip_blank_lines, parse_dates, infer_datetime_format, keep_date_col, date_parser, dayfirst, cache_dates, iterator, chunksize, compression, thousands, decimal, lineterminator, quotechar, quoting, doublequote, escapechar, comment, encoding, encoding_errors, dialect, error_bad_lines, warn_bad_lines, on_bad_lines, delim_whitespace, low_memory, memory_map, float_precision, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">584</span>     <span class="n">kwds</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">kwds_defaults</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">585</span> 
<span class="ne">--&gt; </span><span class="mi">586</span>     <span class="k">return</span> <span class="n">_read</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">587</span> 
<span class="g g-Whitespace">    </span><span class="mi">588</span> 

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\parsers\readers.py</span> in <span class="ni">_read</span><span class="nt">(filepath_or_buffer, kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">480</span> 
<span class="g g-Whitespace">    </span><span class="mi">481</span>     <span class="c1"># Create the parser.</span>
<span class="ne">--&gt; </span><span class="mi">482</span>     <span class="n">parser</span> <span class="o">=</span> <span class="n">TextFileReader</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">483</span> 
<span class="g g-Whitespace">    </span><span class="mi">484</span>     <span class="k">if</span> <span class="n">chunksize</span> <span class="ow">or</span> <span class="n">iterator</span><span class="p">:</span>

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\parsers\readers.py</span> in <span class="ni">__init__</span><span class="nt">(self, f, engine, **kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">809</span>             <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="s2">&quot;has_index_names&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwds</span><span class="p">[</span><span class="s2">&quot;has_index_names&quot;</span><span class="p">]</span>
<span class="g g-Whitespace">    </span><span class="mi">810</span> 
<span class="ne">--&gt; </span><span class="mi">811</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_engine</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_make_engine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">engine</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">812</span> 
<span class="g g-Whitespace">    </span><span class="mi">813</span>     <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\parsers\readers.py</span> in <span class="ni">_make_engine</span><span class="nt">(self, engine)</span>
<span class="g g-Whitespace">   </span><span class="mi">1038</span>             <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1039</span>         <span class="c1"># error: Too many arguments for &quot;ParserBase&quot;</span>
<span class="ne">-&gt; </span><span class="mi">1040</span>         <span class="k">return</span> <span class="n">mapping</span><span class="p">[</span><span class="n">engine</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">)</span>  <span class="c1"># type: ignore[call-arg]</span>
<span class="g g-Whitespace">   </span><span class="mi">1041</span> 
<span class="g g-Whitespace">   </span><span class="mi">1042</span>     <span class="k">def</span><span class="w"> </span><span class="nf">_failover_to_python</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\parsers\c_parser_wrapper.py</span> in <span class="ni">__init__</span><span class="nt">(self, src, **kwds)</span>
<span class="g g-Whitespace">     </span><span class="mi">49</span> 
<span class="g g-Whitespace">     </span><span class="mi">50</span>         <span class="c1"># open handles</span>
<span class="ne">---&gt; </span><span class="mi">51</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_open_handles</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">52</span>         <span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">handles</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
<span class="g g-Whitespace">     </span><span class="mi">53</span> 

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\parsers\base_parser.py</span> in <span class="ni">_open_handles</span><span class="nt">(self, src, kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">220</span>         <span class="n">Let</span> <span class="n">the</span> <span class="n">readers</span> <span class="nb">open</span> <span class="n">IOHandles</span> <span class="n">after</span> <span class="n">they</span> <span class="n">are</span> <span class="n">done</span> <span class="k">with</span> <span class="n">their</span> <span class="n">potential</span> <span class="n">raises</span><span class="o">.</span>
<span class="g g-Whitespace">    </span><span class="mi">221</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="ne">--&gt; </span><span class="mi">222</span><span class="s2">         self.handles = get_handle(</span>
<span class="g g-Whitespace">    </span><span class="mi">223</span><span class="s2">             src,</span>
<span class="g g-Whitespace">    </span><span class="mi">224</span><span class="s2">             &quot;r&quot;,</span>

<span class="nn">~\miniconda3\envs\ml_venv\lib\site-packages\pandas\io\common.py</span> in <span class="ni">get_handle</span><span class="nt">(path_or_buf, mode, encoding, compression, memory_map, is_text, errors, storage_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">700</span><span class="s2">         if ioargs.encoding and &quot;b&quot; not in ioargs.mode:</span>
<span class="g g-Whitespace">    </span><span class="mi">701</span><span class="s2">             # Encoding</span>
<span class="ne">--&gt; </span><span class="mi">702</span><span class="s2">             handle = open(</span>
<span class="g g-Whitespace">    </span><span class="mi">703</span><span class="s2">                 handle,</span>
<span class="g g-Whitespace">    </span><span class="mi">704</span><span class="s2">                 ioargs.mode,</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;vehicles.csv&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="observacion-de-los-datos">
<h2><strong>2. Observación de los datos</strong><a class="headerlink" href="#observacion-de-los-datos" title="Link to this heading">#</a></h2>
<p>En esta sección, como lo insdica su título, se observarán los datos con el fin de determinar si hay errores de tabulación, NA’s, errores en el typo de variables y demás. Solo se miran los datos desde lejos, para luego detallarlos y limpiarlos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 426880 entries, 0 to 426879
Data columns (total 26 columns):
 #   Column        Non-Null Count   Dtype  
---  ------        --------------   -----  
 0   id            426880 non-null  int64  
 1   url           426880 non-null  object 
 2   region        426880 non-null  object 
 3   region_url    426880 non-null  object 
 4   price         426880 non-null  int64  
 5   year          425675 non-null  float64
 6   manufacturer  409234 non-null  object 
 7   model         421603 non-null  object 
 8   condition     252776 non-null  object 
 9   cylinders     249202 non-null  object 
 10  fuel          423867 non-null  object 
 11  odometer      422480 non-null  float64
 12  title_status  418638 non-null  object 
 13  transmission  424324 non-null  object 
 14  VIN           265838 non-null  object 
 15  drive         296313 non-null  object 
 16  size          120519 non-null  object 
 17  type          334022 non-null  object 
 18  paint_color   296677 non-null  object 
 19  image_url     426812 non-null  object 
 20  description   426810 non-null  object 
 21  county        0 non-null       float64
 22  state         426880 non-null  object 
 23  lat           420331 non-null  float64
 24  long          420331 non-null  float64
 25  posting_date  426812 non-null  object 
dtypes: float64(5), int64(2), object(19)
memory usage: 84.7+ MB
</pre></div>
</div>
</div>
</div>
<p>En primer lugar, se examina la base de datos en general. Note que la base tiene las siguientes <code class="docutils literal notranslate"><span class="pre">dimensiones:</span> <span class="pre">426880</span> <span class="pre">filas</span> <span class="pre">y</span> <span class="pre">26</span> <span class="pre">columnas</span></code>. A simple vista, el comando <code class="docutils literal notranslate"><span class="pre">.info()</span></code> indica que hay ciertas variables con datos faltantes y también se detectan ciertas variables como: <code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">odometer</span></code> y <code class="docutils literal notranslate"><span class="pre">cylinders</span></code> tienen asignado un <em>tipo de variable que no corresponde con la naturaleza de la variable</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>url</th>
      <th>region</th>
      <th>region_url</th>
      <th>price</th>
      <th>year</th>
      <th>manufacturer</th>
      <th>model</th>
      <th>condition</th>
      <th>cylinders</th>
      <th>fuel</th>
      <th>odometer</th>
      <th>title_status</th>
      <th>transmission</th>
      <th>VIN</th>
      <th>drive</th>
      <th>size</th>
      <th>type</th>
      <th>paint_color</th>
      <th>image_url</th>
      <th>description</th>
      <th>county</th>
      <th>state</th>
      <th>lat</th>
      <th>long</th>
      <th>posting_date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>7222695916</td>
      <td>https://prescott.craigslist.org/cto/d/prescott...</td>
      <td>prescott</td>
      <td>https://prescott.craigslist.org</td>
      <td>6000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>az</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>7218891961</td>
      <td>https://fayar.craigslist.org/ctd/d/bentonville...</td>
      <td>fayetteville</td>
      <td>https://fayar.craigslist.org</td>
      <td>11900</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ar</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>7221797935</td>
      <td>https://keys.craigslist.org/cto/d/summerland-k...</td>
      <td>florida keys</td>
      <td>https://keys.craigslist.org</td>
      <td>21000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>fl</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>7222270760</td>
      <td>https://worcester.craigslist.org/cto/d/west-br...</td>
      <td>worcester / central MA</td>
      <td>https://worcester.craigslist.org</td>
      <td>1500</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ma</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>7210384030</td>
      <td>https://greensboro.craigslist.org/cto/d/trinit...</td>
      <td>greensboro</td>
      <td>https://greensboro.craigslist.org</td>
      <td>4900</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>nc</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Observe que solo las 5 primeras columnas cuentan con valores diferentes a NaN, además de la variable state.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>url</th>
      <th>region</th>
      <th>region_url</th>
      <th>price</th>
      <th>year</th>
      <th>manufacturer</th>
      <th>model</th>
      <th>condition</th>
      <th>cylinders</th>
      <th>fuel</th>
      <th>odometer</th>
      <th>title_status</th>
      <th>transmission</th>
      <th>VIN</th>
      <th>drive</th>
      <th>size</th>
      <th>type</th>
      <th>paint_color</th>
      <th>image_url</th>
      <th>description</th>
      <th>county</th>
      <th>state</th>
      <th>lat</th>
      <th>long</th>
      <th>posting_date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>426875</th>
      <td>7301591192</td>
      <td>https://wyoming.craigslist.org/ctd/d/atlanta-2...</td>
      <td>wyoming</td>
      <td>https://wyoming.craigslist.org</td>
      <td>23590</td>
      <td>2019.0</td>
      <td>nissan</td>
      <td>maxima s sedan 4d</td>
      <td>good</td>
      <td>6 cylinders</td>
      <td>gas</td>
      <td>32226.0</td>
      <td>clean</td>
      <td>other</td>
      <td>1N4AA6AV6KC367801</td>
      <td>fwd</td>
      <td>NaN</td>
      <td>sedan</td>
      <td>NaN</td>
      <td>https://images.craigslist.org/00o0o_iiraFnHg8q...</td>
      <td>Carvana is the safer way to buy a car During t...</td>
      <td>NaN</td>
      <td>wy</td>
      <td>33.786500</td>
      <td>-84.445400</td>
      <td>2021-04-04T03:21:31-0600</td>
    </tr>
    <tr>
      <th>426876</th>
      <td>7301591187</td>
      <td>https://wyoming.craigslist.org/ctd/d/atlanta-2...</td>
      <td>wyoming</td>
      <td>https://wyoming.craigslist.org</td>
      <td>30590</td>
      <td>2020.0</td>
      <td>volvo</td>
      <td>s60 t5 momentum sedan 4d</td>
      <td>good</td>
      <td>NaN</td>
      <td>gas</td>
      <td>12029.0</td>
      <td>clean</td>
      <td>other</td>
      <td>7JR102FKXLG042696</td>
      <td>fwd</td>
      <td>NaN</td>
      <td>sedan</td>
      <td>red</td>
      <td>https://images.craigslist.org/00x0x_15sbgnxCIS...</td>
      <td>Carvana is the safer way to buy a car During t...</td>
      <td>NaN</td>
      <td>wy</td>
      <td>33.786500</td>
      <td>-84.445400</td>
      <td>2021-04-04T03:21:29-0600</td>
    </tr>
    <tr>
      <th>426877</th>
      <td>7301591147</td>
      <td>https://wyoming.craigslist.org/ctd/d/atlanta-2...</td>
      <td>wyoming</td>
      <td>https://wyoming.craigslist.org</td>
      <td>34990</td>
      <td>2020.0</td>
      <td>cadillac</td>
      <td>xt4 sport suv 4d</td>
      <td>good</td>
      <td>NaN</td>
      <td>diesel</td>
      <td>4174.0</td>
      <td>clean</td>
      <td>other</td>
      <td>1GYFZFR46LF088296</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>hatchback</td>
      <td>white</td>
      <td>https://images.craigslist.org/00L0L_farM7bxnxR...</td>
      <td>Carvana is the safer way to buy a car During t...</td>
      <td>NaN</td>
      <td>wy</td>
      <td>33.779214</td>
      <td>-84.411811</td>
      <td>2021-04-04T03:21:17-0600</td>
    </tr>
    <tr>
      <th>426878</th>
      <td>7301591140</td>
      <td>https://wyoming.craigslist.org/ctd/d/atlanta-2...</td>
      <td>wyoming</td>
      <td>https://wyoming.craigslist.org</td>
      <td>28990</td>
      <td>2018.0</td>
      <td>lexus</td>
      <td>es 350 sedan 4d</td>
      <td>good</td>
      <td>6 cylinders</td>
      <td>gas</td>
      <td>30112.0</td>
      <td>clean</td>
      <td>other</td>
      <td>58ABK1GG4JU103853</td>
      <td>fwd</td>
      <td>NaN</td>
      <td>sedan</td>
      <td>silver</td>
      <td>https://images.craigslist.org/00z0z_bKnIVGLkDT...</td>
      <td>Carvana is the safer way to buy a car During t...</td>
      <td>NaN</td>
      <td>wy</td>
      <td>33.786500</td>
      <td>-84.445400</td>
      <td>2021-04-04T03:21:11-0600</td>
    </tr>
    <tr>
      <th>426879</th>
      <td>7301591129</td>
      <td>https://wyoming.craigslist.org/ctd/d/atlanta-2...</td>
      <td>wyoming</td>
      <td>https://wyoming.craigslist.org</td>
      <td>30590</td>
      <td>2019.0</td>
      <td>bmw</td>
      <td>4 series 430i gran coupe</td>
      <td>good</td>
      <td>NaN</td>
      <td>gas</td>
      <td>22716.0</td>
      <td>clean</td>
      <td>other</td>
      <td>WBA4J1C58KBM14708</td>
      <td>rwd</td>
      <td>NaN</td>
      <td>coupe</td>
      <td>NaN</td>
      <td>https://images.craigslist.org/00Y0Y_lEUocjyRxa...</td>
      <td>Carvana is the safer way to buy a car During t...</td>
      <td>NaN</td>
      <td>wy</td>
      <td>33.779214</td>
      <td>-84.411811</td>
      <td>2021-04-04T03:21:07-0600</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Podemos observar la presencia de valores faltantes en nuestras variables. En particular, la variable <code class="docutils literal notranslate"><span class="pre">cylinders</span></code> se identifican registros con la estructura <em><strong>#numero</strong></em>_<strong>cylinders</strong>, lo cual requieren ser transformados para su adecuado tratamiento, dado que en este estudio será analizada como una variable numérica.</p>
</section>
<section id="limpieza-de-datos">
<h2><strong>3. Limpieza de datos</strong><a class="headerlink" href="#limpieza-de-datos" title="Link to this heading">#</a></h2>
<section id="elimicacion-de-variables-irrelevantes">
<h3><em><strong>3.1. Elimicación de variables irrelevantes</strong></em><a class="headerlink" href="#elimicacion-de-variables-irrelevantes" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span> <span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="s2">&quot;region_url&quot;</span><span class="p">,</span> <span class="s2">&quot;image_url&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;posting_date&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>region</th>
      <th>price</th>
      <th>year</th>
      <th>manufacturer</th>
      <th>model</th>
      <th>condition</th>
      <th>cylinders</th>
      <th>fuel</th>
      <th>odometer</th>
      <th>title_status</th>
      <th>transmission</th>
      <th>VIN</th>
      <th>drive</th>
      <th>size</th>
      <th>type</th>
      <th>paint_color</th>
      <th>county</th>
      <th>state</th>
      <th>lat</th>
      <th>long</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>prescott</td>
      <td>6000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>az</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>fayetteville</td>
      <td>11900</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ar</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>florida keys</td>
      <td>21000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>fl</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>worcester / central MA</td>
      <td>1500</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ma</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>greensboro</td>
      <td>4900</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>nc</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="transformacion-de-variables">
<h3><em><strong>3.2. Transformación de variables:</strong></em><a class="headerlink" href="#transformacion-de-variables" title="Link to this heading">#</a></h3>
<p>En esta sección se corregirá la tabulación de la variable <code class="docutils literal notranslate"><span class="pre">cylinders</span></code>. En el vistazo que se le hizo a la base de datos, se encontró que esta variable debe ser de naturaleza numérica, pero esta está digitada por catgorías, por lo que se corregirá la tabulación.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;cylinders&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([nan, &#39;8 cylinders&#39;, &#39;6 cylinders&#39;, &#39;4 cylinders&#39;, &#39;5 cylinders&#39;,
       &#39;other&#39;, &#39;3 cylinders&#39;, &#39;10 cylinders&#39;, &#39;12 cylinders&#39;],
      dtype=object)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columna</span><span class="p">):</span>
    <span class="n">conteo</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">columna</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">dropna</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">porcentaje</span> <span class="o">=</span> <span class="p">(</span><span class="n">conteo</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="n">tabla</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;Conteo&#39;</span><span class="p">:</span> <span class="n">conteo</span><span class="p">,</span>
        <span class="s1">&#39;Porcentaje (%)&#39;</span><span class="p">:</span> <span class="n">porcentaje</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="n">tabla</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;cylinders&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>NaN</th>
      <td>177678</td>
      <td>41.62</td>
    </tr>
    <tr>
      <th>6 cylinders</th>
      <td>94169</td>
      <td>22.06</td>
    </tr>
    <tr>
      <th>4 cylinders</th>
      <td>77642</td>
      <td>18.19</td>
    </tr>
    <tr>
      <th>8 cylinders</th>
      <td>72062</td>
      <td>16.88</td>
    </tr>
    <tr>
      <th>5 cylinders</th>
      <td>1712</td>
      <td>0.40</td>
    </tr>
    <tr>
      <th>10 cylinders</th>
      <td>1455</td>
      <td>0.34</td>
    </tr>
    <tr>
      <th>other</th>
      <td>1298</td>
      <td>0.30</td>
    </tr>
    <tr>
      <th>3 cylinders</th>
      <td>655</td>
      <td>0.15</td>
    </tr>
    <tr>
      <th>12 cylinders</th>
      <td>209</td>
      <td>0.05</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Note que efectivamene esta variable se encuentra digitada por categorías.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;other&#39;</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">]</span>
    <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\d+)&#39;</span><span class="p">)</span>   
    <span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>          
<span class="p">)</span>

<span class="n">df</span><span class="p">[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;Int64&#39;</span><span class="p">)</span>

<span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;cylinders&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>NaN</th>
      <td>178976</td>
      <td>41.93</td>
    </tr>
    <tr>
      <th>6</th>
      <td>94169</td>
      <td>22.06</td>
    </tr>
    <tr>
      <th>4</th>
      <td>77642</td>
      <td>18.19</td>
    </tr>
    <tr>
      <th>8</th>
      <td>72062</td>
      <td>16.88</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1712</td>
      <td>0.4</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1455</td>
      <td>0.34</td>
    </tr>
    <tr>
      <th>3</th>
      <td>655</td>
      <td>0.15</td>
    </tr>
    <tr>
      <th>12</th>
      <td>209</td>
      <td>0.05</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Para reescribir esta variable como una numérica, se tomó la categoría <code class="docutils literal notranslate"><span class="pre">other</span></code> como NA’s y se extrajo la palabra cylenders de cada categoría. Finalmente se le asignó el tipo de variable <code class="docutils literal notranslate"><span class="pre">int64</span></code>.</p>
</section>
<section id="identificacion-analisis-y-tratamiento-de-valores-faltantes">
<h3><em><strong>3.3. Identificación, análisis y tratamiento de valores faltantes</strong></em><a class="headerlink" href="#identificacion-analisis-y-tratamiento-de-valores-faltantes" title="Link to this heading">#</a></h3>
<p>Para iniciar con este análisis, procederemos a observar de forma gráfica la proporción de valores faltantes en cada variable, utilizando un mapa de calor.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),</span> <span class="n">cbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">yticklabels</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;plasma&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Mapa de calor de valores faltantes&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/72390c518a50b68cfb56a9c5e25281ca9030fbbc2b55ed96c3eff3fe5d8ea582.png" src="_images/72390c518a50b68cfb56a9c5e25281ca9030fbbc2b55ed96c3eff3fe5d8ea582.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">missing</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">missing</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Variable&quot;</span><span class="p">,</span> <span class="s2">&quot;Proporcion&quot;</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s2">&quot;Proporcion&quot;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;Variable&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">missing</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s2">&quot;coolwarm&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Proporción de valores faltantes por variable&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f47f303d0f2da77129bda27284e31c54c06cdbb6e90b8faa498f1d263c7b940e.png" src="_images/f47f303d0f2da77129bda27284e31c54c06cdbb6e90b8faa498f1d263c7b940e.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">resumen_faltantes</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">faltantes</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">porcentaje</span> <span class="o">=</span> <span class="p">(</span><span class="n">faltantes</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="n">tabla_faltantes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;Valores faltantes&#39;</span><span class="p">:</span> <span class="n">faltantes</span><span class="p">,</span>
        <span class="s1">&#39;Porcentaje (%)&#39;</span><span class="p">:</span> <span class="n">porcentaje</span>
    <span class="p">})</span>

    <span class="n">tabla_faltantes</span> <span class="o">=</span> <span class="n">tabla_faltantes</span><span class="p">[</span><span class="n">tabla_faltantes</span><span class="p">[</span><span class="s1">&#39;Valores faltantes&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>

    <span class="n">tabla_faltantes</span> <span class="o">=</span> <span class="n">tabla_faltantes</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Porcentaje (%)&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">tabla_faltantes</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_faltantes</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Valores faltantes</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>county</th>
      <td>426880</td>
      <td>100.000000</td>
    </tr>
    <tr>
      <th>size</th>
      <td>306361</td>
      <td>71.767476</td>
    </tr>
    <tr>
      <th>cylinders</th>
      <td>178976</td>
      <td>41.926537</td>
    </tr>
    <tr>
      <th>condition</th>
      <td>174104</td>
      <td>40.785232</td>
    </tr>
    <tr>
      <th>VIN</th>
      <td>161042</td>
      <td>37.725356</td>
    </tr>
    <tr>
      <th>drive</th>
      <td>130567</td>
      <td>30.586347</td>
    </tr>
    <tr>
      <th>paint_color</th>
      <td>130203</td>
      <td>30.501078</td>
    </tr>
    <tr>
      <th>type</th>
      <td>92858</td>
      <td>21.752717</td>
    </tr>
    <tr>
      <th>manufacturer</th>
      <td>17646</td>
      <td>4.133714</td>
    </tr>
    <tr>
      <th>title_status</th>
      <td>8242</td>
      <td>1.930753</td>
    </tr>
    <tr>
      <th>long</th>
      <td>6549</td>
      <td>1.534155</td>
    </tr>
    <tr>
      <th>lat</th>
      <td>6549</td>
      <td>1.534155</td>
    </tr>
    <tr>
      <th>model</th>
      <td>5277</td>
      <td>1.236179</td>
    </tr>
    <tr>
      <th>odometer</th>
      <td>4400</td>
      <td>1.030735</td>
    </tr>
    <tr>
      <th>fuel</th>
      <td>3013</td>
      <td>0.705819</td>
    </tr>
    <tr>
      <th>transmission</th>
      <td>2556</td>
      <td>0.598763</td>
    </tr>
    <tr>
      <th>year</th>
      <td>1205</td>
      <td>0.282281</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Al analizar los valores faltantes del dataset, se puede observar que algunas variables presentan un porcentaje considerable de datos ausentes, lo cual puede tener implicancias importantes en el análisis posterior. La variable con mayor cantidad de valores faltantes es <strong>“county”</strong>, con el 100% de los datos ausentes, por lo que resulta completamente inutilizable en su estado actual. Le siguen variables como <strong>“size”</strong>, <strong>“cylinders”</strong>, <strong>“condition”</strong>, y <strong>“VIN”</strong>, con proporciones de datos faltantes superiores al 30%, lo cual plantea un desafío importante en cuanto a imputación o posible eliminación, dependiendo del análisis que se quiera realizar. Otras variables como <strong>“drive”</strong>, <strong>“paint_color”</strong> y <strong>“type”</strong> también muestran una cantidad significativa de valores faltantes, aunque en menor medida. En contraste, hay variables como <strong>“year”</strong>, <strong>“transmission”</strong>, <strong>“fuel”</strong>, y <strong>“odometer”</strong> que presentan muy pocos valores faltantes (menos del 2%), por lo que podrían ser fácilmente imputadas sin generar un sesgo importante.</p>
</section>
<section id="eliminicacion-de-variables-country-y-size">
<h3><em><strong>3.3.1. Eliminicación de variables: <code class="docutils literal notranslate"><span class="pre">country</span></code> y <code class="docutils literal notranslate"><span class="pre">size</span></code>:</strong></em><a class="headerlink" href="#eliminicacion-de-variables-country-y-size" title="Link to this heading">#</a></h3>
<p>Dado el alto porcentaje de valores faltantes recurrimos a eliminar estas variables de nuestro análisis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s2">&quot;county&quot;</span><span class="p">,</span><span class="s2">&quot;size&quot;</span><span class="p">,</span><span class="s2">&quot;VIN&quot;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>region</th>
      <th>price</th>
      <th>year</th>
      <th>manufacturer</th>
      <th>model</th>
      <th>condition</th>
      <th>cylinders</th>
      <th>fuel</th>
      <th>odometer</th>
      <th>title_status</th>
      <th>transmission</th>
      <th>drive</th>
      <th>type</th>
      <th>paint_color</th>
      <th>state</th>
      <th>lat</th>
      <th>long</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>prescott</td>
      <td>6000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>&lt;NA&gt;</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>az</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>fayetteville</td>
      <td>11900</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>&lt;NA&gt;</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ar</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>florida keys</td>
      <td>21000</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>&lt;NA&gt;</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>fl</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>worcester / central MA</td>
      <td>1500</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>&lt;NA&gt;</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>ma</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>greensboro</td>
      <td>4900</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>&lt;NA&gt;</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>nc</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>A continuación, se analiza más de cerca sobre los valores faltantes en cada una de las variables.</p>
</section>
<section id="variables-con-un-rango-de-20-40-de-valores-faltantes">
<h3><em><strong>3.3.2. Variables con un rango de 20% - 40% de valores faltantes</strong></em><a class="headerlink" href="#variables-con-un-rango-de-20-40-de-valores-faltantes" title="Link to this heading">#</a></h3>
<p>Antes de iniciar con la imputación de los valores faltantes, se crea una copia del dataframe para luego poder comparar las distribuciones de cada varaible, antes y después de ser imputadas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<section id="cylinders">
<h4><em><strong>3.3.2.1. <code class="docutils literal notranslate"><span class="pre">cylinders:</span></code></strong></em><a class="headerlink" href="#cylinders" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;cylinders&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>NaN</th>
      <td>178976</td>
      <td>41.93</td>
    </tr>
    <tr>
      <th>6</th>
      <td>94169</td>
      <td>22.06</td>
    </tr>
    <tr>
      <th>4</th>
      <td>77642</td>
      <td>18.19</td>
    </tr>
    <tr>
      <th>8</th>
      <td>72062</td>
      <td>16.88</td>
    </tr>
    <tr>
      <th>5</th>
      <td>1712</td>
      <td>0.4</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1455</td>
      <td>0.34</td>
    </tr>
    <tr>
      <th>3</th>
      <td>655</td>
      <td>0.15</td>
    </tr>
    <tr>
      <th>12</th>
      <td>209</td>
      <td>0.05</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>La variable <strong>“cylinders”</strong> presenta un alto porcentaje de valores faltantes, con un 41.93% de los datos ausentes, lo cual representa una porción significativa del total del dataset y sugiere la necesidad de una estrategia cuidadosa para el tratamiento de estos valores. Entre las categorías presentes, la más común es la de vehículos con <strong>6 cilindros</strong>, representando el <strong>22.06%</strong>, seguida por los de <strong>4 cilindros</strong> con un <strong>18.19%</strong>, y los de <strong>8 cilindros</strong> con un <strong>16.88%</strong>. Estas tres categorías concentran la gran mayoría de los datos observados, lo que indica una clara preferencia o predominancia de motores con configuraciones comunes en el mercado. Las demás categorías, como los vehículos con <strong>5, 10, 3 y 13 cilindros</strong>, tienen una frecuencia muy baja, con porcentajes que no superan el 0.4%, por lo que podrían ser consideradas como casos poco representativos o incluso atípicos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">original</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s2">&quot;cylinders&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Se toma los valores originales de la variable a tratar.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">num_cols</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;int64&quot;</span><span class="p">,</span> <span class="s2">&quot;float64&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">other</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">num_cols</span> <span class="k">if</span> <span class="n">c</span> <span class="o">!=</span> <span class="s2">&quot;cylinders&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Primero, se seleccionan las columnas numéricas del DataFrame original, excluyendo específicamente la columna <code class="docutils literal notranslate"><span class="pre">&quot;cylinders&quot;</span></code>, ya que esa será la variable objetivo que se desea imputar. Se guardan en la lista <code class="docutils literal notranslate"><span class="pre">other</span></code> las demás columnas numéricas que podrían usarse como predictores para la imputación.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">imp</span> <span class="o">=</span> <span class="n">IterativeImputer</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="n">BayesianRidge</span><span class="p">(),</span> <span class="n">max_iter</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">X_imp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">imp</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_imputado</span><span class="p">[</span><span class="n">other</span><span class="p">]),</span> <span class="n">columns</span><span class="o">=</span><span class="n">other</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">df_imputado</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>A continuación, se utiliza un <code class="docutils literal notranslate"><span class="pre">IterativeImputer</span></code> con regresión bayesiana (<code class="docutils literal notranslate"><span class="pre">BayesianRidge</span></code>) como estimador para completar los valores faltantes en las columnas numéricas seleccionadas (excluyendo “cylinders”). El resultado es un nuevo DataFrame <code class="docutils literal notranslate"><span class="pre">X_imp</span></code>, con los valores imputados para todas las columnas predictoras.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">known</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s2">&quot;cylinders&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">notna</span><span class="p">()</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">known</span><span class="p">,</span> <span class="s2">&quot;cylinders&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="n">clf</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="n">clf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_imp</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">known</span><span class="p">],</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>#sk-container-id-1 {
  /* Definition of color scheme common for light and dark mode */
  --sklearn-color-text: #000;
  --sklearn-color-text-muted: #666;
  --sklearn-color-line: gray;
  /* Definition of color scheme for unfitted estimators */
  --sklearn-color-unfitted-level-0: #fff5e6;
  --sklearn-color-unfitted-level-1: #f6e4d2;
  --sklearn-color-unfitted-level-2: #ffe0b3;
  --sklearn-color-unfitted-level-3: chocolate;
  /* Definition of color scheme for fitted estimators */
  --sklearn-color-fitted-level-0: #f0f8ff;
  --sklearn-color-fitted-level-1: #d4ebff;
  --sklearn-color-fitted-level-2: #b3dbfd;
  --sklearn-color-fitted-level-3: cornflowerblue;

  /* Specific color for light theme */
  --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, white)));
  --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, black)));
  --sklearn-color-icon: #696969;

  @media (prefers-color-scheme: dark) {
    /* Redefinition of color scheme for dark theme */
    --sklearn-color-text-on-default-background: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-background: var(--sg-background-color, var(--theme-background, var(--jp-layout-color0, #111)));
    --sklearn-color-border-box: var(--sg-text-color, var(--theme-code-foreground, var(--jp-content-font-color1, white)));
    --sklearn-color-icon: #878787;
  }
}

#sk-container-id-1 {
  color: var(--sklearn-color-text);
}

#sk-container-id-1 pre {
  padding: 0;
}

#sk-container-id-1 input.sk-hidden--visually {
  border: 0;
  clip: rect(1px 1px 1px 1px);
  clip: rect(1px, 1px, 1px, 1px);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

#sk-container-id-1 div.sk-dashed-wrapped {
  border: 1px dashed var(--sklearn-color-line);
  margin: 0 0.4em 0.5em 0.4em;
  box-sizing: border-box;
  padding-bottom: 0.4em;
  background-color: var(--sklearn-color-background);
}

#sk-container-id-1 div.sk-container {
  /* jupyter's `normalize.less` sets `[hidden] { display: none; }`
     but bootstrap.min.css set `[hidden] { display: none !important; }`
     so we also need the `!important` here to be able to override the
     default hidden behavior on the sphinx rendered scikit-learn.org.
     See: https://github.com/scikit-learn/scikit-learn/issues/21755 */
  display: inline-block !important;
  position: relative;
}

#sk-container-id-1 div.sk-text-repr-fallback {
  display: none;
}

div.sk-parallel-item,
div.sk-serial,
div.sk-item {
  /* draw centered vertical line to link estimators */
  background-image: linear-gradient(var(--sklearn-color-text-on-default-background), var(--sklearn-color-text-on-default-background));
  background-size: 2px 100%;
  background-repeat: no-repeat;
  background-position: center center;
}

/* Parallel-specific style estimator block */

#sk-container-id-1 div.sk-parallel-item::after {
  content: "";
  width: 100%;
  border-bottom: 2px solid var(--sklearn-color-text-on-default-background);
  flex-grow: 1;
}

#sk-container-id-1 div.sk-parallel {
  display: flex;
  align-items: stretch;
  justify-content: center;
  background-color: var(--sklearn-color-background);
  position: relative;
}

#sk-container-id-1 div.sk-parallel-item {
  display: flex;
  flex-direction: column;
}

#sk-container-id-1 div.sk-parallel-item:first-child::after {
  align-self: flex-end;
  width: 50%;
}

#sk-container-id-1 div.sk-parallel-item:last-child::after {
  align-self: flex-start;
  width: 50%;
}

#sk-container-id-1 div.sk-parallel-item:only-child::after {
  width: 0;
}

/* Serial-specific style estimator block */

#sk-container-id-1 div.sk-serial {
  display: flex;
  flex-direction: column;
  align-items: center;
  background-color: var(--sklearn-color-background);
  padding-right: 1em;
  padding-left: 1em;
}


/* Toggleable style: style used for estimator/Pipeline/ColumnTransformer box that is
clickable and can be expanded/collapsed.
- Pipeline and ColumnTransformer use this feature and define the default style
- Estimators will overwrite some part of the style using the `sk-estimator` class
*/

/* Pipeline and ColumnTransformer style (default) */

#sk-container-id-1 div.sk-toggleable {
  /* Default theme specific background. It is overwritten whether we have a
  specific estimator or a Pipeline/ColumnTransformer */
  background-color: var(--sklearn-color-background);
}

/* Toggleable label */
#sk-container-id-1 label.sk-toggleable__label {
  cursor: pointer;
  display: flex;
  width: 100%;
  margin-bottom: 0;
  padding: 0.5em;
  box-sizing: border-box;
  text-align: center;
  align-items: start;
  justify-content: space-between;
  gap: 0.5em;
}

#sk-container-id-1 label.sk-toggleable__label .caption {
  font-size: 0.6rem;
  font-weight: lighter;
  color: var(--sklearn-color-text-muted);
}

#sk-container-id-1 label.sk-toggleable__label-arrow:before {
  /* Arrow on the left of the label */
  content: "▸";
  float: left;
  margin-right: 0.25em;
  color: var(--sklearn-color-icon);
}

#sk-container-id-1 label.sk-toggleable__label-arrow:hover:before {
  color: var(--sklearn-color-text);
}

/* Toggleable content - dropdown */

#sk-container-id-1 div.sk-toggleable__content {
  max-height: 0;
  max-width: 0;
  overflow: hidden;
  text-align: left;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content pre {
  margin: 0.2em;
  border-radius: 0.25em;
  color: var(--sklearn-color-text);
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-toggleable__content.fitted pre {
  /* unfitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

#sk-container-id-1 input.sk-toggleable__control:checked~div.sk-toggleable__content {
  /* Expand drop-down */
  max-height: 200px;
  max-width: 100%;
  overflow: auto;
}

#sk-container-id-1 input.sk-toggleable__control:checked~label.sk-toggleable__label-arrow:before {
  content: "▾";
}

/* Pipeline/ColumnTransformer-specific style */

#sk-container-id-1 div.sk-label input.sk-toggleable__control:checked~label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-label.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator-specific style */

/* Colorize estimator box */
#sk-container-id-1 div.sk-estimator input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-estimator.fitted input.sk-toggleable__control:checked~label.sk-toggleable__label {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

#sk-container-id-1 div.sk-label label.sk-toggleable__label,
#sk-container-id-1 div.sk-label label {
  /* The background is the default theme color */
  color: var(--sklearn-color-text-on-default-background);
}

/* On hover, darken the color of the background */
#sk-container-id-1 div.sk-label:hover label.sk-toggleable__label {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-unfitted-level-2);
}

/* Label box, darken color on hover, fitted */
#sk-container-id-1 div.sk-label.fitted:hover label.sk-toggleable__label.fitted {
  color: var(--sklearn-color-text);
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Estimator label */

#sk-container-id-1 div.sk-label label {
  font-family: monospace;
  font-weight: bold;
  display: inline-block;
  line-height: 1.2em;
}

#sk-container-id-1 div.sk-label-container {
  text-align: center;
}

/* Estimator-specific */
#sk-container-id-1 div.sk-estimator {
  font-family: monospace;
  border: 1px dotted var(--sklearn-color-border-box);
  border-radius: 0.25em;
  box-sizing: border-box;
  margin-bottom: 0.5em;
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-0);
}

#sk-container-id-1 div.sk-estimator.fitted {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-0);
}

/* on hover */
#sk-container-id-1 div.sk-estimator:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-2);
}

#sk-container-id-1 div.sk-estimator.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-2);
}

/* Specification for estimator info (e.g. "i" and "?") */

/* Common style for "i" and "?" */

.sk-estimator-doc-link,
a:link.sk-estimator-doc-link,
a:visited.sk-estimator-doc-link {
  float: right;
  font-size: smaller;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1em;
  height: 1em;
  width: 1em;
  text-decoration: none !important;
  margin-left: 0.5em;
  text-align: center;
  /* unfitted */
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
  color: var(--sklearn-color-unfitted-level-1);
}

.sk-estimator-doc-link.fitted,
a:link.sk-estimator-doc-link.fitted,
a:visited.sk-estimator-doc-link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
div.sk-estimator:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover,
div.sk-label-container:hover .sk-estimator-doc-link:hover,
.sk-estimator-doc-link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

div.sk-estimator.fitted:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover,
div.sk-label-container:hover .sk-estimator-doc-link.fitted:hover,
.sk-estimator-doc-link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

/* Span, style for the box shown on hovering the info icon */
.sk-estimator-doc-link span {
  display: none;
  z-index: 9999;
  position: relative;
  font-weight: normal;
  right: .2ex;
  padding: .5ex;
  margin: .5ex;
  width: min-content;
  min-width: 20ex;
  max-width: 50ex;
  color: var(--sklearn-color-text);
  box-shadow: 2pt 2pt 4pt #999;
  /* unfitted */
  background: var(--sklearn-color-unfitted-level-0);
  border: .5pt solid var(--sklearn-color-unfitted-level-3);
}

.sk-estimator-doc-link.fitted span {
  /* fitted */
  background: var(--sklearn-color-fitted-level-0);
  border: var(--sklearn-color-fitted-level-3);
}

.sk-estimator-doc-link:hover span {
  display: block;
}

/* "?"-specific style due to the `<a>` HTML tag */

#sk-container-id-1 a.estimator_doc_link {
  float: right;
  font-size: 1rem;
  line-height: 1em;
  font-family: monospace;
  background-color: var(--sklearn-color-background);
  border-radius: 1rem;
  height: 1rem;
  width: 1rem;
  text-decoration: none;
  /* unfitted */
  color: var(--sklearn-color-unfitted-level-1);
  border: var(--sklearn-color-unfitted-level-1) 1pt solid;
}

#sk-container-id-1 a.estimator_doc_link.fitted {
  /* fitted */
  border: var(--sklearn-color-fitted-level-1) 1pt solid;
  color: var(--sklearn-color-fitted-level-1);
}

/* On hover */
#sk-container-id-1 a.estimator_doc_link:hover {
  /* unfitted */
  background-color: var(--sklearn-color-unfitted-level-3);
  color: var(--sklearn-color-background);
  text-decoration: none;
}

#sk-container-id-1 a.estimator_doc_link.fitted:hover {
  /* fitted */
  background-color: var(--sklearn-color-fitted-level-3);
}
</style><div id="sk-container-id-1" class="sk-top-container"><div class="sk-text-repr-fallback"><pre>RandomForestClassifier(n_estimators=200, random_state=42)</pre><b>In a Jupyter environment, please rerun this cell to show the HTML representation or trust the notebook. <br />On GitHub, the HTML representation is unable to render, please try loading this page with nbviewer.org.</b></div><div class="sk-container" hidden><div class="sk-item"><div class="sk-estimator fitted sk-toggleable"><input class="sk-toggleable__control sk-hidden--visually" id="sk-estimator-id-1" type="checkbox" checked><label for="sk-estimator-id-1" class="sk-toggleable__label fitted sk-toggleable__label-arrow"><div><div>RandomForestClassifier</div></div><div><a class="sk-estimator-doc-link fitted" rel="noreferrer" target="_blank" href="https://scikit-learn.org/1.6/modules/generated/sklearn.ensemble.RandomForestClassifier.html">?<span>Documentation for RandomForestClassifier</span></a><span class="sk-estimator-doc-link fitted">i<span>Fitted</span></span></div></label><div class="sk-toggleable__content fitted"><pre>RandomForestClassifier(n_estimators=200, random_state=42)</pre></div> </div></div></div></div></div></div>
</div>
<p>Luego se define el conjunto de datos conocidos (aquellos donde “cylinders” no es nulo) y se extrae el vector objetivo <code class="docutils literal notranslate"><span class="pre">y</span></code>, que contiene los valores de cilindros convertidos a enteros. Posteriormente, se entrena un modelo de clasificación con un <code class="docutils literal notranslate"><span class="pre">RandomForestClassifier</span></code>, usando 200 árboles y una semilla aleatoria para reproducibilidad. Este modelo se ajusta con las variables predictoras (<code class="docutils literal notranslate"><span class="pre">X_imp</span></code>) y el vector objetivo <code class="docutils literal notranslate"><span class="pre">y</span></code>, solo sobre las filas conocidas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">missing</span> <span class="o">=</span> <span class="o">~</span><span class="n">known</span>
<span class="n">proba</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_imp</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">missing</span><span class="p">])</span>
<span class="n">classes</span> <span class="o">=</span> <span class="n">clf</span><span class="o">.</span><span class="n">classes_</span>

<span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>
<span class="n">samples</span> <span class="o">=</span> <span class="p">[</span><span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">classes</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">proba</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Una vez entrenado el modelo, se predicen las probabilidades de clase para los casos en los que el número de cilindros es desconocido (filas con valores faltantes). Se extraen también las clases posibles del modelo. Luego, utilizando una semilla aleatoria, se realiza una selección aleatoria ponderada (sampling) sobre esas probabilidades para elegir una clase por fila, respetando la distribución probabilística dada por el modelo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">missing</span><span class="p">,</span> <span class="s2">&quot;cylinders&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">samples</span>
<span class="n">df_imputado</span><span class="p">[</span><span class="s2">&quot;cylinders&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s2">&quot;cylinders&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;Int64&quot;</span><span class="p">)</span>

<span class="c1"># Serie con la columna imputada</span>
<span class="n">imputados</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s2">&quot;cylinders&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Se asignan los valores imputados a las filas faltantes de la columna “cylinders”, y se asegura que toda la columna sea del tipo entero. El resultado final se guarda en la variable <code class="docutils literal notranslate"><span class="pre">imputados</span></code>, que contiene la columna completa de cilindros, ya sin valores faltantes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hay_na</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;¿Hay NA en columnas imputadas? </span><span class="si">{</span><span class="n">hay_na</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">na_por_col</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conteo de NA por columna imputada:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">na_por_col</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>¿Hay NA en columnas imputadas? False
Conteo de NA por columna imputada:
0
</pre></div>
</div>
</div>
</div>
<p>Finalmente se observa que la columna <code class="docutils literal notranslate"><span class="pre">cylinders</span></code> ya no tiene valores faltantes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">comparar_imputacion</span><span class="p">(</span><span class="n">original</span><span class="p">,</span> <span class="n">imputada</span><span class="p">,</span> <span class="n">variable_name</span><span class="o">=</span><span class="s1">&#39;Variable&#39;</span><span class="p">):</span>
    
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">original</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">variable_name</span><span class="si">}</span><span class="s1"> - Original (sin NaNs)&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">variable_name</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">imputada</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;salmon&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">variable_name</span><span class="si">}</span><span class="s1"> - Imputada&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">variable_name</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comparar_imputacion</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">],</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;cylinders&#39;</span><span class="p">],</span> <span class="n">variable_name</span><span class="o">=</span><span class="s1">&#39;cylkinders&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/03ba1bc0debc7b6bc60236b50e3889c22dd691a55740f0779164a0f7aef5ed52.png" src="_images/03ba1bc0debc7b6bc60236b50e3889c22dd691a55740f0779164a0f7aef5ed52.png" />
</div>
</div>
<p>En la visualización se comparan las distribuciones de la variable <strong>“cylinders”</strong> antes y después del proceso de imputación. En el gráfico de la izquierda se observa la distribución original de los datos sin valores nulos, donde predominan claramente tres categorías: 4, 6 y 8 cilindros, con picos muy marcados que reflejan su alta frecuencia en el conjunto de datos. En el gráfico de la derecha, que muestra los datos una vez imputados, se puede apreciar que la distribución general se ha mantenido prácticamente idéntica. Esto indica que el modelo de imputación basado en Random Forest logró preservar la estructura original de la variable, asignando valores faltantes de manera coherente con las tendencias observadas. La similitud entre ambas distribuciones sugiere que el modelo no introdujo sesgos significativos ni distorsiones en la frecuencia de cada categoría. En general, la imputación fue exitosa, ya que respetó las proporciones naturales de los datos conocidos y completó la variable de forma realista.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">chi2_contingency</span>

<span class="n">dist_original</span> <span class="o">=</span> <span class="n">original</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
<span class="n">dist_imputada</span> <span class="o">=</span> <span class="n">imputados</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

<span class="n">contingencia</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
    <span class="p">[</span><span class="n">dist_original</span><span class="p">,</span> <span class="n">dist_imputada</span><span class="p">],</span> 
    <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
    <span class="n">keys</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Original&quot;</span><span class="p">,</span> <span class="s2">&quot;Imputado&quot;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="n">chi2</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">dof</span><span class="p">,</span> <span class="n">expected</span> <span class="o">=</span> <span class="n">chi2_contingency</span><span class="p">(</span><span class="n">contingencia</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Chi² = </span><span class="si">{</span><span class="n">chi2</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, p-valor = </span><span class="si">{</span><span class="n">p</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Chi² = 188.607, p-valor = 0.0000
</pre></div>
</div>
</div>
</div>
<p><strong>Interpretación de la prueba Chi-cuadrado</strong></p>
<p>La prueba <strong>Chi-cuadrado de homogeneidad</strong> se utilizó para comparar la distribución original de la variable <em>cylinders</em> con la distribución obtenida tras la imputación.</p>
<ul class="simple">
<li><p><strong>Hipótesis nula (H₀):</strong> no hay diferencia entre ambas distribuciones.</p></li>
<li><p><strong>Hipótesis alternativa (H₁):</strong> existe diferencia entre las distribuciones.</p></li>
</ul>
<p>En este análisis se obtuvo:<br />
chi^2 = 192.491, p-value = 0</p>
<p>Esto significa que se <strong>rechaza la hipótesis nula</strong> y se concluye que existen diferencias estadísticamente significativas entre las distribuciones.</p>
<p>Sin embargo, debido al <strong>tamaño de la muestra</strong>, el test puede detectar como significativas diferencias muy pequeñas. Por esta razón, se complementa con otras métricas (Jensen–Shannon y KL), que muestran que, a pesar de la significancia estadística, las distribuciones son <strong>prácticamente equivalentes en la práctica</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.spatial.distance</span><span class="w"> </span><span class="kn">import</span> <span class="n">jensenshannon</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">entropy</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">dist_original</span> <span class="o">/</span> <span class="n">dist_original</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">dist_imputada</span> <span class="o">/</span> <span class="n">dist_imputada</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="n">p</span><span class="p">,</span> <span class="n">q</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">align</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(</span><span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

<span class="n">epsilon</span> <span class="o">=</span> <span class="mf">1e-10</span>
<span class="n">p</span> <span class="o">+=</span> <span class="n">epsilon</span>
<span class="n">q</span> <span class="o">+=</span> <span class="n">epsilon</span>

<span class="n">p</span> <span class="o">/=</span> <span class="n">p</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">q</span> <span class="o">/=</span> <span class="n">q</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="n">jsd</span> <span class="o">=</span> <span class="n">jensenshannon</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Jensen-Shannon distance = </span><span class="si">{</span><span class="n">jsd</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">kl_pq</span> <span class="o">=</span> <span class="n">entropy</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">q</span><span class="p">)</span>   <span class="c1"># KL(p || q)</span>
<span class="n">kl_qp</span> <span class="o">=</span> <span class="n">entropy</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>   <span class="c1"># KL(q || p)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;KL(p||q) = </span><span class="si">{</span><span class="n">kl_pq</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">, KL(q||p) = </span><span class="si">{</span><span class="n">kl_qp</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Jensen-Shannon distance = 0.0123
KL(p||q) = 0.0006, KL(q||p) = 0.0006
</pre></div>
</div>
</div>
</div>
<p><strong>Evaluación de la similitud entre distribuciones</strong></p>
<p>Además de la prueba Chi-cuadrado, se calcularon métricas de divergencia entre la distribución original de la variable <em>cylinders</em> y la distribución obtenida después de la imputación. Estas métricas permiten cuantificar cuán parecidas son ambas distribuciones, más allá de la significancia estadística.</p>
<p><em><strong>Jensen–Shannon Distance (JSD)</strong></em></p>
<p>La <strong>Jensen–Shannon Distance</strong> es una medida de similitud entre dos distribuciones de probabilidad.</p>
<ul class="simple">
<li><p>Su valor está acotado entre <strong>0 y 1</strong>.</p></li>
<li><p><strong>0</strong> indica que las distribuciones son idénticas.</p></li>
<li><p>Valores pequeños (ej. &lt; 0.05) indican que las distribuciones son <strong>muy similares</strong>.</p></li>
</ul>
<p>el resultado obternido sugiere que la distribución de la variable imputada es prácticamente indistinguible de la original.</p>
<hr class="docutils" />
<p><em><strong>Kullback–Leibler Divergence (KL)</strong></em></p>
<p>La <strong>divergencia de Kullback–Leibler (KL)</strong> mide la diferencia entre dos distribuciones de probabilidad desde el punto de vista de la información.</p>
<ul class="simple">
<li><p>KL(p‖q) indica cuánta información se pierde al aproximar la distribución original (<em>p</em>) con la imputada (<em>q</em>).</p></li>
<li><p>KL(q‖p) mide lo contrario.</p></li>
<li><p>El valor mínimo es <strong>0</strong>, que implica distribuciones idénticas.</p></li>
<li><p>Valores más grandes indican mayor diferencia.</p></li>
</ul>
<p>En nuestro caso los valores obtenidos son muy cercanos a cero, lo que indica que las distribuciones son prácticamente equivalentes en términos de información.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">comparar_categoricas</span><span class="p">(</span><span class="n">df_original</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">columnas</span><span class="p">):</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
        
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">df_original</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">order</span><span class="o">=</span><span class="n">df_original</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> - Original (con NA)&quot;</span><span class="p">)</span>
        
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">order</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> - Después de imputar&quot;</span><span class="p">)</span>
        
        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Esta función ayuda a comparar dos dsitribuciones gráficamente, específicamente para comprobar las distribuciones de una variable antes y depués de imputar los datos faltantes.</p>
</section>
<section id="condition">
<h4><em><strong>3.3.2.2. <code class="docutils literal notranslate"><span class="pre">condition:</span></code></strong></em><a class="headerlink" href="#condition" title="Link to this heading">#</a></h4>
<p>En primer lugar, se observa la proporción de cada categoría según el total de los datos de la variable <code class="docutils literal notranslate"><span class="pre">condition</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;condition&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>NaN</th>
      <td>174104</td>
      <td>40.79</td>
    </tr>
    <tr>
      <th>good</th>
      <td>121456</td>
      <td>28.45</td>
    </tr>
    <tr>
      <th>excellent</th>
      <td>101467</td>
      <td>23.77</td>
    </tr>
    <tr>
      <th>like new</th>
      <td>21178</td>
      <td>4.96</td>
    </tr>
    <tr>
      <th>fair</th>
      <td>6769</td>
      <td>1.59</td>
    </tr>
    <tr>
      <th>new</th>
      <td>1305</td>
      <td>0.31</td>
    </tr>
    <tr>
      <th>salvage</th>
      <td>601</td>
      <td>0.14</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Note que la categoría con mayor proporción es <code class="docutils literal notranslate"><span class="pre">NaN</span></code>, es decir, los valores faltantes.</p>
<p>Como <code class="docutils literal notranslate"><span class="pre">condition</span></code> es una variable categórica politómica y los datos faltantes representan más del 40%, se toman los datos faltantes como una categoría con el fin de no perder la información y se decide no imputar porque podría generar overfiting.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;condition&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;condition&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s2">&quot;condition_missing&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Se verifica que la nueva categoría se haya creado correctamente y no existan más valores faltantes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hay_na</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;condition&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;¿Hay NA en columnas imputadas? </span><span class="si">{</span><span class="n">hay_na</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">na_por_col</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;condition&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conteo de NA por columna imputada:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">na_por_col</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>¿Hay NA en columnas imputadas? False
Conteo de NA por columna imputada:
0
</pre></div>
</div>
</div>
</div>
<p>Efectivamente se realizó correctamente el proceso de creación de la nueva categoría.</p>
<p>Entonces observemos como cambia la distribución de la variable antes y después de la imputación.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comparar_categoricas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;condition&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/b8c262675a450a3f76077214f668154d2d62eeb9e093465b8228bb9f6908efdb.png" src="_images/b8c262675a450a3f76077214f668154d2d62eeb9e093465b8228bb9f6908efdb.png" />
</div>
</div>
<p>En esta gráfica se compara la distribución de la variable categórica <strong><code class="docutils literal notranslate"><span class="pre">condition</span></code></strong> antes y después del proceso de imputación de valores faltantes. En el gráfico de la izquierda, correspondiente a los datos originales, se observa que la categoría predominante es <strong>“good”</strong>, seguida por <strong>“excellent”</strong> y <strong>“like new”</strong>, mientras que algunas observaciones presentan valores ausentes (NA). Tras la imputación, como se muestra en el gráfico de la derecha, se introduce explícitamente una nueva categoría llamada <strong>“condition_missing”</strong> para representar los datos que originalmente estaban ausentes, lo que permite conservar la información sobre la falta de datos sin eliminar registros. Además, se mantiene la misma jerarquía en las frecuencias de las otras categorías, aunque se evidencia un incremento en la frecuencia total, como resultado del tratamiento de los valores faltantes.</p>
</section>
<section id="drive">
<h4><em><strong>3.3.2.3. <code class="docutils literal notranslate"><span class="pre">drive:</span></code></strong></em><a class="headerlink" href="#drive" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;drive&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4wd</th>
      <td>131904</td>
      <td>30.90</td>
    </tr>
    <tr>
      <th>NaN</th>
      <td>130567</td>
      <td>30.59</td>
    </tr>
    <tr>
      <th>fwd</th>
      <td>105517</td>
      <td>24.72</td>
    </tr>
    <tr>
      <th>rwd</th>
      <td>58892</td>
      <td>13.80</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Se utiliza la función <code class="docutils literal notranslate"><span class="pre">resumen_categorias</span></code> para analizar la variable categórica <code class="docutils literal notranslate"><span class="pre">drive</span></code> dentro del DataFrame <code class="docutils literal notranslate"><span class="pre">df</span></code>. El resultado muestra un conteo y el porcentaje de ocurrencia de cada categoría presente en esta variable. Se observa que hay un valor ausente (<code class="docutils literal notranslate"><span class="pre">NaN</span></code>) que representa el 30.59% del total, casi igual al porcentaje de la categoría más frecuente, <code class="docutils literal notranslate"><span class="pre">4wd</span></code>, que representa el 30.90%. Esto sugiere que una gran proporción de los datos está incompleta en esta variable, lo que justifica la necesidad de una estrategia de imputación.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">imputar_por_moda</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_copy</span><span class="p">,</span> <span class="n">columnas</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas</span><span class="p">:</span>
        <span class="n">moda</span> <span class="o">=</span> <span class="n">df_copy</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">mode</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">moda</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
            <span class="n">df_copy</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">moda</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Advertencia: La columna </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> está vacía o no tiene moda.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df_copy</span>
</pre></div>
</div>
</div>
</div>
<p>Ahora se define una función llamada <code class="docutils literal notranslate"><span class="pre">imputar_por_moda</span></code> que permite reemplazar los valores nulos en una o más columnas categóricas usando la moda (el valor más frecuente) como criterio de imputación. Esta función toma como entrada el DataFrame original (<code class="docutils literal notranslate"><span class="pre">df</span></code>), una copia del mismo (<code class="docutils literal notranslate"><span class="pre">df_copy</span></code>) y una lista de nombres de columnas a imputar. Para cada columna indicada, se calcula la moda; si existe, se rellena con ese valor, y si no hay moda (por ejemplo, si la columna está vacía), se muestra una advertencia. Finalmente, la función devuelve el DataFrame modificado.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;drive&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;drive&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s2">&quot;drive_missing&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Luego se aplica una imputación directa a la columna <code class="docutils literal notranslate"><span class="pre">drive</span></code> del DataFrame <code class="docutils literal notranslate"><span class="pre">df_imputado</span></code>, rellenando los valores nulos con una nueva categoría llamada <code class="docutils literal notranslate"><span class="pre">&quot;drive_missing&quot;</span></code>. Esta técnica de imputación permite conservar la información sobre la ausencia de datos sin recurrir a la eliminación de registros ni a una suposición sobre el valor ausente, como podría ser el uso de la moda.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hay_na</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;drive&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;¿Hay NA en columnas imputadas? </span><span class="si">{</span><span class="n">hay_na</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">na_por_col</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;drive&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conteo de NA por columna imputada:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">na_por_col</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>¿Hay NA en columnas imputadas? False
Conteo de NA por columna imputada:
0
</pre></div>
</div>
</div>
</div>
<p>Y se verifica que la imputación realizada en la columna <code class="docutils literal notranslate"><span class="pre">drive</span></code> fue exitosa. Primero, se evalúa si aún existen valores nulos en la columna mediante la función <code class="docutils literal notranslate"><span class="pre">isnull().values.any()</span></code>, lo cual devuelve <code class="docutils literal notranslate"><span class="pre">False</span></code>, indicando que no hay valores ausentes. Luego, se cuenta explícitamente la cantidad de valores nulos restantes con <code class="docutils literal notranslate"><span class="pre">isnull().sum()</span></code>, que arroja como resultado 0. Esto confirma que todos los valores <code class="docutils literal notranslate"><span class="pre">NaN</span></code> en la columna fueron reemplazados correctamente durante el proceso de imputación.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">comparar_categoricas</span><span class="p">(</span><span class="n">df_original</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">columnas</span><span class="p">):</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
        
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">df_original</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">order</span><span class="o">=</span><span class="n">df_original</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> - Original (con NA)&quot;</span><span class="p">)</span>
        
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">order</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> - Después de imputar&quot;</span><span class="p">)</span>
        
        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Se define una función que permite visualizar comparativamente la distribución de variables categóricas antes y después de realizar una imputación.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comparar_categoricas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;drive&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/efa360f83085bf64ad47a347c67413e1f3f3bcd1b2de4d26ab616a9af702dff6.png" src="_images/efa360f83085bf64ad47a347c67413e1f3f3bcd1b2de4d26ab616a9af702dff6.png" />
</div>
</div>
<p>Se realiza una comparación gráfica de la variable <code class="docutils literal notranslate"><span class="pre">drive</span></code> utilizando la función anterior. En el gráfico izquierdo se muestra la distribución original, donde las categorías <code class="docutils literal notranslate"><span class="pre">4wd</span></code>, <code class="docutils literal notranslate"><span class="pre">fwd</span></code> y <code class="docutils literal notranslate"><span class="pre">rwd</span></code> son visibles, sin que se representen los valores faltantes de forma explícita. En el gráfico derecho, correspondiente al DataFrame imputado, se observa una nueva categoría denominada <code class="docutils literal notranslate"><span class="pre">drive_missing</span></code>, que agrupa los registros que originalmente tenían valores nulos. La distribución general de las categorías principales se conserva, lo que sugiere que la imputación se realizó de forma controlada, sin afectar sustancialmente la estructura original de los datos.</p>
</section>
<section id="paint-color">
<h4><em><strong>3.3.2.4. <code class="docutils literal notranslate"><span class="pre">paint_color:</span></code></strong></em><a class="headerlink" href="#paint-color" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;paint_color&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>NaN</th>
      <td>130203</td>
      <td>30.50</td>
    </tr>
    <tr>
      <th>white</th>
      <td>79285</td>
      <td>18.57</td>
    </tr>
    <tr>
      <th>black</th>
      <td>62861</td>
      <td>14.73</td>
    </tr>
    <tr>
      <th>silver</th>
      <td>42970</td>
      <td>10.07</td>
    </tr>
    <tr>
      <th>blue</th>
      <td>31223</td>
      <td>7.31</td>
    </tr>
    <tr>
      <th>red</th>
      <td>30473</td>
      <td>7.14</td>
    </tr>
    <tr>
      <th>grey</th>
      <td>24416</td>
      <td>5.72</td>
    </tr>
    <tr>
      <th>green</th>
      <td>7343</td>
      <td>1.72</td>
    </tr>
    <tr>
      <th>custom</th>
      <td>6700</td>
      <td>1.57</td>
    </tr>
    <tr>
      <th>brown</th>
      <td>6593</td>
      <td>1.54</td>
    </tr>
    <tr>
      <th>yellow</th>
      <td>2142</td>
      <td>0.50</td>
    </tr>
    <tr>
      <th>orange</th>
      <td>1984</td>
      <td>0.46</td>
    </tr>
    <tr>
      <th>purple</th>
      <td>687</td>
      <td>0.16</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Los datos muestran una cantidad considerable de valores ausentes (NaN), que representan aproximadamente el 30.23 % del total, superando incluso a la categoría más frecuente, <code class="docutils literal notranslate"><span class="pre">white</span></code>. Esta observación pone en evidencia la necesidad de tratar los valores faltantes antes de continuar con el análisis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;paint_color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;paint_color&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s2">&quot;paint_missing&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Auí se imputanlos datos. Esta imputación de los valores nulos en la columna <code class="docutils literal notranslate"><span class="pre">paint_color</span></code> consiste en asignarles una nueva categoría denominada <code class="docutils literal notranslate"><span class="pre">&quot;paint_missing&quot;</span></code>, lo que permite conservar la información sobre la ausencia de datos sin asumir valores arbitrarios ni eliminar registros del conjunto, lo cual resulta útil para mantener la integridad del análisis posterior.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hay_na</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;paint_color&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;¿Hay NA en columnas imputadas? </span><span class="si">{</span><span class="n">hay_na</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">na_por_col</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;paint_color&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conteo de NA por columna imputada:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">na_por_col</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>¿Hay NA en columnas imputadas? False
Conteo de NA por columna imputada:
0
</pre></div>
</div>
</div>
</div>
<p>El resultado indica que no existe ningún valor faltante y que la cantidad de datos ausentes es cero. Esto confirma que el reemplazo fue aplicado correctamente y no quedaron valores sin imputar.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comparar_categoricas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;paint_color&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/da9516c5bc3ebcb7dbdbec4ee8206ad3a47a5b9dc26cc4892b39389e02e54bf0.png" src="_images/da9516c5bc3ebcb7dbdbec4ee8206ad3a47a5b9dc26cc4892b39389e02e54bf0.png" />
</div>
</div>
<p>La visualización final muestra la comparación entre la distribución original de la variable <code class="docutils literal notranslate"><span class="pre">paint_color</span></code> y la distribución obtenida tras la imputación. En la versión original no aparece una categoría específica para los valores faltantes, mientras que en la versión modificada ya figura <code class="docutils literal notranslate"><span class="pre">&quot;paint_missing&quot;</span></code> como una nueva clase. El resto de las categorías mantiene proporciones similares, lo cual indica que la estructura general de la variable no fue alterada de manera significativa.</p>
</section>
<section id="type">
<h4><em><strong>3.3.2.5. <code class="docutils literal notranslate"><span class="pre">type:</span></code></strong></em><a class="headerlink" href="#type" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>NaN</th>
      <td>92858</td>
      <td>21.75</td>
    </tr>
    <tr>
      <th>sedan</th>
      <td>87056</td>
      <td>20.39</td>
    </tr>
    <tr>
      <th>SUV</th>
      <td>77284</td>
      <td>18.10</td>
    </tr>
    <tr>
      <th>pickup</th>
      <td>43510</td>
      <td>10.19</td>
    </tr>
    <tr>
      <th>truck</th>
      <td>35279</td>
      <td>8.26</td>
    </tr>
    <tr>
      <th>other</th>
      <td>22110</td>
      <td>5.18</td>
    </tr>
    <tr>
      <th>coupe</th>
      <td>19204</td>
      <td>4.50</td>
    </tr>
    <tr>
      <th>hatchback</th>
      <td>16598</td>
      <td>3.89</td>
    </tr>
    <tr>
      <th>wagon</th>
      <td>10751</td>
      <td>2.52</td>
    </tr>
    <tr>
      <th>van</th>
      <td>8548</td>
      <td>2.00</td>
    </tr>
    <tr>
      <th>convertible</th>
      <td>7731</td>
      <td>1.81</td>
    </tr>
    <tr>
      <th>mini-van</th>
      <td>4825</td>
      <td>1.13</td>
    </tr>
    <tr>
      <th>offroad</th>
      <td>609</td>
      <td>0.14</td>
    </tr>
    <tr>
      <th>bus</th>
      <td>517</td>
      <td>0.12</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>La variable categórica <code class="docutils literal notranslate"><span class="pre">type</span></code> muestra una distribución encabezada por la categoría <code class="docutils literal notranslate"><span class="pre">sedan</span></code>, seguida de <code class="docutils literal notranslate"><span class="pre">SUV</span></code>, <code class="docutils literal notranslate"><span class="pre">pickup</span></code> y <code class="docutils literal notranslate"><span class="pre">truck</span></code>. Sin embargo, una proporción considerable de los registros no cuenta con información en esta variable, lo cual queda evidenciado por los más de 92,000 valores ausentes, que representan un 21.75 % del total. Esta cantidad de datos faltantes justifica la necesidad de aplicar una estrategia de imputación antes de continuar con el análisis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="s2">&quot;type_missing&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Los valores ausentes de la columna <code class="docutils literal notranslate"><span class="pre">type</span></code> son reemplazados por la etiqueta <code class="docutils literal notranslate"><span class="pre">&quot;type_missing&quot;</span></code>, incorporada como una nueva categoría. Esta forma de imputación permite mantener el tamaño original del conjunto de datos y conservar la información sobre la falta de contenido sin suponer un valor erróneo ni distorsionar las categorías existentes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hay_na</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;¿Hay NA en columnas imputadas? </span><span class="si">{</span><span class="n">hay_na</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">na_por_col</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conteo de NA por columna imputada:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">na_por_col</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>¿Hay NA en columnas imputadas? False
Conteo de NA por columna imputada:
0
</pre></div>
</div>
</div>
</div>
<p>Esta verificación posterior confirma que no quedan datos faltantes en la columna <code class="docutils literal notranslate"><span class="pre">type</span></code> luego de aplicar la imputación. La comprobación lógica devuelve <code class="docutils literal notranslate"><span class="pre">False</span></code>, lo cual indica que no hay valores nulos presentes. Además, el conteo exacto muestra cero registros vacíos, lo que demuestra que la operación fue aplicada correctamente en todos los casos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comparar_categoricas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/032929cd37b6af4c570e40423991e868579a722a5900841e2400cb3d6a6e27d3.png" src="_images/032929cd37b6af4c570e40423991e868579a722a5900841e2400cb3d6a6e27d3.png" />
</div>
</div>
<p>Esta visualización final ofrece una comparación entre la distribución original y la modificada de la variable <code class="docutils literal notranslate"><span class="pre">type</span></code>. El gráfico de la izquierda muestra la distribución antes de imputar, sin representar los valores nulos explícitamente. En cambio, el gráfico de la derecha incluye la nueva categoría <code class="docutils literal notranslate"><span class="pre">&quot;type_missing&quot;</span></code>, correspondiente a los registros que originalmente carecían de información. Las proporciones de las demás categorías se mantienen estables, lo que indica que la imputación no alteró la estructura general de la variable.</p>
</section>
</section>
<section id="variables-con-menos-del-5-de-valores-faltantes">
<h3><em><strong>3.3.3. Variables con menos del 5% de valores faltantes</strong></em><a class="headerlink" href="#variables-con-menos-del-5-de-valores-faltantes" title="Link to this heading">#</a></h3>
<p><em><strong>3.3.3.4. Variables numéricas:</strong></em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var_low_NA_num</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span> <span class="s2">&quot;long&quot;</span><span class="p">,</span> <span class="s2">&quot;odometer&quot;</span><span class="p">,</span><span class="s2">&quot;year&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>La lista <code class="docutils literal notranslate"><span class="pre">var_low_NA_num</span></code> agrupa las variables numéricas del conjunto de datos que presentan un porcentaje bajo de valores faltantes, específicamente menor al 5%. Esta selección permite aplicar un tratamiento diferenciado para valores ausentes en variables donde el problema es poco significativo, evitando imputaciones agresivas que podrían distorsionar los datos originales.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;lat&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>NaN</th>
      <td>6549</td>
      <td>1.53</td>
    </tr>
    <tr>
      <th>33.779214</th>
      <td>3301</td>
      <td>0.77</td>
    </tr>
    <tr>
      <th>43.182400</th>
      <td>2666</td>
      <td>0.62</td>
    </tr>
    <tr>
      <th>40.468785</th>
      <td>2346</td>
      <td>0.55</td>
    </tr>
    <tr>
      <th>33.786500</th>
      <td>2341</td>
      <td>0.55</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>29.016844</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>35.143705</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>35.249000</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>35.123981</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>43.642930</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>
<p>53182 rows × 2 columns</p>
</div></div></div>
</div>
<p>La función <code class="docutils literal notranslate"><span class="pre">resumen_categorias</span></code> aplicada sobre la variable <code class="docutils literal notranslate"><span class="pre">lat</span></code> genera un conteo de los valores más frecuentes, junto con su porcentaje sobre el total. Aunque la variable es numérica, el resumen permite identificar rápidamente valores comunes, posiblemente relacionados con coordenadas geográficas repetidas en el conjunto. La presencia de aproximadamente 1.53 % de valores ausentes indica un nivel bajo de incompletitud, lo cual sugiere que una imputación simple o incluso la eliminación de estas pocas filas podría ser una opción viable sin comprometer la representatividad de la muestra.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;long&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>NaN</th>
      <td>6549</td>
      <td>1.53</td>
    </tr>
    <tr>
      <th>-84.411811</th>
      <td>3301</td>
      <td>0.77</td>
    </tr>
    <tr>
      <th>-84.112200</th>
      <td>2666</td>
      <td>0.62</td>
    </tr>
    <tr>
      <th>-74.281707</th>
      <td>2346</td>
      <td>0.55</td>
    </tr>
    <tr>
      <th>-84.445400</th>
      <td>2341</td>
      <td>0.55</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>-95.112076</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>-93.807449</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>-94.154610</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>-94.161800</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>-108.222976</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>
<p>53773 rows × 2 columns</p>
</div></div></div>
</div>
<p>El análisis aplicado a la variable <code class="docutils literal notranslate"><span class="pre">long</span></code> permite observar una distribución muy similar a la de <code class="docutils literal notranslate"><span class="pre">lat</span></code>, tanto en términos de valores frecuentes como en la proporción de datos ausentes. También aquí, el porcentaje de valores nulos se mantiene en torno al 1.53 %, lo que refuerza la idea de que el impacto de estos valores perdidos sobre el análisis general es mínimo. Este tipo de revisión facilita la toma de decisiones sobre imputación en variables numéricas, especialmente cuando se busca preservar la estructura espacial en conjuntos de datos con información geográfica.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;odometer&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>NaN</th>
      <td>4400</td>
      <td>1.03</td>
    </tr>
    <tr>
      <th>100000.0</th>
      <td>2263</td>
      <td>0.53</td>
    </tr>
    <tr>
      <th>1.0</th>
      <td>2246</td>
      <td>0.53</td>
    </tr>
    <tr>
      <th>0.0</th>
      <td>1965</td>
      <td>0.46</td>
    </tr>
    <tr>
      <th>200000.0</th>
      <td>1728</td>
      <td>0.40</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>149468.0</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>154259.0</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>111887.0</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>213826.0</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>26892.0</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>
<p>104871 rows × 2 columns</p>
</div></div></div>
</div>
<p>La variable <code class="docutils literal notranslate"><span class="pre">odometer</span></code>, correspondiente al kilometraje registrado, presenta un bajo porcentaje de valores ausentes (1.03 %). Las observaciones más comunes están concentradas en valores redondos como 100000, 1, y 0, lo cual podría estar relacionado con errores de registro, valores predeterminados o cortes en los datos. La presencia de estas concentraciones sugiere revisar posibles sesgos o problemas de calidad antes de realizar análisis más detallados o aplicar imputaciones.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;year&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2017.0</th>
      <td>36420</td>
      <td>8.53</td>
    </tr>
    <tr>
      <th>2018.0</th>
      <td>36369</td>
      <td>8.52</td>
    </tr>
    <tr>
      <th>2015.0</th>
      <td>31538</td>
      <td>7.39</td>
    </tr>
    <tr>
      <th>2013.0</th>
      <td>30794</td>
      <td>7.21</td>
    </tr>
    <tr>
      <th>2016.0</th>
      <td>30434</td>
      <td>7.13</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1943.0</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>1915.0</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>1902.0</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>1905.0</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>1909.0</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>
<p>115 rows × 2 columns</p>
</div></div></div>
</div>
<p>La variable <code class="docutils literal notranslate"><span class="pre">year</span></code> muestra una distribución centrada en años recientes, principalmente entre 2013 y 2018. No se detectan valores faltantes significativos, y aunque existen unos pocos registros con años extremos como 1900 o 1943, estos parecen ser errores o valores atípicos. Esta información ayuda a tener una visión clara del rango temporal cubierto por el dataset, así como de la necesidad de un tratamiento para casos raros o inconsistentes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">graficar_distribucion</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columnas</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Histograma: </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">stats</span><span class="o">.</span><span class="n">probplot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">dist</span><span class="o">=</span><span class="s2">&quot;norm&quot;</span><span class="p">,</span> <span class="n">plot</span><span class="o">=</span><span class="n">plt</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Q-Q Plot: </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>La función <code class="docutils literal notranslate"><span class="pre">graficar_distribucion</span></code> permite visualizar la distribución de variables numéricas en dos formas complementarias. Por un lado, genera un histograma con densidad suavizada usando kernel (KDE), útil para observar la forma general de la distribución. Por otro lado, incluye un gráfico Q-Q (Quantile-Quantile), que facilita la evaluación de la normalidad comparando cuantiles teóricos con los observados.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">graficar_distribucion</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">var_low_NA_num</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bec107dda353059139c5a5c0f6fa8f2697e3f6c337fb984aa7a6baa84d6c2798.png" src="_images/bec107dda353059139c5a5c0f6fa8f2697e3f6c337fb984aa7a6baa84d6c2798.png" />
<img alt="_images/b6ca16a76d70565ef6891d24d00ac68c4002132478526e4ec0a5993f954f94a1.png" src="_images/b6ca16a76d70565ef6891d24d00ac68c4002132478526e4ec0a5993f954f94a1.png" />
<img alt="_images/75fe78fdeea7d2673594a7b281d9419909d54d73c92f0b8808c2018d3486cd01.png" src="_images/75fe78fdeea7d2673594a7b281d9419909d54d73c92f0b8808c2018d3486cd01.png" />
<img alt="_images/0fae919712681f6e696d26eb910c79d56621f6c18c97a9c1f4171d9e090df836.png" src="_images/0fae919712681f6e696d26eb910c79d56621f6c18c97a9c1f4171d9e090df836.png" />
</div>
</div>
<ul class="simple">
<li><p>La distribución de la variable <code class="docutils literal notranslate"><span class="pre">lat</span></code> aparece fuertemente concentrada en un rango estrecho entre aproximadamente 25 y 50, lo que coincide con latitudes de Estados Unidos. El histograma muestra una forma levemente sesgada y con picos, mientras que el gráfico Q-Q refleja desviaciones respecto a la línea teórica, sobre todo en los extremos, lo que indica que los datos no siguen una distribución normal exacta. A pesar de ello, gran parte de los valores se alinean moderadamente bien con los cuantiles teóricos.</p></li>
<li><p>En la variable <code class="docutils literal notranslate"><span class="pre">long</span></code>, la densidad está también fuertemente concentrada, en este caso en valores negativos que reflejan longitudes del hemisferio occidental. El histograma muestra múltiples picos, lo que sugiere la presencia de diferentes regiones geográficas dominantes. El gráfico Q-Q presenta importantes desviaciones, especialmente en las colas, lo que confirma una distribución no normal y la existencia de valores extremos o agrupaciones diferenciadas.</p></li>
<li><p>Los datos de <code class="docutils literal notranslate"><span class="pre">odometer</span></code> muestran una distribución altamente asimétrica, con una gran concentración de vehículos con bajo kilometraje, incluyendo valores como 0 o 1, probablemente introducidos como registros erróneos o predeterminados. El histograma tiene una larga cola hacia la derecha. En el gráfico Q-Q, la curvatura extrema confirma una fuerte desviación de la normalidad, lo cual sugiere que esta variable debería tratarse con transformaciones logarítmicas u otras técnicas si se piensa aplicar algún modelo estadístico sensible a este tipo de distribución.</p></li>
<li><p>La variable <code class="docutils literal notranslate"><span class="pre">year</span></code> evidencia una clara acumulación en años recientes, con una mayor densidad entre 2010 y 2020. El histograma presenta un patrón creciente que refleja la mayor cantidad de registros de autos modernos, mientras que los años anteriores a 1980 aparecen en números insignificantes. El gráfico Q-Q confirma que los datos no tienen un comportamiento normal: existe una marcada curvatura en ambos extremos y un cambio abrupto en la pendiente media, lo que indica que se trata de una distribución sesgada y posiblemente truncada en los años más antiguos.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_ks_normalidad</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columnas</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.05</span><span class="p">):</span>
    <span class="n">resultados</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>

        <span class="n">data_std</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span> <span class="o">-</span> <span class="n">data</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span> <span class="o">/</span> <span class="n">data</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>

        <span class="n">stat</span><span class="p">,</span> <span class="n">p</span> <span class="o">=</span> <span class="n">kstest</span><span class="p">(</span><span class="n">data_std</span><span class="p">,</span> <span class="s1">&#39;norm&#39;</span><span class="p">)</span>
        <span class="n">resultados</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;statistic&quot;</span><span class="p">:</span> <span class="n">stat</span><span class="p">,</span>
            <span class="s2">&quot;p-value&quot;</span><span class="p">:</span> <span class="n">p</span><span class="p">,</span>
            <span class="s2">&quot;normal&quot;</span><span class="p">:</span> <span class="n">p</span> <span class="o">&gt;</span> <span class="n">alpha</span>
        <span class="p">}</span>
    <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">resultados</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
</div>
<p>La función <code class="docutils literal notranslate"><span class="pre">test_ks_normalidad</span></code> evalúa si las variables numéricas siguen una distribución normal utilizando la prueba de Kolmogorov-Smirnov. Cada columna es estandarizada y luego se calcula el estadístico y el p-valor comparando con una distribución normal. El resultado incluye un indicador lógico (<code class="docutils literal notranslate"><span class="pre">True</span></code> o <code class="docutils literal notranslate"><span class="pre">False</span></code>) que refleja si la hipótesis nula de normalidad puede aceptarse al nivel de significancia definido (por defecto, 0.05).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resultados_ks</span> <span class="o">=</span> <span class="n">test_ks_normalidad</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">var_low_NA_num</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">resultados_ks</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>         statistic p-value normal
lat       0.061442     0.0  False
long      0.135748     0.0  False
odometer  0.323332     0.0  False
year      0.170948     0.0  False
</pre></div>
</div>
</div>
</div>
<p>La ejecución de la prueba de normalidad para las variables <code class="docutils literal notranslate"><span class="pre">lat</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>, <code class="docutils literal notranslate"><span class="pre">odometer</span></code> y <code class="docutils literal notranslate"><span class="pre">year</span></code> muestra que todas obtienen un p-valor de 0.0, indicando una fuerte evidencia contra la normalidad en todos los casos. Esto valida lo observado visualmente en los gráficos Q-Q anteriores y sugiere que aplicar métodos estadísticos que asumen normalidad sobre estas variables requeriría transformaciones previas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">imputar_por_mediana</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_copy</span><span class="p">,</span> <span class="n">columnas</span><span class="p">):</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas</span><span class="p">:</span>
        <span class="n">mediana</span> <span class="o">=</span> <span class="n">df_copy</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span>
        <span class="n">df_copy</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">mediana</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df_copy</span>
</pre></div>
</div>
</div>
</div>
<p>La función <code class="docutils literal notranslate"><span class="pre">imputar_por_mediana</span></code> reemplaza los valores faltantes en las columnas especificadas utilizando la mediana de cada variable. Esta estrategia resulta útil cuando la distribución no es normal, ya que la mediana ofrece mayor robustez frente a valores extremos o asimetrías.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado</span> <span class="o">=</span> <span class="n">imputar_por_mediana</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;odometer&quot;</span><span class="p">,</span><span class="s2">&quot;year&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Las columnas <code class="docutils literal notranslate"><span class="pre">odometer</span></code> y <code class="docutils literal notranslate"><span class="pre">year</span></code> son imputadas mediante la función anterior, aplicando la mediana global de cada una. Esta decisión resulta coherente con los resultados de la prueba de normalidad y las distribuciones previamente observadas, donde la media no es una medida representativa.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;region&#39;</span><span class="p">)[</span><span class="s1">&#39;lat&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">median</span><span class="p">()))</span>
<span class="n">df_imputado</span><span class="p">[</span><span class="s1">&#39;long&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;region&#39;</span><span class="p">)[</span><span class="s1">&#39;long&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">median</span><span class="p">()))</span>
</pre></div>
</div>
</div>
</div>
<p>Para las variables <code class="docutils literal notranslate"><span class="pre">lat</span></code> y <code class="docutils literal notranslate"><span class="pre">long</span></code>, la imputación se realiza a nivel regional, utilizando la mediana por grupo según la columna <code class="docutils literal notranslate"><span class="pre">region</span></code>. Esta estrategia permite una imputación más contextualizada, capturando diferencias geográficas sin introducir valores que no correspondan a las condiciones particulares de cada área.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>

<span class="n">hay_na</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="n">var_low_NA_num</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;¿Hay NA en columnas imputadas? </span><span class="si">{</span><span class="n">hay_na</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">na_por_col</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="n">var_low_NA_num</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conteo de NA por columna imputada:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">na_por_col</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>¿Hay NA en columnas imputadas? False
Conteo de NA por columna imputada:
lat         0
long        0
odometer    0
year        0
dtype: int64
</pre></div>
</div>
</div>
</div>
<p>La verificación final confirma que todas las variables de baja proporción de valores faltantes han sido correctamente imputadas. No se detectan valores nulos en <code class="docutils literal notranslate"><span class="pre">lat</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>, <code class="docutils literal notranslate"><span class="pre">odometer</span></code> ni <code class="docutils literal notranslate"><span class="pre">year</span></code>, lo que garantiza la consistencia de los datos antes de continuar con etapas posteriores del análisis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">comparar_distribuciones_graf</span><span class="p">(</span><span class="n">df_original</span><span class="p">,</span> <span class="n">df_imputado</span><span class="p">,</span> <span class="n">columnas</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
        
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">df_original</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">(),</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;steelblue&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> - Original (con NaNs)&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
        
        <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">df_imputado</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkorange&#39;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> - Imputado&quot;</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
        
        <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>La función <code class="docutils literal notranslate"><span class="pre">comparar_distribuciones_graf</span></code> permite visualizar cómo cambia la distribución de variables numéricas antes y después de la imputación. Para cada columna indicada, genera una figura con dos gráficos de distribución: el primero corresponde a los datos originales (ignorando los valores faltantes), y el segundo muestra la distribución de la misma variable tras imputar los valores ausentes. Los histogramas incorporan curvas de densidad estimada (<code class="docutils literal notranslate"><span class="pre">kde=True</span></code>), lo que facilita comparar la forma de ambas distribuciones.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">comparar_distribuciones_graf</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado</span><span class="p">,</span> <span class="n">var_low_NA_num</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/bfbf26667c0a112ae05968124052b3b6def2b3588749efd027727384f34bfe88.png" src="_images/bfbf26667c0a112ae05968124052b3b6def2b3588749efd027727384f34bfe88.png" />
<img alt="_images/b8eb0b2a65ce7066180215932de3fb7c4c30ebc2394829fbb10f79719a3039ae.png" src="_images/b8eb0b2a65ce7066180215932de3fb7c4c30ebc2394829fbb10f79719a3039ae.png" />
<img alt="_images/9d4e6f0ccd45d33d8dcb4b0fccb482903562d70c5cd763d8597b15fcfa9f8690.png" src="_images/9d4e6f0ccd45d33d8dcb4b0fccb482903562d70c5cd763d8597b15fcfa9f8690.png" />
<img alt="_images/7d405d9f3dfdca065133960ff933a419875e404e017cf1b911b9e681a9bbe08a.png" src="_images/7d405d9f3dfdca065133960ff933a419875e404e017cf1b911b9e681a9bbe08a.png" />
</div>
</div>
<ul class="simple">
<li><p>La variable <code class="docutils literal notranslate"><span class="pre">lat</span></code> mantiene una distribución consistente después de imputar, lo cual indica que la estrategia utilizada no alteró significativamente su comportamiento general. Esto sugiere que la imputación respetó la forma original de los datos.</p></li>
<li><p>Para la variable <code class="docutils literal notranslate"><span class="pre">long</span></code>, la comparación muestra un patrón similar al caso anterior. Aunque hay ligeros cambios en la densidad, la forma principal de la distribución persiste, lo que refleja una imputación adecuada que conserva la estructura geográfica.</p></li>
<li><p>En el caso de <code class="docutils literal notranslate"><span class="pre">odometer</span></code>, la distribución presenta una fuerte concentración en valores bajos tanto antes como después de imputar. Esto sugiere que los valores imputados no distorsionan los patrones típicos del kilometraje registrado.</p></li>
<li><p>La variable <code class="docutils literal notranslate"><span class="pre">year</span></code> presenta una clara acumulación de datos en los años recientes en ambos gráficos. La imputación no modifica esa tendencia, lo que sugiere que la estrategia adoptada para completar los datos ausentes fue efectiva y consistente con la distribución original.</p></li>
</ul>
<p><em><strong>3.3.3.4. Variables categóricas</strong></em></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var_low_NA_cat</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;manufacturer&quot;</span><span class="p">,</span> <span class="s2">&quot;title_status&quot;</span><span class="p">,</span> <span class="s2">&quot;fuel&quot;</span><span class="p">,</span> <span class="s2">&quot;transmission&quot;</span><span class="p">,</span> <span class="s2">&quot;model&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>La lista <code class="docutils literal notranslate"><span class="pre">var_low_NA_cat</span></code> agrupa aquellas variables categóricas con menos del 5% de valores faltantes. Estas columnas serán analizadas posteriormente para imputación o evaluación de su distribución.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;manufacturer&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ford</th>
      <td>70985</td>
      <td>16.63</td>
    </tr>
    <tr>
      <th>chevrolet</th>
      <td>55064</td>
      <td>12.90</td>
    </tr>
    <tr>
      <th>toyota</th>
      <td>34202</td>
      <td>8.01</td>
    </tr>
    <tr>
      <th>honda</th>
      <td>21269</td>
      <td>4.98</td>
    </tr>
    <tr>
      <th>nissan</th>
      <td>19067</td>
      <td>4.47</td>
    </tr>
    <tr>
      <th>jeep</th>
      <td>19014</td>
      <td>4.45</td>
    </tr>
    <tr>
      <th>ram</th>
      <td>18342</td>
      <td>4.30</td>
    </tr>
    <tr>
      <th>NaN</th>
      <td>17646</td>
      <td>4.13</td>
    </tr>
    <tr>
      <th>gmc</th>
      <td>16785</td>
      <td>3.93</td>
    </tr>
    <tr>
      <th>bmw</th>
      <td>14699</td>
      <td>3.44</td>
    </tr>
    <tr>
      <th>dodge</th>
      <td>13707</td>
      <td>3.21</td>
    </tr>
    <tr>
      <th>mercedes-benz</th>
      <td>11817</td>
      <td>2.77</td>
    </tr>
    <tr>
      <th>hyundai</th>
      <td>10338</td>
      <td>2.42</td>
    </tr>
    <tr>
      <th>subaru</th>
      <td>9495</td>
      <td>2.22</td>
    </tr>
    <tr>
      <th>volkswagen</th>
      <td>9345</td>
      <td>2.19</td>
    </tr>
    <tr>
      <th>kia</th>
      <td>8457</td>
      <td>1.98</td>
    </tr>
    <tr>
      <th>lexus</th>
      <td>8200</td>
      <td>1.92</td>
    </tr>
    <tr>
      <th>audi</th>
      <td>7573</td>
      <td>1.77</td>
    </tr>
    <tr>
      <th>cadillac</th>
      <td>6953</td>
      <td>1.63</td>
    </tr>
    <tr>
      <th>chrysler</th>
      <td>6031</td>
      <td>1.41</td>
    </tr>
    <tr>
      <th>acura</th>
      <td>5978</td>
      <td>1.40</td>
    </tr>
    <tr>
      <th>buick</th>
      <td>5501</td>
      <td>1.29</td>
    </tr>
    <tr>
      <th>mazda</th>
      <td>5427</td>
      <td>1.27</td>
    </tr>
    <tr>
      <th>infiniti</th>
      <td>4802</td>
      <td>1.12</td>
    </tr>
    <tr>
      <th>lincoln</th>
      <td>4220</td>
      <td>0.99</td>
    </tr>
    <tr>
      <th>volvo</th>
      <td>3374</td>
      <td>0.79</td>
    </tr>
    <tr>
      <th>mitsubishi</th>
      <td>3292</td>
      <td>0.77</td>
    </tr>
    <tr>
      <th>mini</th>
      <td>2376</td>
      <td>0.56</td>
    </tr>
    <tr>
      <th>pontiac</th>
      <td>2288</td>
      <td>0.54</td>
    </tr>
    <tr>
      <th>rover</th>
      <td>2113</td>
      <td>0.49</td>
    </tr>
    <tr>
      <th>jaguar</th>
      <td>1946</td>
      <td>0.46</td>
    </tr>
    <tr>
      <th>porsche</th>
      <td>1384</td>
      <td>0.32</td>
    </tr>
    <tr>
      <th>mercury</th>
      <td>1184</td>
      <td>0.28</td>
    </tr>
    <tr>
      <th>saturn</th>
      <td>1090</td>
      <td>0.26</td>
    </tr>
    <tr>
      <th>alfa-romeo</th>
      <td>897</td>
      <td>0.21</td>
    </tr>
    <tr>
      <th>tesla</th>
      <td>868</td>
      <td>0.20</td>
    </tr>
    <tr>
      <th>fiat</th>
      <td>792</td>
      <td>0.19</td>
    </tr>
    <tr>
      <th>harley-davidson</th>
      <td>153</td>
      <td>0.04</td>
    </tr>
    <tr>
      <th>ferrari</th>
      <td>95</td>
      <td>0.02</td>
    </tr>
    <tr>
      <th>datsun</th>
      <td>63</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>aston-martin</th>
      <td>24</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>land rover</th>
      <td>21</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>morgan</th>
      <td>3</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>El resumen de la columna <code class="docutils literal notranslate"><span class="pre">manufacturer</span></code> muestra la distribución de marcas en el conjunto de datos. Ford, Chevrolet y Toyota son las marcas más frecuentes, acumulando entre las tres casi el 38% del total. La presencia de valores nulos (<code class="docutils literal notranslate"><span class="pre">NaN</span></code>) alcanza el 4.13%, lo cual confirma que la variable entra en el grupo de aquellas con baja proporción de faltantes. También destaca una larga cola de fabricantes con presencia marginal, donde varios aparecen con menos del 1% de representación, incluyendo casos casi anecdóticos como Morgan o Aston Martin.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;title_status&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>clean</th>
      <td>405117</td>
      <td>94.90</td>
    </tr>
    <tr>
      <th>NaN</th>
      <td>8242</td>
      <td>1.93</td>
    </tr>
    <tr>
      <th>rebuilt</th>
      <td>7219</td>
      <td>1.69</td>
    </tr>
    <tr>
      <th>salvage</th>
      <td>3868</td>
      <td>0.91</td>
    </tr>
    <tr>
      <th>lien</th>
      <td>1422</td>
      <td>0.33</td>
    </tr>
    <tr>
      <th>missing</th>
      <td>814</td>
      <td>0.19</td>
    </tr>
    <tr>
      <th>parts only</th>
      <td>198</td>
      <td>0.05</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>La tabla de frecuencia para la columna <code class="docutils literal notranslate"><span class="pre">title_status</span></code> evidencia que la mayoría de los vehículos tienen un título “clean”, representando el 94.90% del total. Las demás categorías como “rebuilt”, “salvage” o “lien” están presentes en proporciones considerablemente menores, y los valores faltantes apenas alcanzan el 1.93%.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;fuel&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>gas</th>
      <td>356209</td>
      <td>83.44</td>
    </tr>
    <tr>
      <th>other</th>
      <td>30728</td>
      <td>7.20</td>
    </tr>
    <tr>
      <th>diesel</th>
      <td>30062</td>
      <td>7.04</td>
    </tr>
    <tr>
      <th>hybrid</th>
      <td>5170</td>
      <td>1.21</td>
    </tr>
    <tr>
      <th>NaN</th>
      <td>3013</td>
      <td>0.71</td>
    </tr>
    <tr>
      <th>electric</th>
      <td>1698</td>
      <td>0.40</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>La variable <code class="docutils literal notranslate"><span class="pre">fuel</span></code> muestra una clara mayoría de vehículos que usan gasolina, con un 83.44% de los registros. Las otras categorías como “other”, “diesel” e “hybrid” tienen menor presencia, mientras que los vehículos eléctricos apenas representan un 0.40% del total.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;transmission&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>automatic</th>
      <td>336524</td>
      <td>78.83</td>
    </tr>
    <tr>
      <th>other</th>
      <td>62682</td>
      <td>14.68</td>
    </tr>
    <tr>
      <th>manual</th>
      <td>25118</td>
      <td>5.88</td>
    </tr>
    <tr>
      <th>NaN</th>
      <td>2556</td>
      <td>0.60</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>En la columna <code class="docutils literal notranslate"><span class="pre">transmission</span></code>, la mayoría de los vehículos cuentan con transmisión automática, sumando un 78.83% del total. Las transmisiones manuales sólo representan el 5.88%, y existe un 14.68% que cae en la categoría “other”. La proporción de valores nulos es de apenas 0.60%, lo cual permite incluir esta variable en análisis posteriores sin mayor tratamiento.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="s2">&quot;model&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>f-150</th>
      <td>8009</td>
      <td>1.88</td>
    </tr>
    <tr>
      <th>NaN</th>
      <td>5277</td>
      <td>1.24</td>
    </tr>
    <tr>
      <th>silverado 1500</th>
      <td>5140</td>
      <td>1.20</td>
    </tr>
    <tr>
      <th>1500</th>
      <td>4211</td>
      <td>0.99</td>
    </tr>
    <tr>
      <th>camry</th>
      <td>3135</td>
      <td>0.73</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>Huyndai Sante Fe Limited</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>astro awd 4x4</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>escalade and</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>cx 3</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>Paige Glenbrook Touring</th>
      <td>1</td>
      <td>0.00</td>
    </tr>
  </tbody>
</table>
<p>29668 rows × 2 columns</p>
</div></div></div>
</div>
<p>La variable <code class="docutils literal notranslate"><span class="pre">model</span></code> contiene una gran cantidad de categorías distintas, lo que indica una alta cardinalidad. Aunque hay modelos relativamente comunes como “f-150” o “silverado 1500”, la mayoría de los registros se encuentran distribuidos entre cientos de modelos con muy baja frecuencia individual. Algunos modelos aparecen una sola vez.  Los valores faltantes representan un 1.24% del total.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado</span> <span class="o">=</span> <span class="n">imputar_por_moda</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="n">df_imputado</span><span class="p">,</span> <span class="n">var_low_NA_cat</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Se realiza la imputación de valores faltantes en las variables categóricas con baja proporción de NA (<code class="docutils literal notranslate"><span class="pre">manufacturer</span></code>, <code class="docutils literal notranslate"><span class="pre">title_status</span></code>, <code class="docutils literal notranslate"><span class="pre">fuel</span></code>, <code class="docutils literal notranslate"><span class="pre">transmission</span></code>, <code class="docutils literal notranslate"><span class="pre">model</span></code>). El método usado es la moda, lo cual implica rellenar los valores ausentes con la categoría más frecuente en cada columna.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_imputado</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>

<span class="n">hay_na</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="n">var_low_NA_cat</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;¿Hay NA en columnas imputadas? </span><span class="si">{</span><span class="n">hay_na</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">na_por_col</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="n">var_low_NA_cat</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conteo de NA por columna imputada:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">na_por_col</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>¿Hay NA en columnas imputadas? False
Conteo de NA por columna imputada:
manufacturer    0
title_status    0
fuel            0
transmission    0
model           0
dtype: int64
</pre></div>
</div>
</div>
</div>
<p>Se verifica si aún quedan valores faltantes en el DataFrame imputado, tanto de forma general como específicamente en las columnas categóricas que fueron imputadas. La salida confirma que no hay valores faltantes restantes en estas variables, ya que todos los conteos son cero. Esto valida que la imputación por moda se aplicó correctamente, dejando el conjunto de datos listo para análisis o modelado sin problemas derivados de datos ausentes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">var_cargar</span> <span class="o">=</span> <span class="n">var_low_NA_cat</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;manufacturer&quot;</span><span class="p">,</span> <span class="s2">&quot;title_status&quot;</span><span class="p">,</span> <span class="s2">&quot;fuel&quot;</span><span class="p">,</span> <span class="s2">&quot;transmission&quot;</span><span class="p">]</span>
<span class="n">comparar_categoricas</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df_imputado</span><span class="p">,</span> <span class="n">var_low_NA_cat</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/383181f9c0af6b45262aa140ba216b89c8a85db71586187cf976f0e9731f2742.png" src="_images/383181f9c0af6b45262aa140ba216b89c8a85db71586187cf976f0e9731f2742.png" />
<img alt="_images/06a9228efecfce6880ab4f83074f6a3e243be484f7b5f81168844a98ccc57e21.png" src="_images/06a9228efecfce6880ab4f83074f6a3e243be484f7b5f81168844a98ccc57e21.png" />
<img alt="_images/516fac6bab087efe567f51e7a5098e6d1e6d91fd7307b75a548b2518675e71ab.png" src="_images/516fac6bab087efe567f51e7a5098e6d1e6d91fd7307b75a548b2518675e71ab.png" />
<img alt="_images/cbbe3124aa1f0bff364a46864296540a43210b21a923e214c166121d2e8abec0.png" src="_images/cbbe3124aa1f0bff364a46864296540a43210b21a923e214c166121d2e8abec0.png" />
</div>
</div>
<p>La función <code class="docutils literal notranslate"><span class="pre">comparar_categoricas</span></code> genera gráficos comparativos de barras para visualizar la distribución de las categorías antes y después de la imputación.</p>
<ul class="simple">
<li><p>En el caso de la variable <code class="docutils literal notranslate"><span class="pre">manufacturer</span></code>, se observa que la distribución no cambia de forma significativa luego de imputar, lo cual indica que los valores ausentes fueron reemplazados por la categoría más frecuente, sin alterar el perfil general de la variable.</p></li>
<li><p>En la variable <code class="docutils literal notranslate"><span class="pre">title_status</span></code>, la categoría predominante es “clean”, y esta también es la que fue utilizada para imputar los valores faltantes. El gráfico posterior a la imputación muestra un leve incremento en la altura de esta barra, correspondiente a los datos faltantes que fueron reemplazados. La distribución general permanece prácticamente idéntica.</p></li>
<li><p>Para la variable <code class="docutils literal notranslate"><span class="pre">fuel</span></code>, se nota que “gas” es, con gran diferencia, la categoría más común. Como era de esperarse, los valores ausentes fueron reemplazados por esta categoría mayoritaria. La gráfica después de imputar presenta un ligero aumento en la barra de “gas”, manteniéndose estable el resto de la distribución.</p></li>
<li><p>La variable <code class="docutils literal notranslate"><span class="pre">transmission</span></code> muestra que la mayoría de los registros tienen transmisión automática. Al imputar los valores faltantes, la barra correspondiente a “automatic” crece un poco, lo que indica que fue la categoría usada para rellenar los NA. La distribución original se conserva, con apenas una mínima alteración.</p></li>
</ul>
</section>
<section id="verificacion-de-valores-faltantes">
<h3><em><strong>3.3.4. Verificación de valores faltantes</strong></em><a class="headerlink" href="#verificacion-de-valores-faltantes" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">resumen_faltantes</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="n">faltantes</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">porcentaje</span> <span class="o">=</span> <span class="p">(</span><span class="n">faltantes</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>

    <span class="n">tabla_faltantes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;Valores faltantes&#39;</span><span class="p">:</span> <span class="n">faltantes</span><span class="p">,</span>
        <span class="s1">&#39;Porcentaje (%)&#39;</span><span class="p">:</span> <span class="n">porcentaje</span>
    <span class="p">})</span>

    <span class="c1"># Filtrar solo las columnas que tienen NA</span>
    <span class="n">tabla_faltantes</span> <span class="o">=</span> <span class="n">tabla_faltantes</span><span class="p">[</span><span class="n">tabla_faltantes</span><span class="p">[</span><span class="s1">&#39;Valores faltantes&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span>
    
    <span class="c1"># Ordenar por porcentaje descendente</span>
    <span class="n">tabla_faltantes</span> <span class="o">=</span> <span class="n">tabla_faltantes</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Porcentaje (%)&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">tabla_faltantes</span>
</pre></div>
</div>
</div>
</div>
<p>La función <code class="docutils literal notranslate"><span class="pre">resumen_faltantes</span></code> calcula el total y porcentaje de valores faltantes en cada columna del DataFrame. Crea un DataFrame que contiene esta información, filtra para mostrar solo las columnas con valores faltantes y ordena el resultado en orden descendente según el porcentaje.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_faltantes</span><span class="p">(</span><span class="n">df_imputado</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Valores faltantes</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div></div></div>
</div>
<p>La llamada a <code class="docutils literal notranslate"><span class="pre">resumen_faltantes</span></code> con el DataFrame imputado verifica que no existen valores faltantes tras la limpieza y la imputación. El resultado indica que el DataFrame está completamente limpio, sin valores nulos, lo cual confirma la correcta ejecución del proceso previo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df_imputado</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),</span> <span class="n">cbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">yticklabels</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;plasma&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Mapa de calor de valores faltantes&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/25dc19462efa83b3e79e94c6d48bfd487afbaf9468cc91cb25aa3cac1ab47005.png" src="_images/25dc19462efa83b3e79e94c6d48bfd487afbaf9468cc91cb25aa3cac1ab47005.png" />
</div>
</div>
<p>El mapa de calor generado con <code class="docutils literal notranslate"><span class="pre">sns.heatmap</span></code> visualiza la ausencia de valores faltantes en el DataFrame imputado. La ausencia de zonas coloreadas indica que ninguna columna contiene datos faltantes, corroborando la limpieza total de datos nulos y validando el estado óptimo del conjunto de datos para análisis posteriores.</p>
</section>
<section id="codificacion-de-variables-categoricas">
<h3><strong>3.5. Codificación de variables categóricas</strong><a class="headerlink" href="#codificacion-de-variables-categoricas" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">OneHotEncoder</span>

<span class="k">def</span><span class="w"> </span><span class="nf">codificar_one_hot_sklearn</span><span class="p">(</span><span class="n">df_imputado</span><span class="p">,</span> <span class="n">columnas_categoricas</span><span class="p">):</span>
    <span class="n">df_imputado</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">df_cat</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="p">[</span><span class="n">columnas_categoricas</span><span class="p">]</span>
    <span class="n">df_num</span> <span class="o">=</span> <span class="n">df_imputado</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columnas_categoricas</span><span class="p">)</span>

    <span class="n">encoder</span> <span class="o">=</span> <span class="n">OneHotEncoder</span><span class="p">(</span><span class="n">sparse_output</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">handle_unknown</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
    <span class="n">encoded_array</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_cat</span><span class="p">)</span>

    <span class="n">encoded_cols</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">(</span><span class="n">columnas_categoricas</span><span class="p">)</span>
    <span class="n">df_encoded_cat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">encoded_array</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">encoded_cols</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">df_imputado</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>

    <span class="n">df_encoded</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_num</span><span class="p">,</span> <span class="n">df_encoded_cat</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">df_encoded</span><span class="p">,</span> <span class="n">encoder</span>
</pre></div>
</div>
</div>
</div>
<p>Esta función codifica variables categóricas en un DataFrame usando OneHotEncoder de sklearn. Primero crea copias de las columnas categóricas y las numéricas para mantener los datos originales intactos. Luego aplica el codificador para transformar las variables categóricas en variables binarias (one-hot encoding). Finalmente, concatena las variables numéricas con las codificadas y devuelve el DataFrame resultante junto con el objeto encoder para uso posterior.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">columnas_categoricas</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">,</span> <span class="s1">&#39;manufacturer&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">,</span> <span class="s1">&#39;condition&#39;</span><span class="p">,</span> <span class="s1">&#39;fuel&#39;</span><span class="p">,</span> <span class="s1">&#39;title_status&#39;</span><span class="p">,</span><span class="s1">&#39;transmission&#39;</span><span class="p">,</span> <span class="s1">&#39;drive&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;paint_color&#39;</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Acá se define una lista con las columnas categóricas que serán codificadas y procesadas. Incluye atributos como región, fabricante, modelo, condición, tipo de combustible, estado del título, transmisión, tipo de conducción, color y estado del vehículo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">agrupar_categorias_rare</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columnas</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">nombre_otros</span><span class="o">=</span><span class="s1">&#39;Other&#39;</span><span class="p">):</span>
    <span class="n">df_modificado</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df_modificado</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">freqs</span> <span class="o">=</span> <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">normalize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">categorias_a_agrupadas</span> <span class="o">=</span> <span class="n">freqs</span><span class="p">[</span><span class="n">freqs</span> <span class="o">&lt;</span> <span class="n">threshold</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>

            <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">nombre_otros</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">categorias_a_agrupadas</span> <span class="k">else</span> <span class="n">x</span>
            <span class="p">)</span>

            <span class="c1"># Si la columna es categórica, actualiza las categorías</span>
            <span class="k">if</span> <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;category&#39;</span><span class="p">:</span>
                <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">add_categories</span><span class="p">([</span><span class="n">nombre_otros</span><span class="p">])</span>
                <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_modificado</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">remove_unused_categories</span><span class="p">()</span>
                
    <span class="k">return</span> <span class="n">df_modificado</span>
</pre></div>
</div>
</div>
</div>
<p>Función que agrupa categorías poco frecuentes dentro de variables categóricas para evitar que el modelo se disperse con muchas categorías raras. Copia el DataFrame original y analiza cada columna especificada para identificar las categorías cuya frecuencia relativa es menor que un umbral dado. Estas categorías raras se agrupan bajo una etiqueta común, como ‘Other’. También actualiza el tipo categórico para reflejar los cambios en las categorías disponibles.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">columnas_cat_redu</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;manufacturer&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">,</span> <span class="s1">&#39;condition&#39;</span><span class="p">,</span> <span class="s1">&#39;fuel&#39;</span><span class="p">,</span> <span class="s1">&#39;title_status&#39;</span><span class="p">,</span><span class="s1">&#39;transmission&#39;</span><span class="p">,</span> <span class="s1">&#39;drive&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;paint_color&#39;</span><span class="p">,</span> <span class="s1">&#39;state&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Se define una lista de columnas categóricas reducidas, excluyendo algunas de la lista original para enfocarse en variables con mayor relevancia o menor cantidad de categorías. Esta selección se utiliza para aplicar la función de agrupación de categorías raras, optimizando así la representación de los datos y mejorando la eficiencia del modelo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_reducido</span> <span class="o">=</span> <span class="n">agrupar_categorias_rare</span><span class="p">(</span><span class="n">df_imputado</span><span class="p">,</span> <span class="n">columnas_cat_redu</span><span class="p">,</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Aquí se crea una función para revisar qué valores únicos tiene cada columna que le pases, y te dice cuántos hay. También avisa si alguna columna no está en el DataFrame. Sirve para entender rápido qué categorías hay en cada columna.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">mostrar_categorias_y_cuenta</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">columnas</span><span class="p">):</span>
    <span class="n">resultados</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">columnas</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="n">categorias</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
            <span class="n">resultados</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">categorias</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">categorias</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Columna &#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&#39; no encontrada en el DataFrame.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">resultados</span>
</pre></div>
</div>
</div>
</div>
<p>Se usa la función con un DataFrame y un grupo de columnas que son categóricas. Después imprime los resultados para ver qué valores hay y cuántos por cada columna.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">categorias</span> <span class="o">=</span> <span class="n">mostrar_categorias_y_cuenta</span><span class="p">(</span><span class="n">df_reducido</span><span class="p">,</span> <span class="n">columnas_categoricas</span><span class="p">)</span>

<span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">cats</span> <span class="ow">in</span> <span class="n">categorias</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">cats</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>region: ([&#39;prescott&#39;, &#39;fayetteville&#39;, &#39;florida keys&#39;, &#39;worcester / central MA&#39;, &#39;greensboro&#39;, &#39;hudson valley&#39;, &#39;medford-ashland&#39;, &#39;erie&#39;, &#39;el paso&#39;, &#39;bellingham&#39;, &#39;skagit / island / SJI&#39;, &#39;la crosse&#39;, &#39;auburn&#39;, &#39;birmingham&#39;, &#39;dothan&#39;, &#39;florence / muscle shoals&#39;, &#39;gadsden-anniston&#39;, &#39;huntsville / decatur&#39;, &#39;mobile&#39;, &#39;montgomery&#39;, &#39;tuscaloosa&#39;, &#39;anchorage / mat-su&#39;, &#39;fairbanks&#39;, &#39;kenai peninsula&#39;, &#39;southeast alaska&#39;, &#39;flagstaff / sedona&#39;, &#39;mohave county&#39;, &#39;phoenix&#39;, &#39;show low&#39;, &#39;sierra vista&#39;, &#39;tucson&#39;, &#39;yuma&#39;, &#39;fort smith&#39;, &#39;jonesboro&#39;, &#39;little rock&#39;, &#39;texarkana&#39;, &#39;bakersfield&#39;, &#39;chico&#39;, &#39;fresno / madera&#39;, &#39;gold country&#39;, &#39;hanford-corcoran&#39;, &#39;humboldt county&#39;, &#39;imperial county&#39;, &#39;inland empire&#39;, &#39;los angeles&#39;, &#39;mendocino county&#39;, &#39;merced&#39;, &#39;modesto&#39;, &#39;monterey bay&#39;, &#39;orange county&#39;, &#39;palm springs&#39;, &#39;redding&#39;, &#39;reno / tahoe&#39;, &#39;sacramento&#39;, &#39;san diego&#39;, &#39;san luis obispo&#39;, &#39;santa barbara&#39;, &#39;santa maria&#39;, &#39;SF bay area&#39;, &#39;siskiyou county&#39;, &#39;stockton&#39;, &#39;susanville&#39;, &#39;ventura county&#39;, &#39;visalia-tulare&#39;, &#39;yuba-sutter&#39;, &#39;boulder&#39;, &#39;colorado springs&#39;, &#39;denver&#39;, &#39;eastern CO&#39;, &#39;fort collins / north CO&#39;, &#39;high rockies&#39;, &#39;pueblo&#39;, &#39;western slope&#39;, &#39;eastern CT&#39;, &#39;hartford&#39;, &#39;new haven&#39;, &#39;northwest CT&#39;, &#39;washington, DC&#39;, &#39;delaware&#39;, &#39;daytona beach&#39;, &#39;ft myers / SW florida&#39;, &#39;gainesville&#39;, &#39;heartland florida&#39;, &#39;jacksonville&#39;, &#39;lakeland&#39;, &#39;north central FL&#39;, &#39;ocala&#39;, &#39;okaloosa / walton&#39;, &#39;orlando&#39;, &#39;panama city&#39;, &#39;pensacola&#39;, &#39;sarasota-bradenton&#39;, &#39;south florida&#39;, &#39;space coast&#39;, &#39;st augustine&#39;, &#39;tallahassee&#39;, &#39;tampa bay area&#39;, &#39;treasure coast&#39;, &#39;albany&#39;, &#39;athens&#39;, &#39;atlanta&#39;, &#39;augusta&#39;, &#39;brunswick&#39;, &#39;columbus&#39;, &#39;macon / warner robins&#39;, &#39;northwest GA&#39;, &#39;savannah / hinesville&#39;, &#39;statesboro&#39;, &#39;valdosta&#39;, &#39;hawaii&#39;, &#39;boise&#39;, &#39;east idaho&#39;, &#39;lewiston / clarkston&#39;, &#39;pullman / moscow&#39;, &quot;spokane / coeur d&#39;alene&quot;, &#39;twin falls&#39;, &#39;bloomington-normal&#39;, &#39;champaign urbana&#39;, &#39;chicago&#39;, &#39;decatur&#39;, &#39;la salle co&#39;, &#39;mattoon-charleston&#39;, &#39;peoria&#39;, &#39;quad cities, IA/IL&#39;, &#39;rockford&#39;, &#39;southern illinois&#39;, &#39;springfield&#39;, &#39;st louis, MO&#39;, &#39;western IL&#39;, &#39;bloomington&#39;, &#39;evansville&#39;, &#39;fort wayne&#39;, &#39;indianapolis&#39;, &#39;kokomo&#39;, &#39;lafayette / west lafayette&#39;, &#39;muncie / anderson&#39;, &#39;richmond&#39;, &#39;south bend / michiana&#39;, &#39;terre haute&#39;, &#39;ames&#39;, &#39;cedar rapids&#39;, &#39;des moines&#39;, &#39;dubuque&#39;, &#39;fort dodge&#39;, &#39;iowa city&#39;, &#39;mason city&#39;, &#39;omaha / council bluffs&#39;, &#39;sioux city&#39;, &#39;southeast IA&#39;, &#39;waterloo / cedar falls&#39;, &#39;kansas city, MO&#39;, &#39;lawrence&#39;, &#39;manhattan&#39;, &#39;northwest KS&#39;, &#39;salina&#39;, &#39;southeast KS&#39;, &#39;southwest KS&#39;, &#39;topeka&#39;, &#39;wichita&#39;, &#39;bowling green&#39;, &#39;eastern kentucky&#39;, &#39;huntington-ashland&#39;, &#39;lexington&#39;, &#39;louisville&#39;, &#39;owensboro&#39;, &#39;western KY&#39;, &#39;baton rouge&#39;, &#39;central louisiana&#39;, &#39;houma&#39;, &#39;lafayette&#39;, &#39;lake charles&#39;, &#39;monroe&#39;, &#39;new orleans&#39;, &#39;shreveport&#39;, &#39;maine&#39;, &#39;annapolis&#39;, &#39;baltimore&#39;, &#39;cumberland valley&#39;, &#39;eastern shore&#39;, &#39;frederick&#39;, &#39;southern maryland&#39;, &#39;western maryland&#39;, &#39;boston&#39;, &#39;cape cod / islands&#39;, &#39;south coast&#39;, &#39;western massachusetts&#39;, &#39;ann arbor&#39;, &#39;battle creek&#39;, &#39;central michigan&#39;, &#39;detroit metro&#39;, &#39;flint&#39;, &#39;grand rapids&#39;, &#39;holland&#39;, &#39;jackson&#39;, &#39;kalamazoo&#39;, &#39;lansing&#39;, &#39;muskegon&#39;, &#39;northern michigan&#39;, &#39;port huron&#39;, &#39;saginaw-midland-baycity&#39;, &#39;southwest michigan&#39;, &#39;the thumb&#39;, &#39;upper peninsula&#39;, &#39;bemidji&#39;, &#39;brainerd&#39;, &#39;duluth / superior&#39;, &#39;fargo / moorhead&#39;, &#39;mankato&#39;, &#39;minneapolis / st paul&#39;, &#39;rochester&#39;, &#39;southwest MN&#39;, &#39;st cloud&#39;, &#39;gulfport / biloxi&#39;, &#39;hattiesburg&#39;, &#39;meridian&#39;, &#39;north mississippi&#39;, &#39;southwest MS&#39;, &#39;columbia / jeff city&#39;, &#39;joplin&#39;, &#39;kansas city&#39;, &#39;kirksville&#39;, &#39;lake of the ozarks&#39;, &#39;southeast missouri&#39;, &#39;st joseph&#39;, &#39;st louis&#39;, &#39;billings&#39;, &#39;bozeman&#39;, &#39;butte&#39;, &#39;eastern montana&#39;, &#39;great falls&#39;, &#39;helena&#39;, &#39;kalispell&#39;, &#39;missoula&#39;, &#39;asheville&#39;, &#39;boone&#39;, &#39;charlotte&#39;, &#39;eastern NC&#39;, &#39;hickory / lenoir&#39;, &#39;outer banks&#39;, &#39;raleigh / durham / CH&#39;, &#39;wilmington&#39;, &#39;winston-salem&#39;, &#39;grand island&#39;, &#39;lincoln&#39;, &#39;north platte&#39;, &#39;scottsbluff / panhandle&#39;, &#39;elko&#39;, &#39;las vegas&#39;, &#39;central NJ&#39;, &#39;jersey shore&#39;, &#39;north jersey&#39;, &#39;south jersey&#39;, &#39;albuquerque&#39;, &#39;clovis / portales&#39;, &#39;farmington&#39;, &#39;las cruces&#39;, &#39;roswell / carlsbad&#39;, &#39;santa fe / taos&#39;, &#39;binghamton&#39;, &#39;buffalo&#39;, &#39;catskills&#39;, &#39;chautauqua&#39;, &#39;elmira-corning&#39;, &#39;finger lakes&#39;, &#39;glens falls&#39;, &#39;ithaca&#39;, &#39;long island&#39;, &#39;new york city&#39;, &#39;oneonta&#39;, &#39;plattsburgh-adirondacks&#39;, &#39;potsdam-canton-massena&#39;, &#39;syracuse&#39;, &#39;twin tiers NY/PA&#39;, &#39;utica-rome-oneida&#39;, &#39;watertown&#39;, &#39;new hampshire&#39;, &#39;bismarck&#39;, &#39;grand forks&#39;, &#39;north dakota&#39;, &#39;akron / canton&#39;, &#39;ashtabula&#39;, &#39;chillicothe&#39;, &#39;cincinnati&#39;, &#39;cleveland&#39;, &#39;dayton / springfield&#39;, &#39;lima / findlay&#39;, &#39;mansfield&#39;, &#39;northern panhandle&#39;, &#39;parkersburg-marietta&#39;, &#39;sandusky&#39;, &#39;toledo&#39;, &#39;tuscarawas co&#39;, &#39;youngstown&#39;, &#39;zanesville / cambridge&#39;, &#39;fort smith, AR&#39;, &#39;lawton&#39;, &#39;northwest OK&#39;, &#39;oklahoma city&#39;, &#39;stillwater&#39;, &#39;texoma&#39;, &#39;tulsa&#39;, &#39;bend&#39;, &#39;corvallis/albany&#39;, &#39;east oregon&#39;, &#39;eugene&#39;, &#39;klamath falls&#39;, &#39;oregon coast&#39;, &#39;portland&#39;, &#39;roseburg&#39;, &#39;salem&#39;, &#39;altoona-johnstown&#39;, &#39;harrisburg&#39;, &#39;lancaster&#39;, &#39;lehigh valley&#39;, &#39;meadville&#39;, &#39;philadelphia&#39;, &#39;pittsburgh&#39;, &#39;poconos&#39;, &#39;reading&#39;, &#39;scranton / wilkes-barre&#39;, &#39;state college&#39;, &#39;williamsport&#39;, &#39;york&#39;, &#39;rhode island&#39;, &#39;charleston&#39;, &#39;columbia&#39;, &#39;florence&#39;, &#39;greenville / upstate&#39;, &#39;hilton head&#39;, &#39;myrtle beach&#39;, &#39;northeast SD&#39;, &#39;pierre / central SD&#39;, &#39;rapid city / west SD&#39;, &#39;sioux falls / SE SD&#39;, &#39;south dakota&#39;, &#39;chattanooga&#39;, &#39;clarksville&#39;, &#39;cookeville&#39;, &#39;knoxville&#39;, &#39;memphis&#39;, &#39;nashville&#39;, &#39;tri-cities&#39;, &#39;abilene&#39;, &#39;amarillo&#39;, &#39;austin&#39;, &#39;beaumont / port arthur&#39;, &#39;brownsville&#39;, &#39;college station&#39;, &#39;corpus christi&#39;, &#39;dallas / fort worth&#39;, &#39;deep east texas&#39;, &#39;del rio / eagle pass&#39;, &#39;galveston&#39;, &#39;houston&#39;, &#39;killeen / temple / ft hood&#39;, &#39;laredo&#39;, &#39;lubbock&#39;, &#39;mcallen / edinburg&#39;, &#39;odessa / midland&#39;, &#39;san angelo&#39;, &#39;san antonio&#39;, &#39;san marcos&#39;, &#39;southwest TX&#39;, &#39;tyler / east TX&#39;, &#39;victoria&#39;, &#39;waco&#39;, &#39;wichita falls&#39;, &#39;logan&#39;, &#39;ogden-clearfield&#39;, &#39;provo / orem&#39;, &#39;salt lake city&#39;, &#39;st george&#39;, &#39;vermont&#39;, &#39;charlottesville&#39;, &#39;danville&#39;, &#39;fredericksburg&#39;, &#39;harrisonburg&#39;, &#39;lynchburg&#39;, &#39;new river valley&#39;, &#39;norfolk / hampton roads&#39;, &#39;roanoke&#39;, &#39;southwest VA&#39;, &#39;winchester&#39;, &#39;kennewick-pasco-richland&#39;, &#39;moses lake&#39;, &#39;olympic peninsula&#39;, &#39;seattle-tacoma&#39;, &#39;wenatchee&#39;, &#39;yakima&#39;, &#39;eastern panhandle&#39;, &#39;morgantown&#39;, &#39;southern WV&#39;, &#39;west virginia (old)&#39;, &#39;appleton-oshkosh-FDL&#39;, &#39;eau claire&#39;, &#39;green bay&#39;, &#39;janesville&#39;, &#39;kenosha-racine&#39;, &#39;madison&#39;, &#39;milwaukee&#39;, &#39;northern WI&#39;, &#39;sheboygan&#39;, &#39;wausau&#39;, &#39;wyoming&#39;], 404)
manufacturer: ([&#39;ford&#39;, &#39;gmc&#39;, &#39;chevrolet&#39;, &#39;toyota&#39;, &#39;jeep&#39;, &#39;nissan&#39;, &#39;ram&#39;, &#39;mazda&#39;, &#39;cadillac&#39;, &#39;honda&#39;, &#39;dodge&#39;, &#39;lexus&#39;, &#39;Other&#39;, &#39;buick&#39;, &#39;chrysler&#39;, &#39;audi&#39;, &#39;infiniti&#39;, &#39;subaru&#39;, &#39;acura&#39;, &#39;hyundai&#39;, &#39;mercedes-benz&#39;, &#39;bmw&#39;, &#39;volkswagen&#39;, &#39;kia&#39;], 24)
model: ([&#39;f-150&#39;, &#39;Other&#39;, &#39;silverado 1500&#39;], 3)
condition: ([&#39;condition_missing&#39;, &#39;good&#39;, &#39;excellent&#39;, &#39;fair&#39;, &#39;like new&#39;, &#39;Other&#39;], 6)
fuel: ([&#39;gas&#39;, &#39;other&#39;, &#39;diesel&#39;, &#39;hybrid&#39;, &#39;Other&#39;], 5)
title_status: ([&#39;clean&#39;, &#39;rebuilt&#39;, &#39;Other&#39;], 3)
transmission: ([&#39;automatic&#39;, &#39;other&#39;, &#39;manual&#39;], 3)
drive: ([&#39;drive_missing&#39;, &#39;rwd&#39;, &#39;4wd&#39;, &#39;fwd&#39;], 4)
type: ([&#39;type_missing&#39;, &#39;pickup&#39;, &#39;truck&#39;, &#39;other&#39;, &#39;coupe&#39;, &#39;SUV&#39;, &#39;hatchback&#39;, &#39;mini-van&#39;, &#39;sedan&#39;, &#39;Other&#39;, &#39;van&#39;, &#39;convertible&#39;, &#39;wagon&#39;], 13)
paint_color: ([&#39;paint_missing&#39;, &#39;white&#39;, &#39;blue&#39;, &#39;red&#39;, &#39;black&#39;, &#39;silver&#39;, &#39;grey&#39;, &#39;brown&#39;, &#39;Other&#39;, &#39;green&#39;, &#39;custom&#39;], 11)
state: ([&#39;az&#39;, &#39;Other&#39;, &#39;fl&#39;, &#39;ma&#39;, &#39;nc&#39;, &#39;ny&#39;, &#39;or&#39;, &#39;pa&#39;, &#39;tx&#39;, &#39;wa&#39;, &#39;wi&#39;, &#39;al&#39;, &#39;ca&#39;, &#39;co&#39;, &#39;ct&#39;, &#39;ga&#39;, &#39;id&#39;, &#39;il&#39;, &#39;in&#39;, &#39;ia&#39;, &#39;ks&#39;, &#39;md&#39;, &#39;mi&#39;, &#39;mn&#39;, &#39;mo&#39;, &#39;mt&#39;, &#39;nj&#39;, &#39;nm&#39;, &#39;oh&#39;, &#39;ok&#39;, &#39;sc&#39;, &#39;tn&#39;, &#39;va&#39;], 33)
</pre></div>
</div>
</div>
</div>
<p>Esta es la salida que muestra algunas columnas con sus valores únicos y cuántos tiene cada uno.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">resumen_categorias</span><span class="p">(</span><span class="n">df_reducido</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Conteo</th>
      <th>Porcentaje (%)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Other</th>
      <td>408454</td>
      <td>95.68</td>
    </tr>
    <tr>
      <th>f-150</th>
      <td>13286</td>
      <td>3.11</td>
    </tr>
    <tr>
      <th>silverado 1500</th>
      <td>5140</td>
      <td>1.20</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Aquí se observan como quedaron finalmente las categorías de la variable model.</p>
</section>
</section>
<section id="actualizacion-de-la-base-de-datos">
<h2><em><strong>4. Actualización de la base de datos</strong></em><a class="headerlink" href="#actualizacion-de-la-base-de-datos" title="Link to this heading">#</a></h2>
<p>Finalmente, se guarda el DataFrame limpio en un archivo CSV para poder usarlo después.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_reducido</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;limpio_miniproyecto_3.csv&quot;</span><span class="p">,</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="MP3_DESCR_VAR.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><em><strong>Descripción de variables</strong></em></p>
      </div>
    </a>
    <a class="right-next"
       href="MP3_EDA.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><em><strong>Análsis exploratorio de datos (EDA)</strong></em></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importar-datos-y-librerias"><strong>1. Importar Datos y librerías</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#observacion-de-los-datos"><strong>2. Observación de los datos</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#limpieza-de-datos"><strong>3. Limpieza de datos</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#elimicacion-de-variables-irrelevantes"><em><strong>3.1. Elimicación de variables irrelevantes</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transformacion-de-variables"><em><strong>3.2. Transformación de variables:</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#identificacion-analisis-y-tratamiento-de-valores-faltantes"><em><strong>3.3. Identificación, análisis y tratamiento de valores faltantes</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#eliminicacion-de-variables-country-y-size"><em><strong>3.3.1. Eliminicación de variables: <code class="docutils literal notranslate"><span class="pre">country</span></code> y <code class="docutils literal notranslate"><span class="pre">size</span></code>:</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-con-un-rango-de-20-40-de-valores-faltantes"><em><strong>3.3.2. Variables con un rango de 20% - 40% de valores faltantes</strong></em></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cylinders"><em><strong>3.3.2.1. <code class="docutils literal notranslate"><span class="pre">cylinders:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#condition"><em><strong>3.3.2.2. <code class="docutils literal notranslate"><span class="pre">condition:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#drive"><em><strong>3.3.2.3. <code class="docutils literal notranslate"><span class="pre">drive:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#paint-color"><em><strong>3.3.2.4. <code class="docutils literal notranslate"><span class="pre">paint_color:</span></code></strong></em></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#type"><em><strong>3.3.2.5. <code class="docutils literal notranslate"><span class="pre">type:</span></code></strong></em></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-con-menos-del-5-de-valores-faltantes"><em><strong>3.3.3. Variables con menos del 5% de valores faltantes</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#verificacion-de-valores-faltantes"><em><strong>3.3.4. Verificación de valores faltantes</strong></em></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#codificacion-de-variables-categoricas"><strong>3.5. Codificación de variables categóricas</strong></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#actualizacion-de-la-base-de-datos"><em><strong>4. Actualización de la base de datos</strong></em></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Guirlessa De La Hoz, Mariangel Mercado.
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>